import{$a as As,Ad as gs,Ba as Wa,Bc as ds,Ca as Ya,Cd as Is,Db as rs,Lb as ns,Mb as os,Nb as is,Ob as ve,Oc as ps,Pb as as,Pc as ms,Qb as ss,Rb as ls,Sb as ks,_a as Za,ab as js,ad as fs,bc as cs,cf as Cs,df as x6,ec as Oe,ef as oe,ff as er,ge as hs,gf as qj,hf as Ds,i as Xa,kc as us,kf as Ps,lf as xs,nb as P6,pb as zt,qb as ts,qd as Gs,sd as Fs,zd as Rs}from"https://app.framerstatic.com/chunk-TAQLITMJ.mjs";import{e as we,o as ys}from"https://app.framerstatic.com/chunk-SGE7S3UE.mjs";import{e as Zt}from"https://app.framerstatic.com/chunk-RI2W6YF2.mjs";import{f as Os}from"https://app.framerstatic.com/chunk-GT6WQMSO.mjs";import{a as _s}from"https://app.framerstatic.com/chunk-YE25YANI.mjs";import{a as vs}from"https://app.framerstatic.com/chunk-EWEZCJKH.mjs";import{b as BA}from"https://app.framerstatic.com/chunk-BTZXTEZJ.mjs";import{u as za}from"https://app.framerstatic.com/chunk-ONNP42RG.mjs";import{c as Ms}from"https://app.framerstatic.com/chunk-UNC7UEDE.mjs";import{w as Ar}from"https://app.framerstatic.com/chunk-6IZ5CTSQ.mjs";import{a as Ss}from"https://app.framerstatic.com/chunk-35HHB5TS.mjs";import{G as ye,Ld as Xt,Md as Ka,Qc as Pa,Sg as Va,Va as Sa,Xa as _a,Xc as ne,aa as na,bb as ya,cb as Ca,db as Ma,dc as Da,dd as xa,ed as va,fd as Oa,fe as Ja,gd as Ta,hd as Ut,ia as oa,ka as ia,la as aa,ld as wj,qe as Ha,rd as Vt,vd as wa,wd as qa,yd as Na,ye as Qa,zd as La,ze as Ua}from"https://app.framerstatic.com/chunk-DPLENNOO.mjs";import{l as xe}from"https://app.framerstatic.com/chunk-7DZRNN4K.mjs";import{f as qA}from"https://app.framerstatic.com/chunk-H4WBCNOK.mjs";import{Je as D6}from"https://app.framerstatic.com/chunk-SIIQYSAG.mjs";import{a as v6,c as OA}from"https://app.framerstatic.com/chunk-NITQ6GUY.mjs";import{b as $s,c as Es,e as Bs,f as pA,g as jr}from"https://app.framerstatic.com/chunk-OOKYJP4H.mjs";import{a as Te,b as Wt,c as Yt,d as bs}from"https://app.framerstatic.com/chunk-BTVCB7HL.mjs";import{Ac as te,Bc as Ba,Bd as Tj,Cc as pa,Cd as Ra,Dc as ma,Dd as C6,Di as ba,Fd as M6,Hb as Kt,Hc as fa,Ib as S6,Ic as Ga,Jb as sa,Kg as ha,Lc as Oj,Mc as y6,Nc as Y,Oc as Jt,Pd as ga,Pe as Qt,Qc as re,R as ja,Rc as Fa,T as ea,V as ta,a as Lt,ed as Ht,ic as la,k as jj,kc as ka,oc as ca,pc as Ce,pf as Ia,qc as Me,r as b6,rc as De,sc as ua,tc as da,uc as $a,vc as Pe,wa as ra,wc as _6,xc as Ea,yc as je,zc as ee}from"https://app.framerstatic.com/chunk-3XJVYL4D.mjs";import{$e as fj,$n as g6,Af as xA,Bf as Gj,Cf as Ei,Cv as Zi,Ev as Aa,Fb as f6,Ff as Fj,Gf as HA,Gt as Hi,He as ge,Hf as yt,Hq as xi,Hv as Nt,I as EA,Ib as ii,Ie as ZA,Je as Ie,Ke as he,Kq as vi,Ku as Xi,Lq as Oi,Lu as qt,Mq as Ti,Mu as zi,Ne as ki,Nj as fi,Nq as wi,Nu as Wi,Oe as wA,Of as Bi,Oq as xt,Ou as Yi,Pe as ci,Pf as xj,Pj as Gi,Pk as Se,Pn as Si,Pq as vt,Qc as ai,Qj as Fi,Qq as qi,Re as tA,Rl as Ii,Sj as Mt,Tt as Qi,Ue as ui,Um as bi,Vd as Re,Vt as h6,Wt as Ui,Xd as si,Xe as sj,Ye as cA,Yi as Ct,Yn as Dt,Zd as mj,Zi as R6,Zn as Rj,ae as yA,af as be,au as Tt,br as kj,c as m6,cp as Pt,de as F6,do as _i,eg as pi,fo as yi,fr as Ni,fu as Vi,ga as ji,gj as mi,he as St,hm as lj,ho as vA,ip as Ci,jm as _e,l as iA,lr as Li,ob as ti,op as I6,pl as gi,pq as Mi,rt as Ki,se as li,td as Fe,tk as Ri,tq as Di,vb as ri,vc as G6,vf as di,vm as hi,wb as ni,wt as Ji,xf as Aj,yf as _t,yr as Ot,zf as $i}from"https://app.framerstatic.com/chunk-O7B2OPHS.mjs";import{f as Pi}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{N as oi,m as Rt}from"https://app.framerstatic.com/chunk-WHDKBU2K.mjs";import{a as es}from"https://app.framerstatic.com/chunk-Q5MITPIS.mjs";import{b as Ft}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as vj}from"https://app.framerstatic.com/chunk-NEFK4M7X.mjs";import{b as kA,d as TA,f as gt,i as It,j as ht,l as bt,q as ei}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{b as Ai,ce as wt}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{c as B6,l as p6}from"https://app.framerstatic.com/chunk-WWFRYK5U.mjs";import{C as Vo,D as ij,E as bA,F as WA,H as YA,I as pt,J as d6,K as mt,L as Xo,M as eA,O as ft,R as Gt,S as $6,T as zo,U as aj,V as Wo,W as Yo,a as Ho,ea as Zo,fa as E6,l as lA,n as c6,o as Qo,p as Uo,v as zA}from"https://app.framerstatic.com/chunk-35MJ64JF.mjs";import{a as g,b as PA}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as u6}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{c as Bu,d as Ko,e as l6,j as K,k as hA,l as pj,m as Jo,o as k6}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var ou=Bu((ov,nu)=>{"use strict";var o6=Object.prototype.hasOwnProperty,ru=Object.prototype.toString,Yc=Object.defineProperty,Zc=Object.getOwnPropertyDescriptor,Au=function(e){return typeof Array.isArray=="function"?Array.isArray(e):ru.call(e)==="[object Array]"},ju=function(e){if(!e||ru.call(e)!=="[object Object]")return!1;var j=o6.call(e,"constructor"),t=e.constructor&&e.constructor.prototype&&o6.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!j&&!t)return!1;var r;for(r in e);return typeof r>"u"||o6.call(e,r)},eu=function(e,j){Yc&&j.name==="__proto__"?Yc(e,j.name,{enumerable:!0,configurable:!0,value:j.newValue,writable:!0}):e[j.name]=j.newValue},tu=function(e,j){if(j==="__proto__")if(o6.call(e,j)){if(Zc)return Zc(e,j).value}else return;return e[j]};nu.exports=function A(){var e,j,t,r,n,o,i=arguments[0],a=1,s=arguments.length,l=!1;for(typeof i=="boolean"&&(l=i,i=arguments[1]||{},a=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});a<s;++a)if(e=arguments[a],e!=null)for(j in e)t=tu(i,j),r=tu(e,j),i!==r&&(l&&r&&(ju(r)||(n=Au(r)))?(n?(n=!1,o=t&&Au(t)?t:[]):o=t&&ju(t)?t:{},eu(i,{name:j,newValue:A(l,o,r)})):typeof r<"u"&&eu(i,{name:j,newValue:r}));return i}});var cj=class{constructor(e,j,t){this.normal=j,this.property=e,t&&(this.space=t)}};cj.prototype.normal={};cj.prototype.property={};cj.prototype.space=void 0;function O6(A,e){let j={},t={};for(let r of A)Object.assign(j,r.property),Object.assign(t,r.normal);return new cj(j,t,e)}function qe(A){return A.toLowerCase()}var RA=class{constructor(e,j){this.attribute=j,this.property=e}};RA.prototype.attribute="";RA.prototype.booleanish=!1;RA.prototype.boolean=!1;RA.prototype.commaOrSpaceSeparated=!1;RA.prototype.commaSeparated=!1;RA.prototype.defined=!1;RA.prototype.mustUseProperty=!1;RA.prototype.number=!1;RA.prototype.overloadedBoolean=!1;RA.prototype.property="";RA.prototype.spaceSeparated=!1;RA.prototype.space=void 0;var Ne={};Ko(Ne,{boolean:()=>Q,booleanish:()=>uA,commaOrSpaceSeparated:()=>MA,commaSeparated:()=>gj,number:()=>C,overloadedBoolean:()=>tr,spaceSeparated:()=>Z});var pu=0,Q=Nj(),uA=Nj(),tr=Nj(),C=Nj(),Z=Nj(),gj=Nj(),MA=Nj();function Nj(){return 2**++pu}var T6=Object.keys(Ne),Lj=class extends RA{constructor(e,j,t,r){let n=-1;if(super(e,j),Ts(this,"space",r),typeof t=="number")for(;++n<T6.length;){let o=T6[n];Ts(this,T6[n],(t&Ne[o])===Ne[o])}}};Lj.prototype.defined=!0;function Ts(A,e,j){j&&(A[e]=j)}function NA(A){let e={},j={};for(let[t,r]of Object.entries(A.properties)){let n=new Lj(t,A.transform(A.attributes||{},t),r,A.space);A.mustUseProperty&&A.mustUseProperty.includes(t)&&(n.mustUseProperty=!0),e[t]=n,j[qe(t)]=t,j[qe(n.attribute)]=t}return new cj(e,j,A.space)}var w6=NA({properties:{ariaActiveDescendant:null,ariaAtomic:uA,ariaAutoComplete:null,ariaBusy:uA,ariaChecked:uA,ariaColCount:C,ariaColIndex:C,ariaColSpan:C,ariaControls:Z,ariaCurrent:null,ariaDescribedBy:Z,ariaDetails:null,ariaDisabled:uA,ariaDropEffect:Z,ariaErrorMessage:null,ariaExpanded:uA,ariaFlowTo:Z,ariaGrabbed:uA,ariaHasPopup:null,ariaHidden:uA,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Z,ariaLevel:C,ariaLive:null,ariaModal:uA,ariaMultiLine:uA,ariaMultiSelectable:uA,ariaOrientation:null,ariaOwns:Z,ariaPlaceholder:null,ariaPosInSet:C,ariaPressed:uA,ariaReadOnly:uA,ariaRelevant:null,ariaRequired:uA,ariaRoleDescription:Z,ariaRowCount:C,ariaRowIndex:C,ariaRowSpan:C,ariaSelected:uA,ariaSetSize:C,ariaSort:null,ariaValueMax:C,ariaValueMin:C,ariaValueNow:C,ariaValueText:null,role:null},transform(A,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function rr(A,e){return e in A?A[e]:e}function nr(A,e){return rr(A,e.toLowerCase())}var ws=NA({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gj,acceptCharset:Z,accessKey:Z,action:null,allow:null,allowFullScreen:Q,allowPaymentRequest:Q,allowUserMedia:Q,alt:null,as:null,async:Q,autoCapitalize:null,autoComplete:Z,autoFocus:Q,autoPlay:Q,blocking:Z,capture:null,charSet:null,checked:Q,cite:null,className:Z,cols:C,colSpan:null,content:null,contentEditable:uA,controls:Q,controlsList:Z,coords:C|gj,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Q,defer:Q,dir:null,dirName:null,disabled:Q,download:tr,draggable:uA,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Q,formTarget:null,headers:Z,height:C,hidden:tr,high:C,href:null,hrefLang:null,htmlFor:Z,httpEquiv:Z,id:null,imageSizes:null,imageSrcSet:null,inert:Q,inputMode:null,integrity:null,is:null,isMap:Q,itemId:null,itemProp:Z,itemRef:Z,itemScope:Q,itemType:Z,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Q,low:C,manifest:null,max:null,maxLength:C,media:null,method:null,min:null,minLength:C,multiple:Q,muted:Q,name:null,nonce:null,noModule:Q,noValidate:Q,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Q,optimum:C,pattern:null,ping:Z,placeholder:null,playsInline:Q,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Q,referrerPolicy:null,rel:Z,required:Q,reversed:Q,rows:C,rowSpan:C,sandbox:Z,scope:null,scoped:Q,seamless:Q,selected:Q,shadowRootClonable:Q,shadowRootDelegatesFocus:Q,shadowRootMode:null,shape:null,size:C,sizes:null,slot:null,span:C,spellCheck:uA,src:null,srcDoc:null,srcLang:null,srcSet:null,start:C,step:null,style:null,tabIndex:C,target:null,title:null,translate:null,type:null,typeMustMatch:Q,useMap:null,value:uA,width:C,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Z,axis:null,background:null,bgColor:null,border:C,borderColor:null,bottomMargin:C,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Q,declare:Q,event:null,face:null,frame:null,frameBorder:null,hSpace:C,leftMargin:C,link:null,longDesc:null,lowSrc:null,marginHeight:C,marginWidth:C,noResize:Q,noHref:Q,noShade:Q,noWrap:Q,object:null,profile:null,prompt:null,rev:null,rightMargin:C,rules:null,scheme:null,scrolling:uA,standby:null,summary:null,text:null,topMargin:C,valueType:null,version:null,vAlign:null,vLink:null,vSpace:C,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Q,disableRemotePlayback:Q,prefix:null,property:null,results:C,security:null,unselectable:null},space:"html",transform:nr});var qs=NA({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:MA,accentHeight:C,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:C,amplitude:C,arabicForm:null,ascent:C,attributeName:null,attributeType:null,azimuth:C,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:C,by:null,calcMode:null,capHeight:C,className:Z,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:C,diffuseConstant:C,direction:null,display:null,dur:null,divisor:C,dominantBaseline:null,download:Q,dx:null,dy:null,edgeMode:null,editable:null,elevation:C,enableBackground:null,end:null,event:null,exponent:C,externalResourcesRequired:null,fill:null,fillOpacity:C,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gj,g2:gj,glyphName:gj,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:C,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:C,horizOriginX:C,horizOriginY:C,id:null,ideographic:C,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:C,k:C,k1:C,k2:C,k3:C,k4:C,kernelMatrix:MA,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:C,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:C,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:C,overlineThickness:C,paintOrder:null,panose1:null,path:null,pathLength:C,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Z,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:C,pointsAtY:C,pointsAtZ:C,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:MA,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:MA,rev:MA,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:MA,requiredFeatures:MA,requiredFonts:MA,requiredFormats:MA,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:C,specularExponent:C,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:C,strikethroughThickness:C,string:null,stroke:null,strokeDashArray:MA,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:C,strokeOpacity:C,strokeWidth:null,style:null,surfaceScale:C,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:MA,tabIndex:C,tableValues:null,target:null,targetX:C,targetY:C,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:MA,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:C,underlineThickness:C,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:C,values:null,vAlphabetic:C,vMathematical:C,vectorEffect:null,vHanging:C,vIdeographic:C,version:null,vertAdvY:C,vertOriginX:C,vertOriginY:C,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:C,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:rr});var q6=NA({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(A,e){return"xlink:"+e.slice(5).toLowerCase()}});var N6=NA({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:nr});var L6=NA({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(A,e){return"xml:"+e.slice(3).toLowerCase()}});var mu=/[A-Z]/g,Ns=/-[a-z]/g,fu=/^data[-\w.:]+$/i;function K6(A,e){let j=qe(e),t=e,r=RA;if(j in A.normal)return A.property[A.normal[j]];if(j.length>4&&j.slice(0,4)==="data"&&fu.test(e)){if(e.charAt(4)==="-"){let n=e.slice(5).replace(Ns,Fu);t="data"+n.charAt(0).toUpperCase()+n.slice(1)}else{let n=e.slice(4);if(!Ns.test(n)){let o=n.replace(mu,Gu);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Lj}return new r(t,e)}function Gu(A){return"-"+A.toLowerCase()}function Fu(A){return A.charAt(1).toUpperCase()}var Ls=O6([w6,ws,q6,N6,L6],"html"),or=O6([w6,qs,q6,N6,L6],"svg");function Ks(A,e){let j=e||{};return(A[A.length-1]===""?[...A,""]:A).join((j.padRight?" ":"")+","+(j.padLeft===!1?"":" ")).trim()}function Js(A){return A.join(" ").trim()}function Ij(A){return!A||typeof A!="object"?"":"position"in A||"type"in A?Hs(A.position):"start"in A||"end"in A?Hs(A):"line"in A||"column"in A?J6(A):""}function J6(A){return Qs(A&&A.line)+":"+Qs(A&&A.column)}function Hs(A){return J6(A&&A.start)+"-"+J6(A&&A.end)}function Qs(A){return A&&typeof A=="number"?A:1}var gA=class extends Error{constructor(e,j,t){super(),typeof j=="string"&&(t=j,j=void 0);let r="",n={},o=!1;if(j&&("line"in j&&"column"in j?n={place:j}:"start"in j&&"end"in j?n={place:j}:"type"in j?n={ancestors:[j],place:j.position}:n={...j}),typeof e=="string"?r=e:!n.cause&&e&&(o=!0,r=e.message,n.cause=e),!n.ruleId&&!n.source&&typeof t=="string"){let a=t.indexOf(":");a===-1?n.ruleId=t:(n.source=t.slice(0,a),n.ruleId=t.slice(a+1))}if(!n.place&&n.ancestors&&n.ancestors){let a=n.ancestors[n.ancestors.length-1];a&&(n.place=a.position)}let i=n.place&&"start"in n.place?n.place.start:n.place;this.ancestors=n.ancestors||void 0,this.cause=n.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=Ij(n.place)||"1:1",this.place=n.place||void 0,this.reason=this.message,this.ruleId=n.ruleId||void 0,this.source=n.source||void 0,this.stack=o&&n.cause&&typeof n.cause.stack=="string"?n.cause.stack:"",this.actual,this.expected,this.note,this.url}};gA.prototype.file="";gA.prototype.name="";gA.prototype.reason="";gA.prototype.message="";gA.prototype.stack="";gA.prototype.column=void 0;gA.prototype.line=void 0;gA.prototype.ancestors=void 0;gA.prototype.cause=void 0;gA.prototype.fatal=void 0;gA.prototype.place=void 0;gA.prototype.ruleId=void 0;gA.prototype.source=void 0;var QA={basename:Ru,dirname:gu,extname:Iu,join:hu,sep:"/"};function Ru(A,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Le(A);let j=0,t=-1,r=A.length,n;if(e===void 0||e.length===0||e.length>A.length){for(;r--;)if(A.codePointAt(r)===47){if(n){j=r+1;break}}else t<0&&(n=!0,t=r+1);return t<0?"":A.slice(j,t)}if(e===A)return"";let o=-1,i=e.length-1;for(;r--;)if(A.codePointAt(r)===47){if(n){j=r+1;break}}else o<0&&(n=!0,o=r+1),i>-1&&(A.codePointAt(r)===e.codePointAt(i--)?i<0&&(t=r):(i=-1,t=o));return j===t?t=o:t<0&&(t=A.length),A.slice(j,t)}function gu(A){if(Le(A),A.length===0)return".";let e=-1,j=A.length,t;for(;--j;)if(A.codePointAt(j)===47){if(t){e=j;break}}else t||(t=!0);return e<0?A.codePointAt(0)===47?"/":".":e===1&&A.codePointAt(0)===47?"//":A.slice(0,e)}function Iu(A){Le(A);let e=A.length,j=-1,t=0,r=-1,n=0,o;for(;e--;){let i=A.codePointAt(e);if(i===47){if(o){t=e+1;break}continue}j<0&&(o=!0,j=e+1),i===46?r<0?r=e:n!==1&&(n=1):r>-1&&(n=-1)}return r<0||j<0||n===0||n===1&&r===j-1&&r===t+1?"":A.slice(r,j)}function hu(...A){let e=-1,j;for(;++e<A.length;)Le(A[e]),A[e]&&(j=j===void 0?A[e]:j+"/"+A[e]);return j===void 0?".":bu(j)}function bu(A){Le(A);let e=A.codePointAt(0)===47,j=Su(A,!e);return j.length===0&&!e&&(j="."),j.length>0&&A.codePointAt(A.length-1)===47&&(j+="/"),e?"/"+j:j}function Su(A,e){let j="",t=0,r=-1,n=0,o=-1,i,a;for(;++o<=A.length;){if(o<A.length)i=A.codePointAt(o);else{if(i===47)break;i=47}if(i===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(j.length<2||t!==2||j.codePointAt(j.length-1)!==46||j.codePointAt(j.length-2)!==46){if(j.length>2){if(a=j.lastIndexOf("/"),a!==j.length-1){a<0?(j="",t=0):(j=j.slice(0,a),t=j.length-1-j.lastIndexOf("/")),r=o,n=0;continue}}else if(j.length>0){j="",t=0,r=o,n=0;continue}}e&&(j=j.length>0?j+"/..":"..",t=2)}else j.length>0?j+="/"+A.slice(r+1,o):j=A.slice(r+1,o),t=o-r-1;r=o,n=0}else i===46&&n>-1?n++:n=-1}return j}function Le(A){if(typeof A!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(A))}var Us={cwd:_u};function _u(){return"/"}function ie(A){return!!(A!==null&&typeof A=="object"&&"href"in A&&A.href&&"protocol"in A&&A.protocol&&A.auth===void 0)}function Vs(A){if(typeof A=="string")A=new URL(A);else if(!ie(A)){let e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+A+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(A.protocol!=="file:"){let e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return yu(A)}function yu(A){if(A.hostname!==""){let t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}let e=A.pathname,j=-1;for(;++j<e.length;)if(e.codePointAt(j)===37&&e.codePointAt(j+1)===50){let t=e.codePointAt(j+2);if(t===70||t===102){let r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}var H6=["history","path","basename","stem","extname","dirname"],Ke=class{constructor(e){let j;e?ie(e)?j={path:e}:typeof e=="string"||Cu(e)?j={value:e}:j=e:j={},this.cwd="cwd"in j?"":Us.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let t=-1;for(;++t<H6.length;){let n=H6[t];n in j&&j[n]!==void 0&&j[n]!==null&&(this[n]=n==="history"?[...j[n]]:j[n])}let r;for(r in j)H6.includes(r)||(this[r]=j[r])}get basename(){return typeof this.path=="string"?QA.basename(this.path):void 0}set basename(e){U6(e,"basename"),Q6(e,"basename"),this.path=QA.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?QA.dirname(this.path):void 0}set dirname(e){Xs(this.basename,"dirname"),this.path=QA.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?QA.extname(this.path):void 0}set extname(e){if(Q6(e,"extname"),Xs(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=QA.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ie(e)&&(e=Vs(e)),U6(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?QA.basename(this.path,this.extname):void 0}set stem(e){U6(e,"stem"),Q6(e,"stem"),this.path=QA.join(this.dirname||"",e+(this.extname||""))}fail(e,j,t){let r=this.message(e,j,t);throw r.fatal=!0,r}info(e,j,t){let r=this.message(e,j,t);return r.fatal=void 0,r}message(e,j,t){let r=new gA(e,j,t);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function Q6(A,e){if(A&&A.includes(QA.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+QA.sep+"`")}function U6(A,e){if(!A)throw new Error("`"+e+"` cannot be empty")}function Xs(A,e){if(!A)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Cu(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}var Mu={track:!0};function zs(A){let e={...A,event:"component_canvas_create"};Ft(e,Mu)}var Du={track:!0};function Ws(A){let e={...A,event:"external_component_insert"};Ft(e,Du)}function ir(A){let e={},j=A.getPresetsListNode();if(!j)return e;for(let t of j.children)if(!mj(t)){if(Aj(t)){let r=va(t.tag);e[r]??=t.id;continue}if(xA(t)){e.stylePresetLink??=t.id;continue}if(HA(t)){e.stylePresetInlineCode??=t.id;continue}if(Fj(t)){e.stylePresetImage??=t.id;continue}if(Gj(t)){e.stylePresetBlockquote??=t.id;continue}if(Ei(t)){e.stylePresetTable??=t.id;continue}if(di(t)){let r=Hi(t.componentIdentifier);e[r]??=t.id;continue}PA(t)}return e}function gf(A,e){let j=ir(A),t={};for(let r in j){let n=e[r];A.get(n)||(t[r]=j[r])}Object.keys(t).length>0&&e.set(t)}function If(A,e,j="",t={}){let r=document.createElement(e);r.innerText=j;let n=Xt(A,e);if(n)xi(r,n.id);else{let o=ia[e],i=o.fontSize,a;bi(i)?a=hi(i):TA(i)&&(a=[i,"px"]),Di(r.style,Mi.transforms,{...o,fontSize:a})}return new Ja({html:r.outerHTML,...ir(A),...t})}function Ys(A,e,j,t){let r=`${t}/${j.segment}`;A.add(r);for(let n of j.children)Ys(A,e,n,r)}function Zs(A){let e=new Set,j=A.getRouteSegmentRootNode();for(let t of j.children)Ys(e,A,t,"");return e}var Pu=/\/+/gu,xu=/\/{2,}/gu,vu=new RegExp(`-?${ri}-?`,"g"),Ou=/\s+/gu,Tu=/[?#[\]@!$&'()*+,;="<>%{}|\\^`]/gu;function wu(A){return A.startsWith("/")?A:"/"+A}function qu(A){return A.replace(xu,"/")}function Nu(A){return A.toLowerCase().replaceAll(Tu,"").replaceAll(Ou,"-")}function ar(A){let e=Lu(A,Pu,vu),j=ms(e,A.length);return A.startsWith("/")?A=A7(A,j,Nu):A=A7(A,j,pi),A=wu(A),A=qu(A),A}function Lu(A,...e){let j=[];for(let t of e)for(let r of A.matchAll(t))g(r.index!==void 0),j.push([r.index,r.index+r[0].length]);return ps(j)}function A7(A,e,j){let t="",r=0;for(let[n,o]of e)n>r&&(t+=A.substring(r,n)),t+=j(A.substring(n,o)),r=o;return r<A.length&&(t+=A.substring(r)),t}var j7=":missing-slug";function Ku(A,e){let j=Li(e,A);if(j)return j.getSlugVariable();let t=iA.dataForIdentifier(A);if(!t)return;let r=t.annotations?.framerSlug;if(!r)return;let n=t.properties[r];if(n?.type==="string")return{id:r,name:n.title??"Slug".toLowerCase()}}function X6(A,e,j){if(!e)return"/unknown";let t=Ku(A,j),r=0,n=e.replace(ni,(o,i)=>(r++,t?`:${t.id}`:j7));return r>0?n:(n.endsWith("/")||(n+="/"),t?n+`:${t.id}`:n+j7)}function Ju(A){let e=A.split("/"),j=e[e.length-1];return j?Ot(j):!1}var z6=(A,e,j,t=!1)=>{A=ar(A);let r=Zs(e.tree),n=e.tree.root.homePageNodeId,o=!!j&&j.id===n;A==="/"&&!o&&(A="/page"),j?.dataIdentifier&&(A=X6(j.dataIdentifier,A,e.tree));let i=A.endsWith("/")&&!o,a=A;i&&(a=A.slice(0,-1));let s=Ht(e.tree,j);return r.has(A)&&(t||A!==s)&&(r.add(a),Ju(a)&&(a+="/copy"),a=wj(a,r,{withDash:!0})),{path:i?`${a}/`:a,suggestedName:ts(A)}};var uj=l6(Ai()),t7="dismissedInstantNPMToast",r7="showedInstantNPMToast",n7="instant-npm-toast",Vf=()=>window.localStorage.getItem(r7)==="true",o7=()=>window.localStorage.getItem(t7)==="true";function Hu(){return(0,uj.jsxs)(uj.Fragment,{children:[(0,uj.jsx)(D6,{children:"You installed an external NPM library."}),(0,uj.jsxs)("a",{href:"https://www.framer.com/developers/#faq",target:"_blank",children:[" ",(0,uj.jsx)(D6,{children:"Learn More"})]})]})}function i7(){window.localStorage.setItem(r7,"true"),BA({type:"add",variant:"info",text:(0,uj.jsx)(Hu,{}),key:n7,duration:1/0,action:{title:"Dismiss",onClick:()=>window.localStorage.setItem(t7,"true")}})}function Xf(){BA({type:"remove",key:n7})}var a7="https://app.framerstatic.com/framer_compiler_bg-UTRYLQ4Z.wasm";var dj=zA("compiler");async function lG(){await Qe()}function s7(A){return{code:`const err = new Error(${JSON.stringify(String(A))}); err.name = "CompilationError"; throw err;`,sourceMap:void 0,annotations:{},exportedNames:[],reExportedModules:[],imports:{absolute:[],relative:[],bare:[]}}}function l7(A,e,j){let t={...e.exports};j&&(t.__FramerMetadata__={type:"variable"},A=A.concat(`
export const __FramerMetadata__ = `,JSON.stringify({exports:t})));let r=Object.entries(t).filter(([,o])=>o.type!=="tsType").map(([o])=>o),n={};for(let[o,i]of Object.entries(e.exports))i.annotations&&(n[o]=i.annotations);return{moduleCode:A,annotations:n,exportedNames:r}}async function k7({localId:A,name:e,source:j,includeSourceMap:t=!0}){let r=await Qe();try{let{code:n,metadata:o,map:i}=await r.transformSync(j,{fileName:OA(e).source,framerContractVersion:1,mediaType:"tsx",minify:!1,compress:!1,mangle:!1,sourceMap:t,useReactRefresh:!0}),a=`
if (!window.$RefreshReg$) throw new Error("React refresh preamble was not loaded. Something is wrong.");
const prevRefreshReg = window.$RefreshReg$;
const prevRefreshSig = window.$RefreshSig$;
window.$RefreshReg$ = window.reactRefreshRuntime.getRefreshReg("${A}");
window.$RefreshSig$ = window.reactRefreshRuntime.createSignatureFunctionForTransform;

${n}

window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;`,{moduleCode:s,annotations:l,exportedNames:k}=l7(a,o,!0);return{code:s,sourceMap:i??void 0,imports:o.requestedModules,annotations:l,exportedNames:k,reExportedModules:o.reExportedModules}}catch(n){let o=`Failed to compile development module ${e}: ${n}`;return dj.debug(o,"(enable trace logging to see full source)"),dj.trace(j),A.startsWith("codeFile/")||(dj.reportCriticalError(new Error(o),{moduleName:e,moduleSource:j}),qA("application_error",{message:o,area:"compiler"})),s7(n)}}async function kG(A,e){await(await Qe()).transformSync(e,{fileName:OA(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:!1,mangle:!1,sourceMap:!1,useReactRefresh:!1})}async function c7({name:A,source:e,type:j,includeSourceMap:t=!0,addFramerMetadata:r=!0,telemetrySession:n}){let o=Oe(10),i=`compile-${A}-${o}`,a=`\u{1F4DD} Compile ${A}`;dj.debug("Compiling module",A,"; with source map:",t),Te(i);let s=await Qe(),l=n?.start("transform"),k=j==="collection";try{let{code:c,map:u,metadata:$}=await s.transformSync(e,{fileName:OA(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:k,mangle:k,sourceMap:t,useReactRefresh:!1}),{moduleCode:E,annotations:m,exportedNames:d}=l7(c,$,r);return{code:E,sourceMap:u??void 0,imports:$.requestedModules,annotations:m,exportedNames:d,reExportedModules:$.reExportedModules}}catch(c){let u=`Failed to compile module ${A}: ${c}`;return dj.debug(u,"(enable trace logging to see full source)"),dj.trace(e),A.startsWith("codeFile/")||(dj.reportCriticalError(new Error(u),{moduleName:A,moduleSource:e}),qA("application_error",{message:u,area:"compiler"})),s7(c)}finally{l?.end(),d7(a,i)}}async function u7(A){let j=`analyze-imports-${Oe(10)}`,t="\u{1F575}\u{1F3FB} Analyze Imports";Te(j);try{return{ok:!0,value:await(await Qe()).analyzeImports(A)}}catch(r){return dj.warn("Failed to analyze imports:",r),r instanceof Error?{ok:!1,error:r}:{ok:!1,error:new Error(`${r}`)}}finally{d7(t,j)}}var lr;async function Qe(){if(!lr){let A=new Worker(ca("./modulesCompilerWorker.js")),e=la(A);lr=e.initWithPathToWasm(a7).then(()=>({transformSync:e.transformSync,analyzeImports:e.analyzeImports})),lr.catch(()=>{if(es()||!Qo.isProduction)throw new Error(`\u274C Your dev setup is struggling to run the compiler\u2019s WASM binary.
To fix it, run "make clean" followed by "make dev".`)})}return lr}function d7(A,e){Wt(A,e),performance.getEntriesByName(A,"measure").forEach(({name:j,duration:t})=>{dj.debug(j,"took",t.toFixed(2),"ms"),bs(j)}),Yt(e)}function $7(A,e){if(!cA(A))return;let j=A.getSupportedLayout(iA),t=A.getCurrentVariantSize(iA);m6(j.width)&&t?.widthType!==0&&(e.widthType=2,e.left!==null&&e.right!==null&&(e.right=null)),m6(j.height)&&t?.heightType!==0&&(e.heightType=2,e.top!==null&&e.bottom!==null&&(e.bottom=null))}function E7(A,e,j=!0){A.scheduler.processWhenReady(()=>{let{overlayStore:t,selectionStore:r,scopeStore:n,canvasStore:o,persistedUserDefaults:i}=A.stores;n.selectByNode(e.id),r.set(e.id);let a=A.tree.get(e.cache.overlayAncestorId);if(Zi(a)?t.showOverlay(r,a,a.parentid):t.hideAll(),j){let s=A.tree.getBoundingFrameForNodes([e]);o.zoomToCenter(s,{animated:i.animateOnZoom,maxZoom:1})}})}function kr(A,e,j,t,r){if(ii(j.htmlContent))return;let n=A.getScopeNodeFor(e);g(n&&Pt(n),"Can't find scope with breakpoints");let i=n.getTopLevelVariants().map(a=>{let s=Rj(a)?j.id:Qi(a.id,j.id),l=A.get(s);return g(l&&sj(l),"Can't find rich text node in breakpoint"),[a,l]});for(let[a,s]of i){g(lj(a),"Can't read width attribute of node");let l=Vt(t,k=>(k.breakpointWidth??0)>a.width)??r;s.detachTextStylePreset(l,!0)}}var W6=["formButtonSuccessVariant","formButtonPendingVariant","formButtonErrorVariant","formButtonIncompleteVariant","whileOpenEffectVariant","appearEffectVisibleVariantId","appearEffectObscuredVariantId","dataLoaderLoadingVariant","dataLoaderDisabledVariant"];function p7(A,e,j){let t=e.tokenOverrides;!t||Uo(t)||(m7(A,j,t),e.set({tokenOverrides:void 0}))}function m7(A,e,j){Vu(A,e.id,j);let t=[];for(let r of e.variables){if(!F7(r)){t.push(r);continue}switch(r.type){case"border":t.push(Fe(r.initialValue)?{...r,initialValue:{...r.initialValue,borderColor:AA(r.initialValue.borderColor,j)}}:r);break;case"color":t.push({...r,initialValue:AA(r.initialValue,j)});break;default:PA(r,"Unsupported variable type.")}}e.set({variables:t})}function Vu(A,e,j){let t=A.tree.get(e);if(t)for(let{node:r,skipChildren:n}of t.walkWithSkipChildren()){if(yA(r)){n();continue}if(f7(A,r,j),Xu(A,r,j),!cA(r)||r.isVectorInstance)continue;let o=r.getLocalSmartComponentNodeId();if(!o){r.set({tokenOverrides:j});continue}let i=A.tree.get(o);wA(i)&&i.isLoaded()&&(m7(A,i,j),A.stores.codeGenerationStore.updateComponent(i.id))}}function Xu(A,e,j){let t=Nt(A.tree,e);for(let r of t){let{relatedNode:n,replicaRoot:o}=r;o.replicaInfo.overrides[e.id]&&f7(A,n,j)}}function f7(A,e,j){if(gi(e)){let t=AA(e.fillColor,j);t&&e.set({fillColor:t})}if(ra(e)){let t=AA(e.borderColor,j);t&&e.set({borderColor:t})}if(ha(e)){let t=AA(e.strokeColor,j);t&&e.set({strokeColor:t})}if(sj(e))if(e.htmlContent)zu(A,e,j);else{let t=new Map;for(let r in j){if(!I6(r))continue;let n=j[r],o=Gi(r);o&&t.set(o,`var(${r}, ${n})`)}e.replaceColorTokenVariables(t),e.hasLinks()&&e.remapLinkStylePresets(r=>{let n=G7(A,r,j);if(xA(n))return n})}else if(cA(e)){let t=iA.componentForIdentifier(e.codeComponentIdentifier);if(!t)return;let r=e.getControlProps(t.properties);if(!r)return;for(let n in r){let o=r[n];if(!(!o||!F7(o)))switch(o.type){case"border":if(!Fe(o.value))break;e.setControlProp(n,{...o,value:{...o.value,borderColor:AA(o.value.borderColor,j)}});break;case"color":e.setControlProp(n,{...o,value:AA(o.value,j)});break;default:PA(o,"Unsupported control type.")}}}}function zu(A,e,j){for(let t of Ut){let r=e[t];if(!r)continue;let n=G7(A,r,j);xe(n)&&e.set({[t]:n.id})}}function G7(A,e,j){let t=A.tree.getNodeWithTrait(e,xe);if(!t)return;let r=Wu(t,j);if(B7(t,r))return t;let n=ne(A.tree),o=n.getStylePresets().filter(i=>i.id!==e&&B7(i,r));return o.length?o?.[0]:(A.tree.insertNode(r,n.id),A.stores.codeGenerationStore.createModuleFromComponentSource(r).catch(lA),r)}function B7(A,e){return A.__class!==e.__class?!1:Aj(A)&&Aj(e)||xA(A)&&xA(e)||Gj(A)&&Gj(e)||HA(A)&&HA(e)||Fj(A)&&Fj(e)?A.equals(e):!1}function Wu(A,e){let j=A.clone();return Yu(j,e),j}function Yu(A,e){Aj(A)?(A.textColor=AA(A.textColor,e),A.textStrokeColor=AA(A.textStrokeColor,e),A.textDecorationColor=AA(A.textDecorationColor,e)):xA(A)?(A.linkTextColor=AA(A.linkTextColor,e),A.linkTextDecorationColor=AA(A.linkTextDecorationColor,e),A.linkTextBackgroundColor=AA(A.linkTextBackgroundColor,e),A.linkHoverTextColor=AA(A.linkHoverTextColor,e),A.linkHoverTextDecorationColor=AA(A.linkHoverTextDecorationColor,e),A.linkHoverTextBackgroundColor=AA(A.linkHoverTextBackgroundColor,e),A.linkCurrentTextColor=AA(A.linkCurrentTextColor,e),A.linkCurrentTextDecorationColor=AA(A.linkCurrentTextDecorationColor,e),A.linkCurrentTextBackgroundColor=AA(A.linkCurrentTextBackgroundColor,e)):Fj(A)?A.borderColor=AA(A.borderColor,e):Gj(A)?(A.textColor=AA(A.textColor,e),A.textDecorationColor=AA(A.textDecorationColor,e),A.textStrokeColor=AA(A.textStrokeColor,e),A.borderColor=AA(A.borderColor,e),A.fillColor=AA(A.fillColor,e),A.lineColor=AA(A.lineColor,e)):HA(A)&&(A.inlineCodeTextColor=AA(A.inlineCodeTextColor,e),A.inlineCodeFillColor=AA(A.inlineCodeFillColor,e),A.borderColor=AA(A.borderColor,e))}function AA(A,e){if(bt(A)||!Mt(A))return A;let{customProperty:j,metadata:t}=fi(A);if(!I6(j))return A;let r=e[j];if(!r)return A;let n=`var(${j}, ${r})`;return t?`${n} ${t}`:n}function F7(A){switch(A.type){case"color":case"border":return!0;case"array":case"boolean":case"number":case"string":case"richtext":case"eventhandler":case"image":case"file":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"gap":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"trackingid":case"vectorsetitem":case"date":case"enum":case"link":case"linkrelvalues":case"fusednumber":case"object":case"font":case"pagescope":case"slot":case"slug":case"controlReference":case"nodePropertyControlReference":return!1;default:PA(A,"Check if we support this variable type.")}}function R7(A){if(!tA(A))return!1;for(let e of A.children)if(!vA(e)||jj(e)&&e.children.length>0)return!1;return!0}function g7(A,e,j){if(St(j))return;let t;A.stores.scopeStore.removeNode(e);let r=Se(A.tree,j.id);r&&A.tree.removeNode(r);let n=A.tree.root.homePageNodeId,o=Se(A.tree,e.id);o&&(e.id===n?A.tree.removeNode(o):o.set({webPageId:j.id})),A.tree.current(j)?.set({name:e.name,pagePath:e.pagePath}),A.tree.has(n)||(t??={},t.homePageNodeId=j.id),t&&A.tree.root.set(t)}function rF(A,e){return Zu(A,e).map(j=>j.replicaInfo.overrides[j.originalid]).filter(ht)}function Ue(A,e){return A.filter(j=>mj(j)&&j.originalid===e.id).sort((j,t)=>(t.breakpointWidth??0)-(j.breakpointWidth??0))}function Zu(A,e){let j=A.getPresetsListNode();g(j,"Can't find PresetsListNode");let t=j.children.filter(Aj);return Ue(t,e)}function CF(A,e,j){if(!sj(j))return;let t=j.getStylePresetsForCodeGeneration(A);for(let r of t){let n=A.getNodes(r.cache.replicaInstances??[]);for(let o of n)e[o.id]??=o.toJS();e[r.id]??=r.toJS()}}function Y6(A,e,j){for(let t of e){let r=A[t];if(!r)continue;let n=j(r);n&&n.id!==r&&A.set({[t]:n.id})}}function h7({engine:A,node:e,pastedPresetMap:j,stylePresetNodes:t,shouldDetachTextStyles:r,breakpointVariantIds:n,shouldCreateNewPresets:o,reusePresetWithSameId:i}){if(!t)return;let a={pastedPresetMap:j,stylePresetNodes:t,shouldCreateNewPresets:o,reusePresetWithSameId:i},s=c=>Ad(A,c,a);if(Y6(e,xa,s),e.remapTextStylePresets(s),!r)return;let l=F6(e),k=A.tree.getGroundNodeFor(e);for(let c of e.getStylePresetIdsForCodeGeneration()){let u=t.find(E=>E.id===c);if(!u||!_t(u))continue;let $=Ue(t,u);if(l){kr(A.tree,l,e,$,u);continue}if(n?.has(k.id)&&lj(k)){let E=Vt($,m=>(m.breakpointWidth??0)>k.width)??u;e.detachTextStylePreset(E,!1);continue}e.detachTextStylePreset(u,!1)}}function Ad(A,e,{pastedPresetMap:j,stylePresetNodes:t,shouldCreateNewPresets:r,reusePresetWithSameId:n}){if(!t)return;let o=t.find(c=>c.id===e);if(!o)return;let i=A.tree.get(e);if(_t(i)&&(n||i.equals(o)))return j.set(e,i),i;if(!r)return;let a=ne(A.tree),s=a.getTextStylePresets().find(c=>c.equals(o));if(s&&_t(s))return j.set(e,s),s;let l=i?o.clone():o.cloneWithIds();A.tree.insertNode(l,a.id),j.set(e,l);let k=t.filter(c=>c.originalid===e);for(let c of k){let u=A.tree.get(e);if(u&&$i(u)&&u.equals(c)){j.set(e,u);continue}let E=u?c.clone():c.cloneWithIds();A.tree.insertNode(E,a.id),j.set(e,E)}return l}function b7({engine:A,node:e,pastedPresetMap:j,stylePresetNodes:t}){if(!t)return;let r={pastedPresetMap:j,stylePresetNodes:t},n=o=>jd(A,o,r);Y6(e,Oa,n),e.remapLinkStylePresets(n)}function jd(A,e,{pastedPresetMap:j,stylePresetNodes:t}){if(!t)return;let r=t.find(l=>l.id===e);if(!r||!xA(r))return;let n=A.tree.get(e);if(n&&xA(n)&&n.equals(r))return j.set(e,n),n;let i=ne(A.tree),a=i.getLinkStylePresets().find(l=>l.equals(r));if(a&&xA(a))return j.set(e,a),a;let s=n?r.clone():r.cloneWithIds();return A.tree.insertNode(s,i.id),j.set(e,s),s}function S7({engine:A,node:e,pastedPresetMap:j,stylePresetNodes:t}){if(!t)return;let r={pastedPresetMap:j,stylePresetNodes:t},n=o=>ed(A,o,r);Y6(e,Ta,n),e.remapInlineCodeStylePresets(n)}function ed(A,e,{pastedPresetMap:j,stylePresetNodes:t}){if(!t)return;let r=t.find(l=>l.id===e);if(!r||!HA(r))return;let n=A.tree.get(e);if(n&&HA(n)&&n.equals(r))return j.set(e,n),n;let i=ne(A.tree),a=i.getInlineCodeStylePresets().find(l=>l.equals(r));if(a&&HA(a))return j.set(e,a),a;let s=n?r.clone():r.cloneWithIds();return A.tree.insertNode(s,i.id),j.set(e,s),s}function MF(A){if(tA(A))return{id:A.id,pagePath:A.pagePath,webMetadata:A.webMetadata,customHTML:A.customHTML,dataIdentifier:A.dataIdentifier}}function DF(A,e,j,t,r){let n={},o=new Set;function i(a){ns(a,s=>{if(r.has(s))return;let l=td(A,s);l&&(n[s]=l);let k=ga(s,e,A,o);k&&Object.assign(n,k)})}for(let a of j.walk())i(a);return tA(t)&&i(t),{moduleData:n}}function td(A,e){let j=eA(e);if(j&&j.kind==="localModuleExport"){let t=A.getPersistedModuleByLocalId(j.localId);return t?(g(t.files.module,"expected module typed file in persisted module"),YA(t.id,t.saveId,t.files.module,j.exportSpecifier)):void 0}if(j&&j.kind==="externalModuleExport")return j}function rd(A,e,j){let t=eA(e);if(bA(t))return g(A.initialized,"Cannot paste modules before modulesStore has been initialized."),A.getPersistedModuleByLocalId(t.localId)?.id===j.moduleId?null:j.value;if(ij(t)&&t.kind==="externalModuleExport"){let r=A.getPersistedModuleByGlobalId(t.moduleId)?.localId;return r?ft(t,r).value:null}return null}function nd(A,e,j,t,r){let n=t.cloneWithIds();n.set(r),A.removeNode(t),A.insertNode(n,e,j)}function PF(A,e,j){if(!j)return e;for(let t of e.root.walk())jj(t)&&t.children.forEach((r,n)=>{if(j){let o=os(r,a=>{let s=j[a];if(!s)return;let l=rd(A,a,s);return l||void 0});if(!o)return;let i=e.current(r);if(!i)return;nd(e,t.id,n,i,o)}});return e.commit()}function od(A){return mj(A)&&lj(A)}function xF(A,e,j){let t=A.get(j.id);if(!t)return;let r=F6(t);if(!r||!vA(r))return;let n=A.getNodes(r.cache.replicaInstances??[]).filter(od);for(let{width:o,replicaInfo:i}of n){let a=e.get(o)??{},s=i.overrides[j.id];s&&(a[j.id]=s),e.set(o,a)}lj(r)&&!e.get(r.width)&&e.set(r.width,{})}function rA(A,e,j,t){if(e){if(Mt(e)){let r=Fi(e),n=A.get(r);if(n&&!(n.id in j)){let o=n.cloneWithIds();j[o.id]=o.toJS(),t&&(t[n.id]=wt())}return}if(ai(e)){rA(A,e.color,j,t);return}if(ea(e)||ja(e)||ta(e)){for(let r of e.stops)rA(A,r.value,j,t);return}if(gt(e)){for(let r of e)rA(A,r,j,t);return}if(Fe(e)){rA(A,e.borderColor,j,t);return}}}function vF(A,e,j,t){for(let r in e)rA(A,e[r],j,t);if(sj(e)){if(G6(e.htmlContent)||G6(e.textContent)){id(A,e,j,t);return}let r=e.getInlineStyleTokenVariables();rA(A,r,j,t);let n=e.getTextStylePresets(!1);for(let o of n)o&&_7(A,o,j,t);if(e.hasLinks()){let o=e.getLinkStylePresets(!0);for(let i of o){let a=A.getNodeWithTrait(i,xA);a&&y7(A,a,j,t)}}}}function _7(A,e,j,t){let r=A.getNodeWithTrait(e,xe);r&&(Aj(r)?(rA(A,r.textColor,j,t),rA(A,r.textStrokeColor,j,t),rA(A,r.textDecorationColor,j,t)):xA(r)?y7(A,r,j,t):Gj(r)?(rA(A,r.textColor,j,t),rA(A,r.textDecorationColor,j,t),rA(A,r.textStrokeColor,j,t),rA(A,r.borderColor,j,t),rA(A,r.fillColor,j,t),rA(A,r.lineColor,j,t)):HA(r)?(rA(A,r.inlineCodeTextColor,j,t),rA(A,r.inlineCodeFillColor,j,t),rA(A,r.borderColor,j,t)):Fj(r)&&rA(A,r.borderColor,j,t))}function id(A,e,j,t){for(let r of Ut){let n=e[r];n&&_7(A,n,j,t)}}function y7(A,e,j,t){rA(A,e.linkTextColor,j,t),rA(A,e.linkTextDecorationColor,j,t),rA(A,e.linkTextBackgroundColor,j,t),rA(A,e.linkHoverTextColor,j,t),rA(A,e.linkHoverTextDecorationColor,j,t),rA(A,e.linkHoverTextBackgroundColor,j,t),rA(A,e.linkCurrentTextColor,j,t),rA(A,e.linkCurrentTextDecorationColor,j,t),rA(A,e.linkCurrentTextBackgroundColor,j,t)}function OF(A,e,j){let t=j-e;return Math.ceil(A/100*t+e)}function I7(A,e,j){if(St(e)){let t=eA(e.dataIdentifier);if(!bA(t))return;let r=A.getNodeWithTrait(t.localIdName,fj);r&&(j.set(e.dataIdentifier,r),I7(A,r,j))}if(fj(e))for(let t of e.variables){if(!Ri(t))continue;let r=eA(t.dataIdentifier);if(!bA(r))continue;let n=A.getNodeWithTrait(r.localIdName,fj);n&&(j.has(t.dataIdentifier)||(j.set(t.dataIdentifier,n),I7(A,n,j)))}}function JF(A){return ui(A)?A.getGroundNodes().length===0:!1}function HF(A){if(!tA(A))return!1;let e=A.getGroundNodes();return e.length>1?!1:e.length===0?!0:e[0]?.children?.length===0}function QF(A){return A?!A.children||A.children.length===0:!1}function Z6(A,e=!0){let j=A.trim().split("/").filter(Boolean).map(t=>{let r="/"+t,n=ar(r);return n.startsWith("/")?n.slice(1):n});return A.endsWith("/")&&e&&j.push(""),j}function UF(A){return`/${Z6(A).join("/")}`}function ad(A){return A===""}function VF(A){return!!(A.webPageId&&ad(A.segment))}function sd(A,e){let j=e.get(A);if(!yt(j))return;let t=e.get(j.webPageId);if(tA(t)||j.children.length>0)return;let r=j.parentid;e.removeNode(j),r&&sd(r,e)}function XF(A,e){if(!A)return;let j=iA.dataForIdentifier(A);if(j)return Ms(void 0,j,e??Si)}function C7(A,e,j,t,r){let n=Z6(t,tA(e,!0));g(n.length>0,"Path must have at least one segment");let o=A.tree.getRouteSegmentRootNode();return n.forEach((i,a)=>{let s=a===n.length-1,l=s?r?.positionInParent:void 0,k=Ot(i)?j:void 0;k&&(i=X6(k,i,A.tree));let c=o.children.find($=>$.segment===i),u=c&&s&&e;if(!c||u&&c.webPageId){let $=new Ha({segment:i,webPageId:s?e?.id:void 0,dataIdentifier:k});A.tree.insertNode($,o.id,l),o=$}else u&&c.set({webPageId:e.id,dataIdentifier:k}),o=c}),g(yt(o),"Current parent should be the created RouteSegmentNode"),o}function M7(A,e){let j=Se(A,e);return A.get(j?.parentid)?.children.findIndex(r=>r.id===j?.id)}function kd(A,e,j){let t=new Set(A.stores.scopeStore.getSmartComponentNodes().map(r=>r.name).filter(kA));return j||e===null?wj(j??"Component",t):wj(e,t)}function An(A,e,j,t,{insertionIndex:r,preferredName:n,enterIsolation:o=!0,localIdsToExternalIdentifiers:i=new Map,externalModuleIdsToLocalIds:a=new Map,instance:s,renamedIds:l=new Map,isAutoDetach:k=!1,intrinsicSize:c,textStylePresets:u,linkStylePresets:$,inlineCodeStylePresets:E,pastedPresetMap:m=new Map,shouldPasteTextStyles:d=!1,abTesting:f=!1}={}){let R=k?Va.createWithRouteSegmentRoot():A.tree,_={children:[]};if(tA(e)){let I=e.id===A.tree.root.homePageNodeId?"Home":Ht(A.tree,e),{suggestedName:y,path:S}=z6(n??I??"Page",A,e,!0);_.pagePath=S,_.name=y}else _.name=kd(A,e.resolveValue("name"),n);let b=e.clone(_);l.set(e.id,b.id),wA(e)&&zs({componentId:b.id,source:t});let G=b.instanceIdentifier,P=vA(j),x=ve(j,i,a,l,P),T=[x];b.baseVariantId=x.id,b.addChild(x);for(let I of e.children)if(!(I.id===j.id||g6(I)))if(mj(I)&&Dt(I)){let y=P6(I.replicaInfo.overrides,l,!0);if(_e(I)){y[x.id]??={};let w=y[x.id];w.top=I.top,w.left=I.left,w.right=I.right,w.bottom=I.bottom,w.centerAnchorX=I.centerAnchorX,w.centerAnchorY=I.centerAnchorY}let S=Tt.create(A.tree,x,{overrides:y,duplicatedFrom:h6(I)});l.set(I.id,S.id),T.push(S),b.addChild(S)}else{let y=ve(I,i,a,void 0,P);T.push(y),l.set(I.id,y.id),b.addChild(y)}R.insertNode(b,void 0,r);for(let I=0;I<e.children.length;I++){let y=e.children[I];if(!g6(y))continue;let S=Tt.create(R,x,{overrides:P6(y.replicaInfo.overrides,l,!0),inheritsFrom:l.get(y.replicaInfo.inheritsFrom),duplicatedFrom:h6(y)});l.set(y.id,S.id),T.push(S),R.insertNode(S,b.id,I)}let F=ir(R);for(let I of T){if(zt(R,I,l,!1),!u&&!$&&!E)continue;let y=[];for(let S of I.walk())sj(S)&&y.push(S);for(let S of y){let w=S.getStylePresetIdsForCodeGeneration();if($&&b7({engine:A,node:S,pastedPresetMap:m,stylePresetNodes:$}),E&&S7({engine:A,node:S,pastedPresetMap:m,stylePresetNodes:E}),u){if(d)h7({engine:A,node:S,pastedPresetMap:m,stylePresetNodes:u,shouldDetachTextStyles:!1,shouldCreateNewPresets:d});else for(let N of u)if(w.has(N.id))if(tA(e)&&vA(I)){if(Re(I)){let V=Ue(u,N);kr(R,x,S,V,N)}}else(Re(I)||Qt(R,S,"html"))&&S.detachTextStylePreset(N,!1)}}for(let S of y){Qt(R,S,"html")&&(S.remapTextStylePresets((w,N)=>{let V=oa(N)?N:"p",W=S.getNodeTextStylePreset(R,V)??Xt(R,V)??aa.createDefault(V);return Ka(A,W),W}),S.remapLinkStylePresets(()=>{let w=S.getNodeLinkStylePreset(R)??Na(R)??Pa.createDefault();return La(A,w),w}),S.remapInlineCodeStylePresets(()=>{let w=S.getNodeInlineCodeStylePreset(R)??wa(R)??new Da;return qa(A,w),w}));for(let w in F)Qt(R,S,w)&&S.set({[w]:F[w]})}}let{codeGenerationStore:J}=A.stores;for(let I of m.values())yA(I)||J.createModuleFromComponentSource(I).catch(lA);if(k)return R.commit(),b.draftOrCurrent();{let I=R.get(b.baseVariantId);if(I&&Rj(I))for(let y of b.children)_i(y)&&y.replicaInfo.master===I.id&&Tt.registerInInheritedNode(I,y)}A.scheduler.process(()=>{if(!s)return;let I=A.tree.current(s);if(!I)return;let y={},S={},w=s.getRawControlProps();if(w.variant?.value&&kA(w.variant.value)){let N=l.get(w.variant.value)??x.id,V={type:"enum",value:N};y.variant=V}for(let N of W6){let V=s[N];kA(V)&&(S[N]=l.get(V)??void 0)}Nt(A.tree,I).forEach(({relatedNode:N,replicaRoot:V})=>{let W=V.replicaInfo.overrides[N.originalid];if(!W)return;let B={};for(let aA of W6){if(!(aA in W))continue;let FA=W[aA];kA(FA)&&(S[aA]=l.get(FA)??void 0)}if(N.set(B),!(Ct("variant")in W))return;let z=N.getRawControlProp("variant");if(!z||!kA(z.value))return;let nA=l.get(z.value);if(!nA)return;let p={type:"enum",value:nA};N.set(R6({variant:p}))}),I.set({codeComponentIdentifier:G,...S,...R6(y)})});let v=J.createModuleFromComponentSource(b,c);if(s&&v.then(A.scheduler.wrapHandler(()=>{if(s=A.tree.get(s?.id),!s)return;let I=A.stores.treeStore.tree.getScopeNodeFor(s)?.loaded;if(!I||!Ki(I))return;let y=A.stores.treeStore.tree.get(I.baseVariantId);y&&Rj(y)&&J.updateComponent(I.id).catch(lA)})).catch(lA),o&&(A.stores.chromeStore.contentPanelTab="Layers",A.stores.scopeStore.select(b.id,{keepHistory:!0})),tA(b)&&!f){g(kA(_.pagePath),"pagePath should be a string");let I=M7(A.tree,e.id),y=TA(I)?I+1:void 0;C7(A,b,b.dataIdentifier,_.pagePath,{positionInParent:y})}return b.draftOrCurrent()}async function D7(A,{identifier:e,enterIsolation:j,instance:t,isAutoDetach:r,renamedIds:n=new Map,info:o}){let{node:i,dependencies:a}=await ls(A,e);g(is(i),"Should be a generated node.");let s=A.tree.get(t?.getPrimaryId());g(!s||cA(s),"instance should be a code component.");let l=i.children.find(d=>d.id===i.baseVariantId);g(l&&Rj(l),"Unlink: Can't unlink a tree which doesn't have a Primary Variant node");let{identifiers:k,localIdsToExternalIdentifiers:c,externalModuleIdsToLocalIds:u}=ss(i,A.stores.modulesStore,a);if(await Cs(k.map(d=>d.value),A.stores.modulesStore),k.some(d=>{let f=iA.dataForIdentifier(d.value);return f?Ii(f):!1})){BA({type:"add",variant:"info",text:"Remove collection references before unlinking"});return}let E=await as(a.imports);return await ks(A,a,e),await A.stores.modulesStore.addExternalModulesToProject(k,{onTreeUpdate:()=>{let d=A.tree.current(s),f=kj(o.module.metadata.intrinsicWidth)??200,R=kj(o.module.metadata.intrinsicHeight)??200,_=An(A,i,l,"unlink",{enterIsolation:j,localIdsToExternalIdentifiers:c,externalModuleIdsToLocalIds:u,instance:d,renamedIds:n,isAutoDetach:r,intrinsicSize:{width:f,height:R},textStylePresets:E});return d&&wA(_)&&p7(A,d,_),_}})}async function P7(A,e){let j=await D7(A,e);if(!j)return;g(wA(j),"node should be a smart component");let{isAutoDetach:t}=e;return t||await A.stores.codeGenerationStore.untilCompiled(j.id),j.draftOrCurrent()}async function x7(A,e){let[j]=await A.stores.modulesStore.preloadExternalModules([e]);if(!j)return;let t=await D7(A,{identifier:e,enterIsolation:!1,info:j});g(tA(t),"node should be a web page");let{path:r,suggestedName:n}=z6(t.resolveValue("name")??"Page",A,t,!0);return A.scheduler.processWhenReady(()=>{A.tree.current(t)?.set({name:n,pagePath:r});let o=A.stores.scopeStore.active;R7(o)&&g7(A,o,t),A.stores.scopeStore.select(t.id,{keepHistory:!1})}),t}function v7(A,e,j,t){let r=An(A,e,j,"duplicate",{enterIsolation:!1,preferredName:t,insertionIndex:A.tree.root.children.findIndex(n=>n.id===e.id)+1});A.stores.persistedUserDefaults.newContentAsDraft&&r.set({isDraft:!0,duplicatedFrom:Ui(r.duplicatedFrom,e.id)}),A.stores.scopeStore.select(r.id,{keepHistory:!1})}async function og(A,e){let j=new Map,t=new Set(A.stores.scopeStore.getDesignPageNodes().map(a=>a.resolveValue("name")).filter(kA)),r=wj(e.resolveValue("name")??"Design",t),n=e.isLoaded()?e:await e.load();if(!n)return;let o=n.clone({name:r,children:[]});j.set(n.id,o.id);let i=[];for(let a of n.children){let s=ve(a,new Map,new Map,j,!1);i.push(s),j.set(a.id,s.id),o.addChild(s)}A.tree.insertNode(o,void 0,A.tree.root.children.findIndex(a=>a.id===e.id)+1);for(let a of i)zt(A.tree,a,j,!1);return qA("design_page_create",{pageId:o.id,source:"duplicate"}),o}function O7(A,e){let[j,...t]=e.stores.selectionStore.ids;if(!j||t.length)return null;let r=e.tree,n=r.getNode(j),o=!1;for(;!o&&n&&(o=ye(r,n,A,e.stores.scopeStore.active.id,iA),!o);)n=r.getParent(n.id);return n}var hj=".tsx";var cd=["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","Infinity","NaN","document","undefined","window"],ud=["toolbar"],dd=/^[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10140}-\u{10174}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{103D1}-\u{103D5}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AC0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{12000}-\u{12399}\u{12400}-\u{1246E}\u{12480}-\u{12543}\u{13000}-\u{1342E}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18AF2}\u{1B000}-\u{1B11E}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E2C0}-\u{1E2EB}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6D6}\u{2A700}-\u{2B734}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}]+/u,$d=/[\0-#%-/:-@[-^`{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08BE-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D04\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200C\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u220B\u220D-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FF0-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7C7-\uA7F6\uA828-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB68-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF\u{1000C}\u{10027}\u{1003B}\u{1003E}\u{1004E}\u{1004F}\u{1005E}-\u{1007F}\u{100FB}-\u{1013F}\u{10175}-\u{101FC}\u{101FE}-\u{1027F}\u{1029D}-\u{1029F}\u{102D1}-\u{102DF}\u{102E1}-\u{102FF}\u{10320}-\u{1032C}\u{1034B}-\u{1034F}\u{1037B}-\u{1037F}\u{1039E}\u{1039F}\u{103C4}-\u{103C7}\u{103D0}\u{103D6}-\u{103FF}\u{1049E}\u{1049F}\u{104AA}-\u{104AF}\u{104D4}-\u{104D7}\u{104FC}-\u{104FF}\u{10528}-\u{1052F}\u{10564}-\u{105FF}\u{10737}-\u{1073F}\u{10756}-\u{1075F}\u{10768}-\u{107FF}\u{10806}\u{10807}\u{10809}\u{10836}\u{10839}-\u{1083B}\u{1083D}\u{1083E}\u{10856}-\u{1085F}\u{10877}-\u{1087F}\u{1089F}-\u{108DF}\u{108F3}\u{108F6}-\u{108FF}\u{10916}-\u{1091F}\u{1093A}-\u{1097F}\u{109B8}-\u{109BD}\u{109C0}-\u{109FF}\u{10A04}\u{10A07}-\u{10A0B}\u{10A14}\u{10A18}\u{10A36}\u{10A37}\u{10A3B}-\u{10A3E}\u{10A40}-\u{10A5F}\u{10A7D}-\u{10A7F}\u{10A9D}-\u{10ABF}\u{10AC8}\u{10AE7}-\u{10AFF}\u{10B36}-\u{10B3F}\u{10B56}-\u{10B5F}\u{10B73}-\u{10B7F}\u{10B92}-\u{10BFF}\u{10C49}-\u{10C7F}\u{10CB3}-\u{10CBF}\u{10CF3}-\u{10CFF}\u{10D28}-\u{10D2F}\u{10D3A}-\u{10EFF}\u{10F1D}-\u{10F26}\u{10F28}-\u{10F2F}\u{10F51}-\u{10FDF}\u{10FF7}-\u{10FFF}\u{11047}-\u{11065}\u{11070}-\u{1107E}\u{110BB}-\u{110CF}\u{110E9}-\u{110EF}\u{110FA}-\u{110FF}\u{11135}\u{11140}-\u{11143}\u{11147}-\u{1114F}\u{11174}\u{11175}\u{11177}-\u{1117F}\u{111C5}-\u{111C8}\u{111CD}-\u{111CF}\u{111DB}\u{111DD}-\u{111FF}\u{11212}\u{11238}-\u{1123D}\u{1123F}-\u{1127F}\u{11287}\u{11289}\u{1128E}\u{1129E}\u{112A9}-\u{112AF}\u{112EB}-\u{112EF}\u{112FA}-\u{112FF}\u{11304}\u{1130D}\u{1130E}\u{11311}\u{11312}\u{11329}\u{11331}\u{11334}\u{1133A}\u{11345}\u{11346}\u{11349}\u{1134A}\u{1134E}\u{1134F}\u{11351}-\u{11356}\u{11358}-\u{1135C}\u{11364}\u{11365}\u{1136D}-\u{1136F}\u{11375}-\u{113FF}\u{1144B}-\u{1144F}\u{1145A}-\u{1145D}\u{11460}-\u{1147F}\u{114C6}\u{114C8}-\u{114CF}\u{114DA}-\u{1157F}\u{115B6}\u{115B7}\u{115C1}-\u{115D7}\u{115DE}-\u{115FF}\u{11641}-\u{11643}\u{11645}-\u{1164F}\u{1165A}-\u{1167F}\u{116B9}-\u{116BF}\u{116CA}-\u{116FF}\u{1171B}\u{1171C}\u{1172C}-\u{1172F}\u{1173A}-\u{117FF}\u{1183B}-\u{1189F}\u{118EA}-\u{118FE}\u{11900}-\u{1199F}\u{119A8}\u{119A9}\u{119D8}\u{119D9}\u{119E2}\u{119E5}-\u{119FF}\u{11A3F}-\u{11A46}\u{11A48}-\u{11A4F}\u{11A9A}-\u{11A9C}\u{11A9E}-\u{11ABF}\u{11AF9}-\u{11BFF}\u{11C09}\u{11C37}\u{11C41}-\u{11C4F}\u{11C5A}-\u{11C71}\u{11C90}\u{11C91}\u{11CA8}\u{11CB7}-\u{11CFF}\u{11D07}\u{11D0A}\u{11D37}-\u{11D39}\u{11D3B}\u{11D3E}\u{11D48}-\u{11D4F}\u{11D5A}-\u{11D5F}\u{11D66}\u{11D69}\u{11D8F}\u{11D92}\u{11D99}-\u{11D9F}\u{11DAA}-\u{11EDF}\u{11EF7}-\u{11FFF}\u{1239A}-\u{123FF}\u{1246F}-\u{1247F}\u{12544}-\u{12FFF}\u{1342F}-\u{143FF}\u{14647}-\u{167FF}\u{16A39}-\u{16A3F}\u{16A5F}\u{16A6A}-\u{16ACF}\u{16AEE}\u{16AEF}\u{16AF5}-\u{16AFF}\u{16B37}-\u{16B3F}\u{16B44}-\u{16B4F}\u{16B5A}-\u{16B62}\u{16B78}-\u{16B7C}\u{16B90}-\u{16E3F}\u{16E80}-\u{16EFF}\u{16F4B}-\u{16F4E}\u{16F88}-\u{16F8E}\u{16FA0}-\u{16FDF}\u{16FE2}\u{16FE4}-\u{16FFF}\u{187F8}-\u{187FF}\u{18AF3}-\u{1AFFF}\u{1B11F}-\u{1B14F}\u{1B153}-\u{1B163}\u{1B168}-\u{1B16F}\u{1B2FC}-\u{1BBFF}\u{1BC6B}-\u{1BC6F}\u{1BC7D}-\u{1BC7F}\u{1BC89}-\u{1BC8F}\u{1BC9A}-\u{1BC9C}\u{1BC9F}-\u{1D164}\u{1D16A}-\u{1D16C}\u{1D173}-\u{1D17A}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D241}\u{1D245}-\u{1D3FF}\u{1D455}\u{1D49D}\u{1D4A0}\u{1D4A1}\u{1D4A3}\u{1D4A4}\u{1D4A7}\u{1D4A8}\u{1D4AD}\u{1D4BA}\u{1D4BC}\u{1D4C4}\u{1D506}\u{1D50B}\u{1D50C}\u{1D515}\u{1D51D}\u{1D53A}\u{1D53F}\u{1D545}\u{1D547}-\u{1D549}\u{1D551}\u{1D6A6}\u{1D6A7}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CC}\u{1D7CD}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA9A}\u{1DAA0}\u{1DAB0}-\u{1DFFF}\u{1E007}\u{1E019}\u{1E01A}\u{1E022}\u{1E025}\u{1E02B}-\u{1E0FF}\u{1E12D}-\u{1E12F}\u{1E13E}\u{1E13F}\u{1E14A}-\u{1E14D}\u{1E14F}-\u{1E2BF}\u{1E2FA}-\u{1E7FF}\u{1E8C5}-\u{1E8CF}\u{1E8D7}-\u{1E8FF}\u{1E94C}-\u{1E94F}\u{1E95A}-\u{1EDFF}\u{1EE04}\u{1EE20}\u{1EE23}\u{1EE25}\u{1EE26}\u{1EE28}\u{1EE33}\u{1EE38}\u{1EE3A}\u{1EE3C}-\u{1EE41}\u{1EE43}-\u{1EE46}\u{1EE48}\u{1EE4A}\u{1EE4C}\u{1EE50}\u{1EE53}\u{1EE55}\u{1EE56}\u{1EE58}\u{1EE5A}\u{1EE5C}\u{1EE5E}\u{1EE60}\u{1EE63}\u{1EE65}\u{1EE66}\u{1EE6B}\u{1EE73}\u{1EE78}\u{1EE7D}\u{1EE7F}\u{1EE8A}\u{1EE9C}-\u{1EEA0}\u{1EEA4}\u{1EEAA}\u{1EEBC}-\u{1FFFF}\u{2A6D7}-\u{2A6FF}\u{2B735}-\u{2B73F}\u{2B81E}\u{2B81F}\u{2CEA2}-\u{2CEAF}\u{2EBE1}-\u{2F7FF}\u{2FA1E}-\u{E00FF}\u{E01F0}-\u{10FFFF}]+/gu,Ed=/^\.+$/u,cg=(A,e)=>{if(A===null||A.trim().length===0)return null;let j=1,t=A.replace(/_\d+$/u,""),r=A;for(;e.includes(r)||Bd(r);)r=`${t}_${j}`,j++;return r},Bd=A=>cd.includes(A)||window.hasOwnProperty(A)&&!ud.includes(A);function jn(A,e){if(!e)return null;let j=e.trim();if(j.length===0)return null;let t=A==="selector"?"_":"$";if(A==="directory"){if(Ed.test(j))return null}else dd.test(j)||(j=t+j);return j=j.replace($d,"_"),j=j.replace(/_+/gu,"_"),j=j.replace(/^\$_/u,t),j}function ae(A){return jn("variable",A)}function ug(A){let e=jn("selector",A);return e&&(e=e.replace(/^\$/gu,"_")),e}function T7(A){return jn("directory",A)}function w7(A){let j=ae(A)||"MyComponent",t=j+hj,r=pd(j);return{name:t,content:r}}function pd(A){return`// Get Started: https://www.framer.com/developers

import { addPropertyControls, ControlType } from "framer"
import { motion } from "framer-motion"

/**
 * @framerSupportedLayoutWidth auto
 * @framerSupportedLayoutHeight auto
 */
export default function ${A}(props) {
    const { tint } = props

    return (
        <motion.div
            style={{
                margin: 50,
                width: 100,
                height: 100,
                borderRadius: 25,
                backgroundColor: tint,
            }}
            animate={{ scale: 1.5 }}
            whileHover={{ rotate: 90 }}
        />
    )
}

addPropertyControls(${A}, {
    tint: {
        title: "Tint",
        type: ControlType.Color,
        defaultValue: "#09F",
    },
})
`}function md(A){return`import { forwardRef, type ComponentType } from "react"
import { createStore } from "https://framer.com/m/framer/store.js@^1.0.0"
import { randomColor } from "https://framer.com/m/framer/utils.js@^0.9.0"

// Learn more: https://www.framer.com/developers/overrides/

const useStore = createStore({
    background: "#0099FF",
})

export function withRotate(Component): ComponentType {
    return forwardRef((props, ref) => {
        return (
            <Component
                ref={ref}
                {...props}
                animate={{ rotate: 90 }}
                transition={{ duration: 2 }}
            />
        )
    })
}

export function withHover(Component): ComponentType {
    return forwardRef((props, ref) => {
        return <Component ref={ref} {...props} whileHover={{ scale: 1.05 }} />
    })
}

export function withRandomColor(Component): ComponentType {
    return forwardRef((props, ref) => {
        const [store, setStore] = useStore()

        return (
            <Component
                ref={ref}
                {...props}
                animate={{
                    background: store.background,
                }}
                onClick={() => {
                    setStore({ background: randomColor() })
                }}
            />
        )
    })
}
`}function q7(A){let j=ae(A)||"MyOverrides",t=j+hj,r=md(j);return{name:t,content:r}}function Ve(A){return A.endsWith(".json")?!0:/\.[tj]sx?$/u.test(A)}var fd=/^(?:[\w-]+\/)*[\w-]+(?:\.[\w-]+)*$/u;function bg(A){let{path:e}=N7(A);return fd.test(e)}function Gd(A,e){if(Ve(A))return A;let[j,t]=Rt(e);return t&&(t=`.${t}`),(!t||!Ve(t))&&(t=hj),A+t}function Sg(A){return Ve(A)||(A+=".tsx"),A}function Fd(A){let e=A.lastIndexOf("/");return e<0?"":A.slice(0,e)}function Rd(A){let e=A.lastIndexOf("/")+1;return A.slice(e)}function en(...A){let e="";return A.forEach(j=>{for(;j.startsWith("/");)j=j.slice(1);for(;j.endsWith("/");)j=j.slice(0,-1);j!==""&&(e!==""&&(e+="/"),e+=j)}),e}function N7(A,e=!0){A=A.trim();let[j,t]=Rt(Rd(A));t&&(t=`.${t}`);let r=Fd(A).split("/").map(i=>T7(i)).filter(i=>!!i).join("/"),n=ae(j)||"MyComponent";return(!Ve(t)||t===hj)&&e&&(n=oi(n)),{path:en(r,n+t),dirName:r,name:n,extension:t}}function _g(A,e="component",j=!0){A=A.trim();let{dirName:t,name:r,extension:n}=N7(A,j);if(Ve(n)&&n!==hj){let a=r+n;return{path:en(t,a),content:""}}let o=e==="component"?w7(r):q7(r),i=Gd(r+n,o.name);return{path:en(t,i),content:o.content}}function L7(A,e){if(!A.has(e))return e;let j=1,t,[r,n]=Rt(e);n&&(n=`.${n}`);do t=r+"_"+String(j++)+n;while(A.has(t));return t}function yg(A){return A==="typescript"||A==="javascript"}var se,Xe,le=class{constructor(e){this.limit=e;pj(this,se,0);pj(this,Xe,[])}async run(e,j){if(hA(this,se)===this.limit){let t=new Promise(r=>{hA(this,Xe).push(r)});j&&(t=Promise.race([t,gd(j)])),await t}J7(j),k6(this,se)._++;try{return await e()}finally{k6(this,se)._--,hA(this,Xe).shift()?.()}}};se=new WeakMap,Xe=new WeakMap;var K7=new WeakMap;function gd(A){let e=K7.get(A);return e||(J7(A),e=new Promise((j,t)=>{A.addEventListener("abort",()=>{t(A.reason)},{once:!0})}),K7.set(A,e)),e}function J7(A){if(A?.aborted)throw A.reason}function ze(A){let e=new Set;if(!A)return e;if(tA(A)&&Ci(A)){let j=H7(A.layoutTemplateIdentifier);j&&e.add(j)}for(let{node:j,skipChildren:t}of A.walkWithSkipChildren()){if(!cA(j))continue;if(yA(j)){t();continue}let r=H7(j.codeComponentIdentifier);r&&e.add(r)}return e}function H7(A){let e=eA(A);if(!(!e||!bA(e)))return Y({type:e.type,name:e.localIdName})}var Q7;(function(A){A[A.Static=1]="Static",A[A.Dynamic=2]="Dynamic",A[A.ImportMeta=3]="ImportMeta",A[A.StaticSourcePhase=4]="StaticSourcePhase",A[A.DynamicSourcePhase=5]="DynamicSourcePhase"})(Q7||(Q7={}));var Id=new Uint8Array(new Uint16Array([1]).buffer)[0]===1;function rn(A,e="@"){if(!jA)return nn.then(()=>rn(A));let j=A.length+1,t=(jA.__heap_base.value||jA.__heap_base)+4*j-jA.memory.buffer.byteLength;t>0&&jA.memory.grow(Math.ceil(t/65536));let r=jA.sa(j-1);if((Id?bd:hd)(A,new Uint16Array(jA.memory.buffer,r,j)),!jA.parse())throw Object.assign(new Error(`Parse error ${e}:${A.slice(0,jA.e()).split(`
`).length}:${jA.e()-A.lastIndexOf(`
`,jA.e()-1)}`),{idx:jA.e()});let n=[],o=[];for(;jA.ri();){let a=jA.is(),s=jA.ie(),l=jA.it(),k=jA.ai(),c=jA.id(),u=jA.ss(),$=jA.se(),E;jA.ip()&&(E=i(A.slice(c===-1?a-1:a,c===-1?s+1:s))),n.push({n:E,t:l,s:a,e:s,ss:u,se:$,d:c,a:k})}for(;jA.re();){let a=jA.es(),s=jA.ee(),l=jA.els(),k=jA.ele(),c=A.slice(a,s),u=c[0],$=l<0?void 0:A.slice(l,k),E=$?$[0]:"";o.push({s:a,e:s,ls:l,le:k,n:u==='"'||u==="'"?i(c):c,ln:E==='"'||E==="'"?i($):$})}function i(a){try{return(0,eval)(a)}catch{}}return[n,o,!!jA.f(),!!jA.ms()]}function hd(A,e){let j=A.length,t=0;for(;t<j;){let r=A.charCodeAt(t);e[t++]=(255&r)<<8|r>>>8}}function bd(A,e){let j=A.length,t=0;for(;t<j;)e[t]=A.charCodeAt(t++)}var jA,nn=WebAssembly.compile((tn="AGFzbQEAAAABKwhgAX8Bf2AEf39/fwBgAAF/YAAAYAF/AGADf39/AX9gAn9/AX9gA39/fwADMTAAAQECAgICAgICAgICAgICAgICAgIAAwMDBAQAAAUAAAAAAAMDAwAGAAAABwAGAgUEBQFwAQEBBQMBAAEGDwJ/AUHA8gALfwBBwPIACwd6FQZtZW1vcnkCAAJzYQAAAWUAAwJpcwAEAmllAAUCc3MABgJzZQAHAml0AAgCYWkACQJpZAAKAmlwAAsCZXMADAJlZQANA2VscwAOA2VsZQAPAnJpABACcmUAEQFmABICbXMAEwVwYXJzZQAUC19faGVhcF9iYXNlAwEKm0EwaAEBf0EAIAA2AoAKQQAoAtwJIgEgAEEBdGoiAEEAOwEAQQAgAEECaiIANgKECkEAIAA2AogKQQBBADYC4AlBAEEANgLwCUEAQQA2AugJQQBBADYC5AlBAEEANgL4CUEAQQA2AuwJIAEL0wEBA39BACgC8AkhBEEAQQAoAogKIgU2AvAJQQAgBDYC9AlBACAFQSRqNgKICiAEQSBqQeAJIAQbIAU2AgBBACgC1AkhBEEAKALQCSEGIAUgATYCACAFIAA2AgggBSACIAJBAmpBACAGIANGIgAbIAQgA0YiBBs2AgwgBSADNgIUIAVBADYCECAFIAI2AgQgBUEANgIgIAVBA0EBQQIgABsgBBs2AhwgBUEAKALQCSADRiICOgAYAkACQCACDQBBACgC1AkgA0cNAQtBAEEBOgCMCgsLXgEBf0EAKAL4CSIEQRBqQeQJIAQbQQAoAogKIgQ2AgBBACAENgL4CUEAIARBFGo2AogKQQBBAToAjAogBEEANgIQIAQgAzYCDCAEIAI2AgggBCABNgIEIAQgADYCAAsIAEEAKAKQCgsVAEEAKALoCSgCAEEAKALcCWtBAXULHgEBf0EAKALoCSgCBCIAQQAoAtwJa0EBdUF/IAAbCxUAQQAoAugJKAIIQQAoAtwJa0EBdQseAQF/QQAoAugJKAIMIgBBACgC3AlrQQF1QX8gABsLCwBBACgC6AkoAhwLHgEBf0EAKALoCSgCECIAQQAoAtwJa0EBdUF/IAAbCzsBAX8CQEEAKALoCSgCFCIAQQAoAtAJRw0AQX8PCwJAIABBACgC1AlHDQBBfg8LIABBACgC3AlrQQF1CwsAQQAoAugJLQAYCxUAQQAoAuwJKAIAQQAoAtwJa0EBdQsVAEEAKALsCSgCBEEAKALcCWtBAXULHgEBf0EAKALsCSgCCCIAQQAoAtwJa0EBdUF/IAAbCx4BAX9BACgC7AkoAgwiAEEAKALcCWtBAXVBfyAAGwslAQF/QQBBACgC6AkiAEEgakHgCSAAGygCACIANgLoCSAAQQBHCyUBAX9BAEEAKALsCSIAQRBqQeQJIAAbKAIAIgA2AuwJIABBAEcLCABBAC0AlAoLCABBAC0AjAoL3Q0BBX8jAEGA0ABrIgAkAEEAQQE6AJQKQQBBACgC2Ak2ApwKQQBBACgC3AlBfmoiATYCsApBACABQQAoAoAKQQF0aiICNgK0CkEAQQA6AIwKQQBBADsBlgpBAEEAOwGYCkEAQQA6AKAKQQBBADYCkApBAEEAOgD8CUEAIABBgBBqNgKkCkEAIAA2AqgKQQBBADoArAoCQAJAAkACQANAQQAgAUECaiIDNgKwCiABIAJPDQECQCADLwEAIgJBd2pBBUkNAAJAAkACQAJAAkAgAkGbf2oOBQEICAgCAAsgAkEgRg0EIAJBL0YNAyACQTtGDQIMBwtBAC8BmAoNASADEBVFDQEgAUEEakGCCEEKEC8NARAWQQAtAJQKDQFBAEEAKAKwCiIBNgKcCgwHCyADEBVFDQAgAUEEakGMCEEKEC8NABAXC0EAQQAoArAKNgKcCgwBCwJAIAEvAQQiA0EqRg0AIANBL0cNBBAYDAELQQEQGQtBACgCtAohAkEAKAKwCiEBDAALC0EAIQIgAyEBQQAtAPwJDQIMAQtBACABNgKwCkEAQQA6AJQKCwNAQQAgAUECaiIDNgKwCgJAAkACQAJAAkACQAJAIAFBACgCtApPDQAgAy8BACICQXdqQQVJDQYCQAJAAkACQAJAAkACQAJAAkACQCACQWBqDgoQDwYPDw8PBQECAAsCQAJAAkACQCACQaB/ag4KCxISAxIBEhISAgALIAJBhX9qDgMFEQYJC0EALwGYCg0QIAMQFUUNECABQQRqQYIIQQoQLw0QEBYMEAsgAxAVRQ0PIAFBBGpBjAhBChAvDQ8QFwwPCyADEBVFDQ4gASkABELsgISDsI7AOVINDiABLwEMIgNBd2oiAUEXSw0MQQEgAXRBn4CABHFFDQwMDQtBAEEALwGYCiIBQQFqOwGYCkEAKAKkCiABQQN0aiIBQQE2AgAgAUEAKAKcCjYCBAwNC0EALwGYCiIDRQ0JQQAgA0F/aiIDOwGYCkEALwGWCiICRQ0MQQAoAqQKIANB//8DcUEDdGooAgBBBUcNDAJAIAJBAnRBACgCqApqQXxqKAIAIgMoAgQNACADQQAoApwKQQJqNgIEC0EAIAJBf2o7AZYKIAMgAUEEajYCDAwMCwJAQQAoApwKIgEvAQBBKUcNAEEAKALwCSIDRQ0AIAMoAgQgAUcNAEEAQQAoAvQJIgM2AvAJAkAgA0UNACADQQA2AiAMAQtBAEEANgLgCQtBAEEALwGYCiIDQQFqOwGYCkEAKAKkCiADQQN0aiIDQQZBAkEALQCsChs2AgAgAyABNgIEQQBBADoArAoMCwtBAC8BmAoiAUUNB0EAIAFBf2oiATsBmApBACgCpAogAUH//wNxQQN0aigCAEEERg0EDAoLQScQGgwJC0EiEBoMCAsgAkEvRw0HAkACQCABLwEEIgFBKkYNACABQS9HDQEQGAwKC0EBEBkMCQsCQAJAAkACQEEAKAKcCiIBLwEAIgMQG0UNAAJAAkAgA0FVag4EAAkBAwkLIAFBfmovAQBBK0YNAwwICyABQX5qLwEAQS1GDQIMBwsgA0EpRw0BQQAoAqQKQQAvAZgKIgJBA3RqKAIEEBxFDQIMBgsgAUF+ai8BAEFQakH//wNxQQpPDQULQQAvAZgKIQILAkACQCACQf//A3EiAkUNACADQeYARw0AQQAoAqQKIAJBf2pBA3RqIgQoAgBBAUcNACABQX5qLwEAQe8ARw0BIAQoAgRBlghBAxAdRQ0BDAULIANB/QBHDQBBACgCpAogAkEDdGoiAigCBBAeDQQgAigCAEEGRg0ECyABEB8NAyADRQ0DIANBL0ZBAC0AoApBAEdxDQMCQEEAKAL4CSICRQ0AIAEgAigCAEkNACABIAIoAgRNDQQLIAFBfmohAUEAKALcCSECAkADQCABQQJqIgQgAk0NAUEAIAE2ApwKIAEvAQAhAyABQX5qIgQhASADECBFDQALIARBAmohBAsCQCADQf//A3EQIUUNACAEQX5qIQECQANAIAFBAmoiAyACTQ0BQQAgATYCnAogAS8BACEDIAFBfmoiBCEBIAMQIQ0ACyAEQQJqIQMLIAMQIg0EC0EAQQE6AKAKDAcLQQAoAqQKQQAvAZgKIgFBA3QiA2pBACgCnAo2AgRBACABQQFqOwGYCkEAKAKkCiADakEDNgIACxAjDAULQQAtAPwJQQAvAZYKQQAvAZgKcnJFIQIMBwsQJEEAQQA6AKAKDAMLECVBACECDAULIANBoAFHDQELQQBBAToArAoLQQBBACgCsAo2ApwKC0EAKAKwCiEBDAALCyAAQYDQAGokACACCxoAAkBBACgC3AkgAEcNAEEBDwsgAEF+ahAmC/4KAQZ/QQBBACgCsAoiAEEMaiIBNgKwCkEAKAL4CSECQQEQKSEDAkACQAJAAkACQAJAAkACQAJAQQAoArAKIgQgAUcNACADEChFDQELAkACQAJAAkACQAJAAkAgA0EqRg0AIANB+wBHDQFBACAEQQJqNgKwCkEBECkhA0EAKAKwCiEEA0ACQAJAIANB//8DcSIDQSJGDQAgA0EnRg0AIAMQLBpBACgCsAohAwwBCyADEBpBAEEAKAKwCkECaiIDNgKwCgtBARApGgJAIAQgAxAtIgNBLEcNAEEAQQAoArAKQQJqNgKwCkEBECkhAwsgA0H9AEYNA0EAKAKwCiIFIARGDQ8gBSEEIAVBACgCtApNDQAMDwsLQQAgBEECajYCsApBARApGkEAKAKwCiIDIAMQLRoMAgtBAEEAOgCUCgJAAkACQAJAAkACQCADQZ9/ag4MAgsEAQsDCwsLCwsFAAsgA0H2AEYNBAwKC0EAIARBDmoiAzYCsAoCQAJAAkBBARApQZ9/ag4GABICEhIBEgtBACgCsAoiBSkAAkLzgOSD4I3AMVINESAFLwEKECFFDRFBACAFQQpqNgKwCkEAECkaC0EAKAKwCiIFQQJqQbIIQQ4QLw0QIAUvARAiAkF3aiIBQRdLDQ1BASABdEGfgIAEcUUNDQwOC0EAKAKwCiIFKQACQuyAhIOwjsA5Ug0PIAUvAQoiAkF3aiIBQRdNDQYMCgtBACAEQQpqNgKwCkEAECkaQQAoArAKIQQLQQAgBEEQajYCsAoCQEEBECkiBEEqRw0AQQBBACgCsApBAmo2ArAKQQEQKSEEC0EAKAKwCiEDIAQQLBogA0EAKAKwCiIEIAMgBBACQQBBACgCsApBfmo2ArAKDwsCQCAEKQACQuyAhIOwjsA5Ug0AIAQvAQoQIEUNAEEAIARBCmo2ArAKQQEQKSEEQQAoArAKIQMgBBAsGiADQQAoArAKIgQgAyAEEAJBAEEAKAKwCkF+ajYCsAoPC0EAIARBBGoiBDYCsAoLQQAgBEEGajYCsApBAEEAOgCUCkEBECkhBEEAKAKwCiEDIAQQLCEEQQAoArAKIQIgBEHf/wNxIgFB2wBHDQNBACACQQJqNgKwCkEBECkhBUEAKAKwCiEDQQAhBAwEC0EAQQE6AIwKQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0AQQAgA0EIajYCsAogAEEBEClBABArIAJBEGpB5AkgAhshAwNAIAMoAgAiA0UNBSADQgA3AgggA0EQaiEDDAALC0EAIANBfmo2ArAKDAMLQQEgAXRBn4CABHFFDQMMBAtBASEECwNAAkACQCAEDgIAAQELIAVB//8DcRAsGkEBIQQMAQsCQAJAQQAoArAKIgQgA0YNACADIAQgAyAEEAJBARApIQQCQCABQdsARw0AIARBIHJB/QBGDQQLQQAoArAKIQMCQCAEQSxHDQBBACADQQJqNgKwCkEBECkhBUEAKAKwCiEDIAVBIHJB+wBHDQILQQAgA0F+ajYCsAoLIAFB2wBHDQJBACACQX5qNgKwCg8LQQAhBAwACwsPCyACQaABRg0AIAJB+wBHDQQLQQAgBUEKajYCsApBARApIgVB+wBGDQMMAgsCQCACQVhqDgMBAwEACyACQaABRw0CC0EAIAVBEGo2ArAKAkBBARApIgVBKkcNAEEAQQAoArAKQQJqNgKwCkEBECkhBQsgBUEoRg0BC0EAKAKwCiEBIAUQLBpBACgCsAoiBSABTQ0AIAQgAyABIAUQAkEAQQAoArAKQX5qNgKwCg8LIAQgA0EAQQAQAkEAIARBDGo2ArAKDwsQJQvcCAEGf0EAIQBBAEEAKAKwCiIBQQxqIgI2ArAKQQEQKSEDQQAoArAKIQQCQAJAAkACQAJAAkACQAJAIANBLkcNAEEAIARBAmo2ArAKAkBBARApIgNB8wBGDQAgA0HtAEcNB0EAKAKwCiIDQQJqQZwIQQYQLw0HAkBBACgCnAoiBBAqDQAgBC8BAEEuRg0ICyABIAEgA0EIakEAKALUCRABDwtBACgCsAoiA0ECakGiCEEKEC8NBgJAQQAoApwKIgQQKg0AIAQvAQBBLkYNBwsgA0EMaiEDDAELIANB8wBHDQEgBCACTQ0BQQYhAEEAIQIgBEECakGiCEEKEC8NAiAEQQxqIQMCQCAELwEMIgVBd2oiBEEXSw0AQQEgBHRBn4CABHENAQsgBUGgAUcNAgtBACADNgKwCkEBIQBBARApIQMLAkACQAJAAkAgA0H7AEYNACADQShHDQFBACgCpApBAC8BmAoiA0EDdGoiBEEAKAKwCjYCBEEAIANBAWo7AZgKIARBBTYCAEEAKAKcCi8BAEEuRg0HQQBBACgCsAoiBEECajYCsApBARApIQMgAUEAKAKwCkEAIAQQAQJAAkAgAA0AQQAoAvAJIQQMAQtBACgC8AkiBEEFNgIcC0EAQQAvAZYKIgBBAWo7AZYKQQAoAqgKIABBAnRqIAQ2AgACQCADQSJGDQAgA0EnRg0AQQBBACgCsApBfmo2ArAKDwsgAxAaQQBBACgCsApBAmoiAzYCsAoCQAJAAkBBARApQVdqDgQBAgIAAgtBAEEAKAKwCkECajYCsApBARApGkEAKALwCSIEIAM2AgQgBEEBOgAYIARBACgCsAoiAzYCEEEAIANBfmo2ArAKDwtBACgC8AkiBCADNgIEIARBAToAGEEAQQAvAZgKQX9qOwGYCiAEQQAoArAKQQJqNgIMQQBBAC8BlgpBf2o7AZYKDwtBAEEAKAKwCkF+ajYCsAoPCyAADQJBACgCsAohA0EALwGYCg0BA0ACQAJAAkAgA0EAKAK0Ck8NAEEBECkiA0EiRg0BIANBJ0YNASADQf0ARw0CQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0JC0EAIANBCGo2ArAKAkBBARApIgNBIkYNACADQSdHDQkLIAEgA0EAECsPCyADEBoLQQBBACgCsApBAmoiAzYCsAoMAAsLIAANAUEGIQBBACECAkAgA0FZag4EBAMDBAALIANBIkYNAwwCC0EAIANBfmo2ArAKDwtBDCEAQQEhAgtBACgCsAoiAyABIABBAXRqRw0AQQAgA0F+ajYCsAoPC0EALwGYCg0CQQAoArAKIQNBACgCtAohAANAIAMgAE8NAQJAAkAgAy8BACIEQSdGDQAgBEEiRw0BCyABIAQgAhArDwtBACADQQJqIgM2ArAKDAALCxAlCw8LQQBBACgCsApBfmo2ArAKC0cBA39BACgCsApBAmohAEEAKAK0CiEBAkADQCAAIgJBfmogAU8NASACQQJqIQAgAi8BAEF2ag4EAQAAAQALC0EAIAI2ArAKC5gBAQN/QQBBACgCsAoiAUECajYCsAogAUEGaiEBQQAoArQKIQIDQAJAAkACQCABQXxqIAJPDQAgAUF+ai8BACEDAkACQCAADQAgA0EqRg0BIANBdmoOBAIEBAIECyADQSpHDQMLIAEvAQBBL0cNAkEAIAFBfmo2ArAKDAELIAFBfmohAQtBACABNgKwCg8LIAFBAmohAQwACwuIAQEEf0EAKAKwCiEBQQAoArQKIQICQAJAA0AgASIDQQJqIQEgAyACTw0BIAEvAQAiBCAARg0CAkAgBEHcAEYNACAEQXZqDgQCAQECAQsgA0EEaiEBIAMvAQRBDUcNACADQQZqIAEgAy8BBkEKRhshAQwACwtBACABNgKwChAlDwtBACABNgKwCgtsAQF/AkACQCAAQV9qIgFBBUsNAEEBIAF0QTFxDQELIABBRmpB//8DcUEGSQ0AIABBKUcgAEFYakH//wNxQQdJcQ0AAkAgAEGlf2oOBAEAAAEACyAAQf0ARyAAQYV/akH//wNxQQRJcQ8LQQELLgEBf0EBIQECQCAAQaYJQQUQHQ0AIABBlghBAxAdDQAgAEGwCUECEB0hAQsgAQtGAQN/QQAhAwJAIAAgAkEBdCICayIEQQJqIgBBACgC3AkiBUkNACAAIAEgAhAvDQACQCAAIAVHDQBBAQ8LIAQQJiEDCyADC4MBAQJ/QQEhAQJAAkACQAJAAkACQCAALwEAIgJBRWoOBAUEBAEACwJAIAJBm39qDgQDBAQCAAsgAkEpRg0EIAJB+QBHDQMgAEF+akG8CUEGEB0PCyAAQX5qLwEAQT1GDwsgAEF+akG0CUEEEB0PCyAAQX5qQcgJQQMQHQ8LQQAhAQsgAQu0AwECf0EAIQECQAJAAkACQAJAAkACQAJAAkACQCAALwEAQZx/ag4UAAECCQkJCQMJCQQFCQkGCQcJCQgJCwJAAkAgAEF+ai8BAEGXf2oOBAAKCgEKCyAAQXxqQcoIQQIQHQ8LIABBfGpBzghBAxAdDwsCQAJAAkAgAEF+ai8BAEGNf2oOAwABAgoLAkAgAEF8ai8BACICQeEARg0AIAJB7ABHDQogAEF6akHlABAnDwsgAEF6akHjABAnDwsgAEF8akHUCEEEEB0PCyAAQXxqQdwIQQYQHQ8LIABBfmovAQBB7wBHDQYgAEF8ai8BAEHlAEcNBgJAIABBemovAQAiAkHwAEYNACACQeMARw0HIABBeGpB6AhBBhAdDwsgAEF4akH0CEECEB0PCyAAQX5qQfgIQQQQHQ8LQQEhASAAQX5qIgBB6QAQJw0EIABBgAlBBRAdDwsgAEF+akHkABAnDwsgAEF+akGKCUEHEB0PCyAAQX5qQZgJQQQQHQ8LAkAgAEF+ai8BACICQe8ARg0AIAJB5QBHDQEgAEF8akHuABAnDwsgAEF8akGgCUEDEB0hAQsgAQs0AQF/QQEhAQJAIABBd2pB//8DcUEFSQ0AIABBgAFyQaABRg0AIABBLkcgABAocSEBCyABCzABAX8CQAJAIABBd2oiAUEXSw0AQQEgAXRBjYCABHENAQsgAEGgAUYNAEEADwtBAQtOAQJ/QQAhAQJAAkAgAC8BACICQeUARg0AIAJB6wBHDQEgAEF+akH4CEEEEB0PCyAAQX5qLwEAQfUARw0AIABBfGpB3AhBBhAdIQELIAEL3gEBBH9BACgCsAohAEEAKAK0CiEBAkACQAJAA0AgACICQQJqIQAgAiABTw0BAkACQAJAIAAvAQAiA0Gkf2oOBQIDAwMBAAsgA0EkRw0CIAIvAQRB+wBHDQJBACACQQRqIgA2ArAKQQBBAC8BmAoiAkEBajsBmApBACgCpAogAkEDdGoiAkEENgIAIAIgADYCBA8LQQAgADYCsApBAEEALwGYCkF/aiIAOwGYCkEAKAKkCiAAQf//A3FBA3RqKAIAQQNHDQMMBAsgAkEEaiEADAALC0EAIAA2ArAKCxAlCwtwAQJ/AkACQANAQQBBACgCsAoiAEECaiIBNgKwCiAAQQAoArQKTw0BAkACQAJAIAEvAQAiAUGlf2oOAgECAAsCQCABQXZqDgQEAwMEAAsgAUEvRw0CDAQLEC4aDAELQQAgAEEEajYCsAoMAAsLECULCzUBAX9BAEEBOgD8CUEAKAKwCiEAQQBBACgCtApBAmo2ArAKQQAgAEEAKALcCWtBAXU2ApAKC0MBAn9BASEBAkAgAC8BACICQXdqQf//A3FBBUkNACACQYABckGgAUYNAEEAIQEgAhAoRQ0AIAJBLkcgABAqcg8LIAELPQECf0EAIQICQEEAKALcCSIDIABLDQAgAC8BACABRw0AAkAgAyAARw0AQQEPCyAAQX5qLwEAECAhAgsgAgtoAQJ/QQEhAQJAAkAgAEFfaiICQQVLDQBBASACdEExcQ0BCyAAQfj/A3FBKEYNACAAQUZqQf//A3FBBkkNAAJAIABBpX9qIgJBA0sNACACQQFHDQELIABBhX9qQf//A3FBBEkhAQsgAQucAQEDf0EAKAKwCiEBAkADQAJAAkAgAS8BACICQS9HDQACQCABLwECIgFBKkYNACABQS9HDQQQGAwCCyAAEBkMAQsCQAJAIABFDQAgAkF3aiIBQRdLDQFBASABdEGfgIAEcUUNAQwCCyACECFFDQMMAQsgAkGgAUcNAgtBAEEAKAKwCiIDQQJqIgE2ArAKIANBACgCtApJDQALCyACCzEBAX9BACEBAkAgAC8BAEEuRw0AIABBfmovAQBBLkcNACAAQXxqLwEAQS5GIQELIAELnAQBAX8CQCABQSJGDQAgAUEnRg0AECUPC0EAKAKwCiEDIAEQGiAAIANBAmpBACgCsApBACgC0AkQAQJAIAJFDQBBACgC8AlBBDYCHAtBAEEAKAKwCkECajYCsAoCQAJAAkACQEEAECkiAUHhAEYNACABQfcARg0BQQAoArAKIQEMAgtBACgCsAoiAUECakHACEEKEC8NAUEGIQAMAgtBACgCsAoiAS8BAkHpAEcNACABLwEEQfQARw0AQQQhACABLwEGQegARg0BC0EAIAFBfmo2ArAKDwtBACABIABBAXRqNgKwCgJAQQEQKUH7AEYNAEEAIAE2ArAKDwtBACgCsAoiAiEAA0BBACAAQQJqNgKwCgJAAkACQEEBECkiAEEiRg0AIABBJ0cNAUEnEBpBAEEAKAKwCkECajYCsApBARApIQAMAgtBIhAaQQBBACgCsApBAmo2ArAKQQEQKSEADAELIAAQLCEACwJAIABBOkYNAEEAIAE2ArAKDwtBAEEAKAKwCkECajYCsAoCQEEBECkiAEEiRg0AIABBJ0YNAEEAIAE2ArAKDwsgABAaQQBBACgCsApBAmo2ArAKAkACQEEBECkiAEEsRg0AIABB/QBGDQFBACABNgKwCg8LQQBBACgCsApBAmo2ArAKQQEQKUH9AEYNAEEAKAKwCiEADAELC0EAKALwCSIBIAI2AhAgAUEAKAKwCkECajYCDAttAQJ/AkACQANAAkAgAEH//wNxIgFBd2oiAkEXSw0AQQEgAnRBn4CABHENAgsgAUGgAUYNASAAIQIgARAoDQJBACECQQBBACgCsAoiAEECajYCsAogAC8BAiIADQAMAgsLIAAhAgsgAkH//wNxC6sBAQR/AkACQEEAKAKwCiICLwEAIgNB4QBGDQAgASEEIAAhBQwBC0EAIAJBBGo2ArAKQQEQKSECQQAoArAKIQUCQAJAIAJBIkYNACACQSdGDQAgAhAsGkEAKAKwCiEEDAELIAIQGkEAQQAoArAKQQJqIgQ2ArAKC0EBECkhA0EAKAKwCiECCwJAIAIgBUYNACAFIARBACAAIAAgAUYiAhtBACABIAIbEAILIAMLcgEEf0EAKAKwCiEAQQAoArQKIQECQAJAA0AgAEECaiECIAAgAU8NAQJAAkAgAi8BACIDQaR/ag4CAQQACyACIQAgA0F2ag4EAgEBAgELIABBBGohAAwACwtBACACNgKwChAlQQAPC0EAIAI2ArAKQd0AC0kBA39BACEDAkAgAkUNAAJAA0AgAC0AACIEIAEtAAAiBUcNASABQQFqIQEgAEEBaiEAIAJBf2oiAg0ADAILCyAEIAVrIQMLIAMLC+wBAgBBgAgLzgEAAHgAcABvAHIAdABtAHAAbwByAHQAZgBvAHIAZQB0AGEAbwB1AHIAYwBlAHIAbwBtAHUAbgBjAHQAaQBvAG4AcwBzAGUAcgB0AHYAbwB5AGkAZQBkAGUAbABlAGMAbwBuAHQAaQBuAGkAbgBzAHQAYQBuAHQAeQBiAHIAZQBhAHIAZQB0AHUAcgBkAGUAYgB1AGcAZwBlAGEAdwBhAGkAdABoAHIAdwBoAGkAbABlAGkAZgBjAGEAdABjAGYAaQBuAGEAbABsAGUAbABzAABB0AkLEAEAAAACAAAAAAQAAEA5AAA=",typeof Buffer<"u"?Buffer.from(tn,"base64"):Uint8Array.from(atob(tn),A=>A.charCodeAt(0)))).then(WebAssembly.instantiate).then(({exports:A})=>{jA=A}),tn;function on(A){return A!==void 0?{ok:!0,value:A}:{ok:!0}}function an(A){return{ok:!1,error:A}}function U7(A){return A.then(e=>on(e),e=>an(e))}var Sd=/^\s*(['"](\..*)['"])\s*$/mu,We=class extends Error{constructor(j){super();this.persistedMissingRelativeImports=j;this.name="RewriteRelativeImportsError"}};function ur(A){return A instanceof We}async function dr(A,e){await nn;let[j]=rn(A),t=A,r=new Set,n=[...j].reverse();for(let{s:o,e:i,d:a}of n){if(a===-2)continue;if(a===-1){let m=A.substring(o,i);if(!m.startsWith("."))continue;let d=e[m];d===void 0&&(r.add(m),d=X7(m)),t=V7(t,d,o,i);continue}let s=A.substring(o,i),k=s.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1").trim().match(Sd);if(!k)continue;let c=k[1],u=k[2];if(c===void 0||u===void 0)continue;let $=e[u];$===void 0&&(r.add(u),$=X7(u));let E=s.replace(new RegExp(sn(c),"g"),JSON.stringify($));t=V7(t,E,o,i)}return r.size>0?an({partiallyProcessedCode:t,unresolvedRelativeImports:r,parsedImports:j}):on(t)}function V7(A,e,j,t){return A.slice(0,j)+e+A.slice(t)}function sn(A){return A.replace(/[.*+\-?^${}()|[\]\\]/gu,"\\$&")}function X7(A){return`!missing/${A}`}var O=zA("modules-storage"),_d="kit",W7=Object.freeze({}),Y7=Object.freeze({});function SI(A){return A&&A.type==="codeFile"?(g(kA(A.sourceContent),"code module entry is missing source content"),!0):!1}function ln(A){return A.name===$6&&A.type===zo}function yd(A){return A.id===aj}function Z7(A,e){return!!A&&A.saveId===e.saveId&&A.id===e.moduleId}var $r=class extends Error{constructor(){super("A circular dependency was detected."),this.name="CircularDependencyError"}},Ye="update-modules-storage",Cd=0;async function sA(A){let e=performance.now(),j=`acquire-modules-storage-lock-${Cd++}`;return Te(j),v6.request(Ye,()=>{let t=performance.now()-e;return Wt(`\u{1F513} Acquire ${Ye} lock`,j),Yt(j),O.debug("\u{1F513} Acquired the",Ye,"lock in",t.toFixed(2),"ms"),t>1e3&&O.warn("\u2757 Long wait: it took",t.toFixed(0),"ms to acquire the",Ye,"lock."),A()})}var Er=class{constructor(e,j,t,r){this.storage=e;this.localId=j;this.type=t;this.debugModuleStoreAndComponentLoaderRevisionsMatch=r}get id(){let e=this.storage.getPersistedModuleByLocalId(this.localId);if(e)return e.id;let j=this.storage.getModuleTreeData(this.localId);return g(j,"Module must exist"),j.moduleId}get saveId(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.saveId;let j=this.storage.getPersistedModuleByLocalId(this.localId);return g(j,"Module must exist"),j.saveId}get transientSVGIcon(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.svgIcon}get lastPublish(){return this.storage.getPersistedModuleByLocalId(this.localId)?.lastPublish??null}externalModuleIdentifier(e="default"){let j=this.storage.getTransientSaveByLocalId(this.localId);if(j){let r=OA(j.name);return YA(this.id,j.saveId,r.module,e)}let t=this.storage.getPersistedModuleByLocalId(this.localId);return g(t?.files.module,"ModulesStorage: Expected module typed file in persisted module."),YA(this.id,t.saveId,t.files.module,e)}delete(){return this.storage.delete(this.localId)}publish(e,j,t){return this.storage.publish(this.localId,{namespace:e,name:j,version:t})}sourceRevision(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.sourceRevision;let j=this.storage.getPersistedModuleByLocalId(this.localId);if(j)return dn(j)}annotations(e,j){let t=this.storage.getTransientSaveByLocalId(this.localId),r=t?.annotations?re(t.annotations):this.storage.getModuleTreeData(this.localId)?.annotations;return e&&this.debugModuleStoreAndComponentLoaderRevisionsMatch()&&Md(r,e),j?r?.[j]:r}},cn=class extends Er{constructor(j,t,r,n,o){super(j,t,r,n);this.name=o}currentSourceEquals(j,t){let r=this.storage.getPersistedModuleByLocalId(this.localId);return!r||r.submodules.length||t.submodules?.size?!1:r.sourceContent===j}updateSource(j,t={}){return this.storage.updateSources([{localId:this.localId,source:j,options:{...t,stableName:!0}}])}persist(j){return this.storage.upsert(this.localId,{...j,type:this.type,name:this.name})}getKitSectionsStructure(){let j=this.storage.getTransientSaveByLocalId(this.localId);return j?j.kitSectionsStructure:this.storage.getKitSectionsStructure(this.name)}};function Md(A,e){if(!A)return;let j=eA(e.identifier);g(bA(j)&&WA(j),"Entity must have an identifier."),e.annotations&&j.exportSpecifier in A&&!ji(A[j.exportSpecifier],re({default:e.annotations}).default,!0)&&O.reportError("Static annotations are not synchronized with runtime annotations.",{identifier:e.identifier})}function dn(A){let e=A?.metadata.sourceRevision;return TA(e)?e:void 0}var un=class extends Er{updateSource(e,j){return this.storage.updateSources([{localId:this.localId,source:e,options:j??{}}])}persist(e){return this.storage.update(this.localId,e)}rename(e){return this.storage.rename(this.localId,e)}},Br=class{constructor(e,j,t=()=>!0){this.storage=e;this.type=j;this.moduleStoreAndComponentLoaderRevisionsMatch=t}async create(e){return this.storage.create({...e,type:this.type})}getByStableName(e){return new cn(this.storage,d6(this.type,e),this.type,this.moduleStoreAndComponentLoaderRevisionsMatch,e)}getByLocalId(e){return new un(this.storage,e,this.type,this.moduleStoreAndComponentLoaderRevisionsMatch)}getUniqueName(e){return this.storage.getUniqueNameForType(this.type,e)}},pr=class{constructor(e,j,t,r,n,o,i,a){this.getModulesService=e;this.compile=j;this.process=t;this.processWhenReady=r;this.runWhenIdle=n;this.treeStore=o;this.getActiveScope=i;this.makeDocumentReadOnly=a;K(this,"useTreeAsLocalModuleList",!1);K(this,"writeLocalModulesToTree",!1);K(this,"dependenciesModule");K(this,"persistedModules",new Map);K(this,"persistedLocalIdsByTypeSlashNameCache",new WeakMap);K(this,"transientSaves",new Map);K(this,"lastSnapshot",{dependenciesModule:void 0,modules:new Map,depsGraph:{},initialized:!1});K(this,"modulesService");K(this,"lazyServerModulesForTransientSaves",new Map);K(this,"backgroundJob",null);K(this,"backgroundAbortController",null);K(this,"initialized",!1);K(this,"initializationStarted",!1);K(this,"readOnlyTree",!1);K(this,"resolveInitialization",()=>{throw new Error("initializationPromise has not executed yet")});K(this,"rejectInitialization",()=>{throw new Error("initializationPromise has not executed yet")});K(this,"initializationPromise",new Promise((e,j)=>{this.resolveInitialization=e,this.rejectInitialization=j}));K(this,"didSetupModuleEventStream",!1);K(this,"transientInfo",null);K(this,"previousLocalModuleNodes",[]);K(this,"treeNodesToUpdate",new Map);K(this,"treeNodesToDelete",[]);K(this,"goingToStartUsingLocalModulesInTree",!1);K(this,"listeners",new Set);K(this,"transientSaveRetries",new Map);K(this,"transientSaveRelativeImportRetries",new Set);K(this,"downloadQueue",new le(1200))}hasPendingServerModules(){return this.lazyServerModulesForTransientSaves.size>0}processOnePendingServerModule(){return this.lazyServerModulesForTransientSaves.size===0?Promise.resolve(!1):sA(async()=>{for(let[,e]of this.lazyServerModulesForTransientSaves)for(let j of e){let t=this.persistedModules.get(j)?.localId;if(!t)continue;let r=this.persistedModules.get(t);if(r?.kind!=="server")continue;O.debug("\u{1F343} Process one server \u2192 local module",j);let n=await this.createLocalModuleFromModule(r),o=pA(this.persistedModules,i=>{i.set(r.localId,n)});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:o,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1,transientSaves:this.transientSaves}),!0}return!1})}async changeScope(e){if(!this.hasPendingServerModules())return;let j=ze(e);!j||j.size===0||(await sA(async()=>{let t=new Set,r=this.lastSnapshot.depsGraph;for(let[a,s]of this.lazyServerModulesForTransientSaves)qj(r,a,s,j,t);let n=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&n.push(this.createLocalModuleFromModule(s))}if(O.debug("\u{1F343} Prioritizing making visible modules local after changing scope:",e.id,"/ Visible:",j,"/ Visible Dependencies:",t,"/ Server modules:",n.length),n.length===0)return;let o=await Promise.all(n),i=pA(this.persistedModules,a=>{for(let s of o)a.set(s.localId,s)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,depsGraph:r,didRemoteChange:!1,transientSaves:this.transientSaves})}),this.makeLazyServerModulesLocalWhenIdle().catch(lA))}async makeVisibleDependentServerModulesLocal(e){if(!vj.isOn("prioritizedModuleEvaluation"))return;let j=this.getActiveScope(),t=new Set,r=ze(j),n=new Set;for(let a of e){let s=this.typeAndNameFromLocalId(a.localId,a.options.stableName),l=Y(s),k=this.lastSnapshot.depsGraph;qj(k,l,n,r,t),this.lazyServerModulesForTransientSaves.set(l,n),t.delete(l)}let o=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&o.push(this.createLocalModuleFromModule(s))}O.debug("\u{1F343} Prioritizing dependent server modules after updating:",e.map(a=>a.localId),"/ Visible:",t,"/ Lazy:",n,"/ Server modules:",o.length);let i=this.persistedModules;if(o.length>0){let a=await Promise.all(o);i=pA(i,s=>{for(let l of a)s.set(l.localId,l)})}this.persistedModules=i}async makeLazyServerModulesLocalWhenIdle(){this.cancelBackgroundJob(),this.backgroundAbortController=new AbortController;let{signal:e}=this.backgroundAbortController;return this.backgroundJob=(async()=>{try{for(;this.hasPendingServerModules()&&!e.aborted;){let j=new Zo;if(this.runWhenIdle(()=>{if(e.aborted){j.resolve(!1);return}this.processOnePendingServerModule().then(j.resolve,j.reject)}),!await j)break}}finally{this.backgroundJob=null,this.backgroundAbortController=null}})(),this.backgroundJob}cancelBackgroundJob(){this.backgroundAbortController&&this.backgroundAbortController.abort()}getTransientSave(e){return this.transientSaves.get(e)}resetModuleStateAndPermissions(e){this.readOnlyTree=e==="readonly",this.useTreeAsLocalModuleList=this.readOnlyTree,!this.readOnlyTree&&this.modulesService&&this.setupModuleEventStreamIfNeeded(),this.treeNodesToUpdate.clear(),this.treeNodesToDelete=[],this.transientSaves.size>0&&(O.reportErrorOncePerMinute(new Error("Discarding transient saves"),{count:this.transientSaves.size}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:new Map,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}))}async waitForModulesToSave(){let e=Array.from(this.transientSaves.keys());for(let t of e)this.transientSaves.has(t)&&await this.update(t,{});let j=this.transientSaves.size;j>0&&O.warn("waitForModulesToSave: transientSaves seems to be growing, ignoring rest:",j)}async initialize(){return this.initializationStarted?this.initializationPromise:(this.initializationStarted=!0,this.initializeInternal().then(this.resolveInitialization,e=>{O.reportError(e,{context:"Failed to initialize ModulesStorage: "}),this.rejectInitialization(e)}),this.initializationPromise)}setupModuleEventStreamIfNeeded(){this.didSetupModuleEventStream||(this.didSetupModuleEventStream=!0,g(this.modulesService,"ModulesStorage.useModuleEventStream: expected modules service to be initialized"),this.modulesService.moduleEventsStream().read(async({events:e})=>{let j=e.filter(xd);this.handleRemoteModuleSaveEvents(j).catch(O.reportError);let t=e.filter(vd);this.handleRemoteModuleDeleteEvents(t).catch(O.reportError)}).catch(e=>{O.reportError(e,{context:"Failed to read ModulesAPI event stream: "})}))}async initializeInternal(){if(this.modulesService=await this.getModulesService(),!this.modulesService)return;let e=this.treeStore.tree.getLocalModuleNodes();this.writeLocalModulesToTree=!!e,this.useTreeAsLocalModuleList||this.setupModuleEventStreamIfNeeded();let j,t=performance.now();if(Zt("modulesStorageStart"),this.useTreeAsLocalModuleList&&e){O.info("init from tree data"),this.previousLocalModuleNodes=e;let s=e.map(l=>({moduleId:l.save.moduleId,saveId:l.save.saveId}));j=await this.modulesService.lookUpModules({queries:s})}else O.info("init from module list"),j=await this.modulesService.list({});Zt("modulesStorageInit"),O.debug("listing modules took:",performance.now()-t,"millis");let r=j.data.find(ln);r&&await this.updateDependenciesModule(r);let n=new Map,o=0,i=new Set;await Promise.all(j.data.map(async s=>{if(Y(s)===aj)return;let l=await this.createServerModuleFromData(s);O.trace("init - create module",l.localId,l.id,l.saveId,l.savedAt),n.set(l.localId,l),Td(e,s)&&(o+=1),i.add(l.localId)}));let a=this.createDependencyGraph(n);this.initialized=!0,this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:n,transientSaves:this.transientSaves,depsGraph:a,didRemoteChange:!0}),Zt("modulesStorageFirstPublish"),this.processTreeUpdates(),o>0&&O.reportError("Data loss detected based on modules saves and modules in tree.",{dataLossCount:o})}createDependencyGraph(e){let j=[];for(let t of e.values()){let r=Y(t),n=t.imports.relative;j.push([r,n])}return x6(j)}processTreeUpdates(){if(this.initialized){if(this.readOnlyTree)if(this.useTreeAsLocalModuleList){if(!this.treeStore.tree.has(Tj)){O.info("detected removal of local modules list node, stopping to use tree as local module list"),this.useTreeAsLocalModuleList=!1,this.setupModuleEventStreamIfNeeded();return}}else{if(!this.treeStore.tree.has(Tj))return;O.info("detected insertion of a local modules list node, starting to use tree as local module list"),this.useTreeAsLocalModuleList=!0}this.syncLocalModules(),this.tryWriteTreeData()}}async syncLocalModules(){if(!this.useTreeAsLocalModuleList)return;let e=this.treeStore.tree.getLocalModulesListNode()?.children;if(!e||this.previousLocalModuleNodes===e)return;let j=[],t=Ho(this.previousLocalModuleNodes,r=>[r.id,r]);this.previousLocalModuleNodes=e;for(let r of e){let n=t.get(r.id);if(t.delete(r.id),n===r)continue;let o=r.save,i=this.persistedModules.get(r.id);Z7(i,o)||yd(r)&&Z7(this.dependenciesModule,o)||(j.push({moduleId:o.moduleId,saveId:o.saveId}),O.debug("syncLocalModules to update:",r.id))}if(t.size>0&&(O.debug("syncLocalModules removing:",t.keys()),this.handleRemoteModuleDeletes(Array.from(t.values()).map(r=>r.save.moduleId))),j.length>0){O.debug("syncLocalModules updating:",j),g(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let r=performance.now(),n=await this.modulesService.lookUpModules({queries:j});O.debug("lookupModules took:",performance.now()-r,"millis"),await this.handleRemoteModuleSaves(n.data)}}canWriteTree(){return!this.treeStore.tree.isViewOnly}tryWriteTreeData(){this.canWriteTree()&&(this.treeNodesToUpdate.size===0&&this.treeNodesToDelete.length===0||this.processWhenReady(()=>{if(!this.canWriteTree())return;let e=this.treeStore.tree;e.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(e);for(let j of this.treeNodesToDelete)this.persistedModules.get(j)||(O.debug("tryWriteTreeData, remove:",j),e.remove(j));this.treeNodesToDelete=[];for(let[j,{treeVersion:t,errors:r,persistedModule:n}]of this.treeNodesToUpdate.entries())this.persistedModules.get(j)?.saveId===n.saveId&&(O.debug("tryWriteTreeData, write:",j,t,n.id,n.saveId,r),this.updateNode(e,j,t,n,r));this.treeNodesToUpdate.clear()},"nonUserEvent"))}updateTreeNodeWithOwnTreeVersion(e,j){!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()||this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree);let r=this.treeStore.tree.get(e)?.save.treeVersion??this.treeStore.remoteTreeVersion;O.debug("updateTreeNodeWithCurrentTreeVersion:",e,r,j.id,j.saveId),this.updateNode(this.treeStore.tree,e,r,j)},"nonUserEvent")}updateTreeNode(e,j,t,r,n){return!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()?!0:this.canWriteTree()?(this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree),O.debug("updateTreeNode:",e,j,t.id,t.saveId),this.updateNode(this.treeStore.tree,e,j,t,r,n)},"nonUserEvent"),!0):(O.debug("updateTreeNode - readonly, buffering change"),this.treeNodesToUpdate.set(e,{treeVersion:j,persistedModule:t,errors:r,kitSectionsStructure:n}),!0)}removeTreeNode(e){this.writeLocalModulesToTree&&(this.canWriteTree()?this.process(()=>{O.debug("removeTreeNode:",e),this.treeStore.tree.remove(e)}):this.treeNodesToDelete.push(e))}updateNode(e,j,t,r,n,o){g(this.writeLocalModulesToTree,"not using tree for local modules");let i=e.get(j)?.asDraft()??new C6({id:j});g(i instanceof C6);let a=r.metadata.pluginId,s={treeVersion:t,moduleId:r.id,saveId:r.saveId,imports:r.imports?.relative,title:r.title,name:r.name,type:r.type,sourceRevision:r.sourceRevision,annotations:r.annotations?re(r.annotations):i.save.annotations,pluginId:kA(a)?a:i.save.pluginId};i.set({save:s}),i.tree()||e.insertNode(i,Tj);let l=r.name;if(!e.has(l))return;if(gt(o)){let u=e.get(l);tA(u)&&u.set({kitSectionsStructure:o})}if(!n)return;let k=e.get(Sa);if(O.debug("Writing serialization errors from artifacts to tree for",l),k?.children?.forEach(u=>{let $=u.sourceNodeId??u.scopeId,E=It(u.sourceNodeModuleType)||r.type===u.sourceNodeModuleType;!$||$!==l||!E||!_a(u.type)||e.remove(u.id)}),n.length===0)return;let c=e.ensureErrorListNode();n.forEach(u=>e.insertNode(u,c.id))}getModuleTreeData(e){return this.treeStore.tree.getNodeWithTrait(e,M6)?.save}getKitSectionsStructure(e){return this.treeStore.tree.getNodeWithTrait(e,tA)?.kitSectionsStructure}createLocalModulesListNodeIfNeeded(e){if(g(this.writeLocalModulesToTree,"not using tree for local modules"),e.has(Tj)||!this.canWriteTree())return;O.debug("ensureAllModulesExistInTree:",this.persistedModules.size),e.insertNode(new Ra);let j=this.treeStore.remoteTreeVersion;this.persistedModules.forEach(t=>{this.updateNode(e,t.localId,j,t)}),this.dependenciesModule&&this.updateNode(e,aj,j,this.dependenciesModule)}usingLocalModulesInTree(){return this.treeStore.tree.has(Tj)||this.goingToStartUsingLocalModulesInTree}async startUsingLocalModulesInTree(){if(!this.canWriteTree())throw Error("Project is read only.");this.goingToStartUsingLocalModulesInTree=!0,this.process(()=>{if(this.startUsingLocalModulesInTree){if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("startUsingLocalModulesInTree"),this.goingToStartUsingLocalModulesInTree=!1,this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)}})}stopUsingLocalModulesInTree(){this.goingToStartUsingLocalModulesInTree=!1,this.process(()=>{if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("stopUsingLocalModulesInTree"),this.treeStore.tree.remove(Tj),this.writeLocalModulesToTree=!1,this.setupModuleEventStreamIfNeeded()})}maybeUpgradeDocument(){return this.process(()=>{if(!this.canWriteTree()){O.warn("cannot upgrade document if we cannot write, but should not be saving modules either");return}O.info("upgrading document to use local modules list node"),this.treeStore.tree.lineage.setEditReason("maybeUpgradeDocument"),this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)},"nonUserEvent"),this.writeLocalModulesToTree}getModuleWithTypeSlashName(e){let j=this.findPersistedModuleLocalIdByTypeSlashName(this.persistedModules,e);if(j)return this.persistedModules.get(j)}async updateDependenciesModule(e){g(ln(e),"updateDependenciesModule called with non dependencies module data");let j=await this.getDependenciesFiles(e),t=j?.dependenciesMapContent;if(!t){let r=JSON.parse(j.importMapContent),n=te(r);t=JSON.stringify(n),this.readOnlyTree?O.reportError(new Error("modules storage is read only"),{context:"modules storage is read only while calling updateDependenciesModule"}):(await this.updateDependenciesLocked(r,n),O.info("The missing dependencies file has now been created."))}this.dependenciesModule={kind:"dependencies",...e,id:e.id,localId:e.localId,type:"config",name:e.name,importMapContent:j.importMapContent,dependenciesMapContent:t}}async createServerModuleFromData(e){let j={kind:"server",...e,id:e.id,localId:e.localId,moduleURL:e.baseURL+(e.type==="kit"?e.files.source:e.files.module),update:performance.now()};if((j.type==="codeFile"||j.type==="webPageMetadata")&&(j.sourceContent=await this.fetchSourceContentFromData(e)),xs(j)&&Ps(j)===0){j.sourceContent=await this.fetchSourceContentFromData(e);let t=j.sourceContent.includes("useQueryData")?1:0;j.metadata={...j.metadata,compatibleCmsVersion:t}}return j}async fetchSourceContentFromData(e){return this.downloadQueue.run(async()=>{let j=e.baseURL+e.files.source;return(await fetch(j)).text()})}async refresh(){if(this.initialized&&!this.useTreeAsLocalModuleList)return O.debug("refresh: acquiring lock"),sA(()=>this.refreshLocked())}async refreshLocked(){O.debug("refresh: start"),g(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let{data:e}=await this.modulesService.list({});O.debug("refresh: there's",e.length,"modules to process");let j=new Map,t=new Set;await Promise.all(e.map(async n=>{let o=n.localId;if(ln(n)){this.dependenciesModule?.saveId!==n.saveId&&await this.updateDependenciesModule(n);return}let i=this.persistedModules.get(o);if(i?.saveId===n.saveId)j.set(o,i);else{let a=await this.createServerModuleFromData(n);O.debug("refresh - updating module",a.localId,a.id,a.saveId,a.savedAt),j.set(o,a)}t.add(o)}));let r=this.createDependencyGraph(j);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:j,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0}),O.debug("refresh: finish")}whenInitialized(){return this.initializationPromise}async whenIdle(){await Promise.all([this.whenInitialized(),sA(()=>{})])}isProcessing(){return!!(!this.initialized||this.transientSaves.size>0||v6.isLocked(Ye))}hasLocalChanges(){return this.transientSaves.size>0}hasLocalCodeFileChanges(){if(this.transientSaves.size===0)return!1;for(let e of this.transientSaves.values())if(e.type==="codeFile"||e.type==="config")return!0;return!1}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(e){this.listeners.forEach(j=>{try{j(e)}catch(t){O.reportError(t)}})}subscribe(e){return this.addListener(e),e(Al(this.dependenciesModule,void 0,this.persistedModules,this.transientSaves,this.lastSnapshot.depsGraph,new Map,this.initialized,!1,!1)),()=>this.removeListener(e)}getDependentsOfModule(e){return this.lastSnapshot.depsGraph[e]?.dependents}getUniqueNameForType(e,j){let t=new Set;for(let r of this.persistedModules.values())r.type===e&&t.add(r.name);return L7(t,j)}async updateSources(e){return sA(async()=>{let j=!1;for(let{localId:t,source:r,options:n}of e){let o=Date.now();try{await this.updateSourceLocked(t,{...n,source:r}),j=!0}catch(i){i instanceof $r&&BA({type:"add",variant:"error",text:"Instances of your component won't update if they are nested within themselves.",key:"component-circular-dependency",icon:"error",duration:Number.POSITIVE_INFINITY}),O.reportError(i)}finally{let i=Date.now()-o;O.debug("\u23F1 update source",t,"in",i,"ms")}}return await this.makeVisibleDependentServerModulesLocal(e),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1}),this.makeLazyServerModulesLocalWhenIdle().catch(lA),j})}async updateDependenciesSource(e,j){return sA(async()=>{g(this.dependenciesModule,"Dependency files must already exist to be updated.");let t=e===Wo?j:this.dependenciesModule.importMapContent,r=e===Yo?j:this.dependenciesModule.dependenciesMapContent;return this.updateDependenciesLocked(JSON.parse(t),JSON.parse(r))})}async compileSubmodules(e,j){let t={};return await Promise.all([...j].map(async([r,n])=>{let o=await this.compile({name:r,source:n,type:e,includeSourceMap:!1,addFramerMetadata:!1});for(let a of o.imports.relative){let s=Bs(a);if(!(s&&j.has(s)))throw new Error("Submodules only support relative imports of other submodules")}let i=$s(r);t[i]=o.code})),t}typeAndNameFromLocalId(e,j=!1){if(j)return mt(e);for(let t of this.lastSnapshot.modules.values())if(t?.localId===e)return t;throw new Error(`Module entry for local id ${e} missing in internal snapshot`)}async updateSourceLocked(e,{source:j,submodules:t,binaryAssets:r=Y7,stableName:n=!1,assets:o,preventCircularImports:i,telemetrySession:a,treeVersion:s,sourceRevision:l,svgIcon:k,kitSectionsStructure:c}){await this.whenInitialized();let u=this.typeAndNameFromLocalId(e,n),$=Y(u),E=await this.compile({localId:e,name:$,source:j,type:u.type,includeSourceMap:kn(u.type),telemetrySession:a}),m=W7;t&&(m=await this.compileSubmodules(u.type,t));let d=oe(this.lastSnapshot.depsGraph,$,E.imports.relative);if(i&&Ds(d,$))throw new $r;let f=Od(u.type,E.annotations),R=pA(this.transientSaves,_=>{let b=_.get(e),G,P=f?.framerIntrinsicWidth;P&&(G={...G,intrinsicWidth:Number.parseInt(P,10)});let x=f?.framerIntrinsicHeight;if(x&&(G={...G,intrinsicHeight:Number.parseInt(x,10)}),G={...G,compilerContractVersion:1,treeAnnotations:!0,localModuleImportMapEntries:this.moduleUsesLocalImportMapSpecifiers($)},b)b.saveId=bj(),b.moduleContent=E.code,b.sourceContent=j,b.sourceMapContent=E.sourceMap,b.submoduleContents=m,b.binaryAssetContents=r,b.imports=E.imports,b.exports=E.exportedNames,b.reExportedModules=E.reExportedModules,b.treeVersion=s??this.treeStore.remoteTreeVersion,b.sourceRevision=l??b.sourceRevision,b.annotations=E.annotations,b.svgIcon=k??b.svgIcon,b.kitSectionsStructure=c??b.kitSectionsStructure,b.update=performance.now(),o&&(b.assets=Array.from(o)),G&&(b.metadata={...b.metadata,...G});else{let T={localId:e,type:u.type,name:u.name,saveId:bj(),moduleContent:E.code,sourceContent:j,sourceMapContent:E.sourceMap,submoduleContents:m,binaryAssetContents:r,imports:E.imports,exports:E.exportedNames,reExportedModules:E.reExportedModules,treeVersion:s,sourceRevision:l,svgIcon:k,kitSectionsStructure:c,annotations:E.annotations,update:performance.now()};o&&(T.assets=Array.from(o)),G&&(T.metadata=G),_.set(e,T)}});this.transientInfo||=new Set,this.transientInfo.add(e),this.transientSaves=R,this.lastSnapshot={...this.lastSnapshot,depsGraph:d}}async create(e){return sA(()=>this.createLocked(e))}async createLocked(e){await this.whenInitialized();let{type:j,name:t,source:r,...n}=e,o=Y({type:j,name:t}),i=await this.compile({name:o,source:r,type:j,includeSourceMap:kn(j)}),a={localId:void 0,type:j,name:t,saveId:bj(),moduleContent:i.code,sourceContent:r,sourceMapContent:i.sourceMap,submoduleContents:W7,binaryAssetContents:Y7,imports:i.imports,exports:i.exportedNames,reExportedModules:i.reExportedModules,treeVersion:e.treeVersion||this.treeStore.remoteTreeVersion,sourceRevision:e.sourceRevision,svgIcon:e.svgIcon,kitSectionsStructure:e.kitSectionsStructure,annotations:i.annotations,update:performance.now()},s=await this.createBatchSaveForUpdatedModule("$new",a,this.persistedModules,new Map,new Map,{type:j,name:t,...n});g(!this.readOnlyTree,"modules storage is read only"),g(this.modulesService);let{data:l}=await this.modulesService.saveBatch({batch:[s]}),{updatedModuleLocalId:k,nextPersistedModules:c}=this.processTransientSaveData({nextPersistedModules:this.persistedModules,transientSave:a,data:l}),u=oe(this.lastSnapshot.depsGraph,o,i.imports.relative);return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:c,transientSaves:this.transientSaves,depsGraph:u,didRemoteChange:!0}),k}async update(e,j){let t=this.persistedModules.get(e);return g(t,"Trying to update an unknown module with localId:",e),sA(async()=>{let r=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[e]:{...j,name:t.name,type:t.type}})}finally{let n=Date.now()-r;O.debug("\u23F1 update",e,"in",n,"ms")}})}async rename(e,j){return sA(()=>this.renameLocked(e,j))}async renameLocked(e,j){await this.whenInitialized();let t=this.persistedModules,r=this.lastSnapshot.depsGraph,n=t.get(e);g(n,"Trying to rename an unknown module with localId:",e);let o=this.treeStore.remoteTreeVersion,i=Y(n);g(!this.readOnlyTree,"modules storage is read only"),g(this.modulesService);let a=await this.modulesService.update({moduleId:n.id,name:j});g(a,"invalid update reply");let s=r[i]?.dependents,l=[],k={},c=Y(a);if(i!==c&&(r=er(r,i),r=oe(r,c,n.imports.relative)),s){let u=[],$=[];for(let d of t.values()){let f=Y(d);s.has(f)&&(d.kind==="local"?u.push(d):$.push(d))}if($.length>0){let d=await Promise.all($.map(f=>this.createLocalModuleFromModule(f)));t=pA(t,f=>{for(let R of d)f.set(R.localId,R),u.push(R)})}let E=[];for(let d of u){let f=Y(d),R=y6(f,`${n.type}/${j}`);g(R,"Failed to create relative path to",n.type,"/",j);let _=y6(f,i);g(_);let b=d.imports.relative.indexOf(_);if(b===-1){O.warn(d.localId,"doesn't import",_);continue}let G=[...d.imports.relative];G[b]=R;let P={absolute:d.imports.absolute,bare:d.imports.bare,relative:G},x=tl(d.sourceContent,_,R),T=tl(d.moduleContent,_,R);k[d.localId]={sourceContent:x,moduleContent:T,imports:P},g(d.files.source);let F={type:d.type,moduleId:d.id,name:d.name,saveId:bj(),patchSaveId:d.saveId,files:[{name:d.files.source,type:"source",content:x}],imports:P};E.push(F)}g(!this.readOnlyTree,"modules storage is read only");let{data:m}=await this.modulesService.saveBatch({batch:E});l=m}t=pA(t,u=>{if(this.updateTreeNode(e,o,a)){n.kind==="server"?u.set(e,{...a,kind:"server",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:n.sourceContent,update:performance.now()}):u.set(e,{...a,kind:"local",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:n.sourceContent,moduleContent:n.moduleContent,sourceMapContent:n.sourceMapContent,submoduleContents:n.submoduleContents,binaryAssetContents:n.binaryAssetContents,update:performance.now()});for(let E of l){let m=E.localId,d=u.get(m);g(d?.kind==="local","dependent module must be local:",m);let f=k[m];g(f,"dependent module update must exist:",m),this.updateTreeNode(m,o,E)&&(u.set(m,{...E,kind:"local",localId:m,id:E.id,moduleURL:E.baseURL+E.files.module,moduleContent:f.moduleContent,sourceContent:f.sourceContent,sourceMapContent:d.sourceMapContent,submoduleContents:d.submoduleContents,binaryAssetContents:d.binaryAssetContents,imports:f.imports,exports:E.exports,reExportedModules:E.reExportedModules,submodules:E.submodules,binaryAssets:E.binaryAssets,sourceRevision:d.sourceRevision,update:d.update}),r=oe(r,Y(E),f.imports.relative))}}}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:t,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0})}async upsert(e,j){return sA(async()=>{let t=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[e]:j})}finally{let r=Date.now()-t;O.debug("\u23F1 upsert",e,"in",r,"ms")}})}async upsertBatch(e){return sA(async()=>{let j=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked(e)}finally{let t=Date.now()-j;O.debug("\u23F1 upsert batch in",t,"ms")}})}async delete(e){return sA(()=>this.deleteLocked(e))}async deleteLocked(e){let j=Array.isArray(e)?e:[e];if(!j.length)return;await this.whenInitialized();let t=j.map(k=>{let c=this.persistedModules.get(k);return g(c,"Trying to delete an unknown module",k,"It was never persisted."),c}),{modulesService:r}=this;g(r);let n=await Promise.allSettled(t.map(k=>r.delete({moduleId:k.id}))),o=new Set,i=new Set;for(let k of n){if(k.status==="rejected"){O.warn(String(k.reason));continue}o.add(k.value.localId),i.add(k.value.id)}j=j.filter(k=>o.has(k)),t=t.filter(k=>i.has(k.id)),g(j.length>0,"Failed to delete module(s)");let a=this.lastSnapshot.depsGraph;for(let k of t){let c=Y(k);a=er(a,c)}let s=pA(this.persistedModules,k=>{for(let c of j)k.delete(c),this.removeTreeNode(c)}),l=pA(this.transientSaves,k=>{for(let c of j)k.delete(c)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:s,transientSaves:l,depsGraph:a,didRemoteChange:!0})}async publish(e,j){return sA(()=>this.publishLocked(e,j))}async publishLocked(e,{namespace:j,name:t,version:r}){await this.whenInitialized();let n=this.persistedModules.get(e);g(n,"Trying to publish an unknown module",e,"It was never persisted."),g(!this.readOnlyTree,"modules storage is read only"),g(this.modulesService);let o=await this.modulesService.publish({moduleId:n.id,saveId:n.saveId,namespace:j,name:t,version:r}),i=pA(this.persistedModules,a=>{let s=a.get(e);s&&a.set(e,{...s,lastPublish:{namespaceId:o.namespaceId,name:o.name,version:o.version,importURL:o.importURL}})});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),o}async addNpmDependencies(e){return sA(async()=>{await this.whenInitialized();let j;this.dependenciesModule?.importMapContent?j=JSON.parse(this.dependenciesModule?.importMapContent):j={imports:{}};let t;this.dependenciesModule?.dependenciesMapContent?t=JSON.parse(this.dependenciesModule?.dependenciesMapContent):t={dependencies:{}};let r=Array.isArray(e)?e:[e];if(r=r.filter(a=>{if(Ce.has(a.target)||Pe(a.target))return!1;let s=De(a);return!j.imports[s]}),r.length===0)return{dependenciesMap:t};r=r.map(a=>{if(t.dependencies[a.target]){let l=j.imports[a.target]??Object.entries(j?.imports).find(([c])=>c.startsWith(a.target))?.[1];g(l,"The import map should contain a import that is in the dependencies map");let k=ma(l)?.version;return k?{...a,target:`${a.target}@${k}`}:a}let s=Me[a.target];return s?{...a,target:`${a.target}@${s}`}:a});let{importMap:n,resolvedDependencies:o}=await ua(j,r,Ce,Me),i=await this.extendCurrentDependenciesMap(o);return o.forEach(({name:a,version:s})=>qA("npm_dependency_add",{name:a,semver:s})),O.debug({newImportMap:n,newDependenciesMap:i}),await this.updateDependenciesLocked(n,i),{dependenciesMap:i}})}async reinstallNpmDependencies(){return sA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies();delete e.scopes;let{importMap:t}=await da(e,Ce,Me);return await this.updateDependenciesLocked(t,j),t})}async uninstallBlockedNpmDependencies(){return sA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies(),t=_6(j),r=await Ea(e);return await this.updateDependenciesLocked(r,t),r})}async clearNpmDependencies(){return sA(async()=>this.updateDependenciesLocked({imports:{}},{dependencies:{}}))}async removeBlockedNpmDependencies(){return sA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies(),t=_6(j);return await this.updateDependenciesLocked(e,j),t})}async rebuildImportMapFromDependencies(){return sA(async()=>{let e=this.dependenciesModule?.dependenciesMapContent,j=e?JSON.parse(e):{dependencies:{}},t=await pa(j,Ce,Me);return await this.updateDependenciesLocked(t,j),t})}async unsafeUpgradeDependency(e,j,t){return sA(async()=>{let{currentImportMap:r,currentDependenciesMap:n}=this.getCurrentDependencies(),o=await Ba(r,e,j,t),i=te(o),a=ee(i,n);return await this.updateDependenciesLocked(o,a),o})}async extendCurrentImportMap(e,j){return sA(async()=>{let{currentImportMap:t,currentDependenciesMap:r}=this.getCurrentDependencies(),n=je(t,e),o=ee(r,j);return this.updateDependenciesLocked(n,o)})}async extendCurrentDependenciesMap(e){let j={};for(let r of e)j[r.name]=r.version;let t=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return t.dependencies=Object.assign(j,t.dependencies),t}getCurrentDependencies(){let e=this.dependenciesModule?.importMapContent?JSON.parse(this.dependenciesModule?.importMapContent):{imports:{}},j=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return{currentImportMap:e,currentDependenciesMap:j}}async updateDependenciesLocked(e,j){let t=JSON.stringify(e,null,4),r=JSON.stringify(j,null,4);if(t===this.dependenciesModule?.importMapContent&&r===this.dependenciesModule?.dependenciesMapContent)return;let n={moduleId:"$upsertName",name:$6,saveId:bj(),type:"config",files:[{name:"importMap.json",type:"importMap",content:t},{name:"dependencies.json",type:"dependencies",content:r}],imports:{absolute:[],relative:[],bare:[]}};g(!this.readOnlyTree,"modules storage is read only"),g(this.modulesService);let{data:[o]}=await this.modulesService.saveBatch({batch:[n]});g(o,"Modules API must return an updated import map after savebatch"),this.updateTreeNodeWithOwnTreeVersion(aj,o);let i={kind:"dependencies",importMapContent:t,dependenciesMapContent:r,...o,id:o.id,localId:o.localId,type:o.type,name:o.name};this.setNextInternalState({dependenciesModule:i,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})}getPersistedDependenciesModule(){return this.dependenciesModule}getPersistedModuleByGlobalId(e){for(let j of this.persistedModules.values())if(j.id===e)return j}getPersistedModuleByLocalId(e){return this.persistedModules.get(e)}getTransientSaveByLocalId(e){return this.transientSaves.get(e)}async handleRemoteModuleDeleteEvents(e){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleDeletes(e.map(j=>j.id))}async handleRemoteModuleDeletes(e){await sA(async()=>{let j=[],t=[];for(let i of e){let a=this.getPersistedModuleByGlobalId(i);a&&(t.push(Y(a)),j.push(a.localId))}let r=pA(this.persistedModules,i=>{for(let a of j)i.delete(a)}),n=pA(this.transientSaves,i=>{for(let a of j)i.delete(a)}),o=this.lastSnapshot.depsGraph;for(let i of t)o=er(o,i);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:r,transientSaves:n,depsGraph:o,didRemoteChange:!0})})}async handleRemoteModuleSaveEvents(e){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleSaves(e.map(j=>j.module))}async handleRemoteModuleSaves(e){let j=[],t=[];for(let o of e)Y(o)===aj?j.push(o):t.push(o);let r,n=j.length>0?j[j.length-1]:void 0;if(n){let{importMapContent:o,dependenciesMapContent:i}=await this.getDependenciesFiles(n);g(i,"No dependencies file exists for the remote update!"),r={kind:"dependencies",...n,id:n.id,localId:n.localId,type:"config",name:n.name,importMapContent:o,dependenciesMapContent:i}}await sA(async()=>{r&&(this.dependenciesModule=r);let o=this.persistedModules,i=this.lastSnapshot.depsGraph,a=await Promise.all(t.map(s=>this.createServerModuleFromData(s)));for(let s of a){let l=Y(s),k=s.localId;o=pA(o,c=>{c.set(k,s)}),this.transientSaves.has(k)||(i=oe(this.lastSnapshot.depsGraph,l,s.imports.relative))}this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:o,transientSaves:this.transientSaves,depsGraph:i,didRemoteChange:!0,multiplayerChange:!0})})}getPatchTransientSave(e,j,t){return{saveId:t,type:j.type,name:j.name,localId:e,moduleContent:j.moduleContent,sourceContent:j.sourceContent,sourceMapContent:j.sourceMapContent,submoduleContents:j.submoduleContents,binaryAssetContents:j.binaryAssetContents,imports:j.imports,exports:j.exports,reExportedModules:j.reExportedModules,sourceRevision:j.sourceRevision,update:j.update}}async upsertBatchLocked(e){if(this.readOnlyTree)return;let j=this.persistedModules,t=new Map,r=[],n=new Map;for(let k of j.values()){let c=Y(k);n.set(c,k.localId),r.push([c,k.imports.relative])}let o=new Map;for(let k in e){let c=k,u=e[c];g(u,"No persist params found for",c);let $=this.transientSaves.get(c),E=$??j.get(c);g(E,"No module found for",c);let m=Y(E);o.set(m,$?.saveId??bj()),t.set(m,OA(u.name)),n.set(m,c),$&&r.push([m,$.imports.relative])}let i=x6(r),a=new Map,s=pA(this.transientSaves,k=>{for(let c in e)k.delete(c)}),l;try{let{batch:k,nextPersistedModules:c}=await this.createBatch(e,a,j,i,n,o,t);g(!this.readOnlyTree,"modules storage is read only"),g(this.modulesService);let{data:u}=await this.modulesService.saveBatch({batch:k});j=pA(c,$=>{for(let E of u.values()){let m=E.localId,d=a.get(m);if(!d){let P=$.get(m);g(P,m,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(m,E),P.saveId=E.saveId,P.moduleURL=E.baseURL+E.files.module;continue}let f={kind:"local",...E,id:E.id,localId:E.localId,imports:d.imports,moduleURL:E.baseURL+E.files.module,sourceContent:d.sourceContent,sourceMapContent:d.sourceMapContent,moduleContent:d.moduleContent,submoduleContents:d.submoduleContents,binaryAssetContents:d.binaryAssetContents,sourceRevision:d.sourceRevision,annotations:d.annotations,update:d.update},R=e[m]?.errors,_=d.kitSectionsStructure,b=d.treeVersion??this.treeStore.remoteTreeVersion;if(!this.updateTreeNode(E.localId,b,f,R,_))return;$.set(m,f)}})}catch(k){j=this.persistedModules;let c=Array.from(a.values()).map(m=>m.saveId).join("-"),u=this.transientSaveRetries.get(c)??0,{error:$,dropTransient:E}=this.handlePersistenceError(k,u,()=>{this.transientSaveRetries.set(c,u+1),setTimeout(async()=>{let m=Object.entries(a).every(([d,f])=>{let R=d,_=this.transientSaves.get(R);return _&&_.saveId===f.saveId});ur($)&&(this.transientSaveRelativeImportRetries.add(c),await this.refresh()),m&&(O.debug("retrying saving batchId with id:",c),this.upsertBatchLocked(e))},1e3+u*1e3)});if(!E)return;l=$}if(this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:j,transientSaves:s,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),l)throw l}async createBatch(e,j,t,r,n,o,i){let a=[];for(let c in e){let u=c,$=e[u];g($,"No persist params found for",u);let E=this.transientSaves.get(u);if(!E){let d=t.get(u);g(d,`Trying to persist ${u} but it doesn't have neither a corresponding transient save nor an existing persisted module.`),d.kind==="server"&&(d=await this.createLocalModuleFromModule(d),t=pA(t,R=>{d&&R.set(d.localId,d)}));let f=o.get(u);g(f,"No save id found for",u),E=this.getPatchTransientSave(u,d,f)}j.set(u,E);let m=await this.createBatchSaveForUpdatedModule(this.persistedModules.get(u)?.id??"$upsertName",E,t,o,i,$);a.push(m)}let s=new Map;for(let c in e){let u=c,$=e[u];g($,"No persist params found for",u);let E=Y($),m=new Set;qj(r,E,m),s.set(u,m)}let l=[];for(let c of s.values())for(let u of c){let $=n.get(u);g($,"Cannot find localId for",u);let E=t.get($);E?.kind==="server"&&l.push(this.createLocalModuleFromModule(E))}if(l.length>0){let c=await Promise.all(l);t=pA(t,u=>{for(let $ of c)u.set($.localId,$)})}for(let c of s.values())for(let u of c)o.has(u)||o.set(u,bj());let k=new Set;for(let[c,u]of s){let[$]=Jt(c);for(let E of u){let m=n.get(E);if(g(m,"Cannot find localId for",E),j.has(m)||k.has(E)||t.get(m)?.metadata.localModuleImportMapEntries===!0&&this.moduleUsesLocalImportMapSpecifiers(E)&&($!=="codeFile"||!r[E]?.dependencies.has(c)))continue;k.add(E);let R=await this.createBatchSaveForDependentModule(m,t,o,i);a.push(R)}}return{batch:a,nextPersistedModules:t}}handlePersistenceError(e,j,t){let r=e instanceof Error?e.message:"",n=e instanceof B6?e.code:0,o=e instanceof B6?e.status:0,i=n===1002,a=n===-1e3,s=o>=300&&o!==400&&o!==403,l=a||s||ur(e),k=20,c=2;if(ur(e)&&vj.isOn("retryRelativeImportRewriting"))return!l||j>=c?(O.reportError("Relative imports error, exceeded max retries, making document read only:",{missing:e.persistedMissingRelativeImports}),this.makeDocumentReadOnly(),BA({type:"add",variant:"warning",text:"Framer can\u2019t save your latest changes. Please reload the page to continue working.",key:"client-outdated",duration:Number.POSITIVE_INFINITY,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>{O.reportError("ModulesStorage: Reloaded due to relative imports error.",{missing:e.persistedMissingRelativeImports}),window.top.location.reload()}}}),{error:e,dropTransient:!0}):(O.debug("Relative imports error, will retry:",{missing:e.persistedMissingRelativeImports}),t(),{error:e,dropTransient:!1});if(i&&j>0)O.debug("Ignoring duplicated save id.");else{if(i)return O.debug("Duplicate save id error, will drop transient save:",e),{error:e,dropTransient:!0};if(l&&j<k)return O.info("Connection error, will retry:",{message:r,code:n,status:o,retryCount:j}),t(),{dropTransient:!1};if(l)O.error("Error saving: too many retries, will drop transient save:",{message:r,code:n,status:o,retryCount:j});else return O.debug("Error saving, will drop transient save:",e),{error:e,dropTransient:!0}}return{dropTransient:!1}}moduleUsesLocalImportMapSpecifiers(e){let[j,t]=Jt(e);if(j==="layoutTemplate")return!0;if(j==="collection")return vj.isOn("collectionLocalModuleImportMapEntries");if(j==="screen"){let r=this.treeStore.tree.get(t);if(bt(r)||tA(r))return!0}return!1}processTransientSaveData({nextPersistedModules:e,transientSave:j,data:t},r,n){let o=j.treeVersion??this.treeStore.remoteTreeVersion,i;return e=pA(e,a=>{let s=t.values(),l=s.next().value;i=l.localId;let k={kind:"local",...l,id:l.id,localId:i,imports:j.imports,moduleURL:l.baseURL+l.files.module,sourceContent:j.sourceContent,sourceMapContent:j.sourceMapContent,moduleContent:j.moduleContent,submoduleContents:j.submoduleContents,binaryAssetContents:j.binaryAssetContents,sourceRevision:j.sourceRevision,annotations:j.annotations,update:j.update};if(this.updateTreeNode(l.localId,o,k,r,n)){a.set(i,k);for(let u of s){let $=a.get(u.localId);g($,u.localId,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(u.localId,u),$.saveId=u.saveId,$.moduleURL=u.baseURL+u.files.module}}}),g(i,"Updated module",j,"is not found in the response"),{nextPersistedModules:e,updatedModuleLocalId:i}}setNextInternalState({dependenciesModule:e,persistedModules:j,transientSaves:t,depsGraph:r,didRemoteChange:n,multiplayerChange:o=!1}){this.dependenciesModule=e,this.persistedModules=j,this.transientSaves=t;let i=Al(e,this.lastSnapshot.dependenciesModule,j,t,r,this.lastSnapshot.modules,this.initialized,n,o),a=this.lastSnapshot.initialized;this.lastSnapshot={dependenciesModule:i.dependenciesModule,modules:i.modules,depsGraph:i.depsGraph,initialized:i.initialized},!(i.metadata.patches.length===0&&i.initialized===a)&&this.notifyListeners(i)}async createLocalModuleFromModule(e){O.debug("compiling server module:",e.localId);let j=e.sourceContent;j||(j=await this.fetchSourceContentFromData(e));let t={},r={},n=this.downloadQueue,o=new Array;for(let s of e.submodules)o.push(n.run(async()=>{let l=await fetch(e.baseURL+s);t[s]=await l.text()}));for(let s of e.binaryAssets)o.push(n.run(async()=>{let k=await(await fetch(e.baseURL+s)).arrayBuffer();r[s]=new Uint8Array(k)}));await Promise.all(o);let i=Y(e),a=await this.compile({localId:e.localId,name:i,source:j,type:e.type,includeSourceMap:kn(e.type)});for(let[s,l]of this.lazyServerModulesForTransientSaves)l.delete(i),l.size===0&&this.lazyServerModulesForTransientSaves.delete(s);return{...e,kind:"local",id:e.id,localId:e.localId,sourceContent:j,moduleContent:a.code,sourceMapContent:a.sourceMap,submoduleContents:t,binaryAssetContents:r,imports:a.imports,sourceRevision:dn(e),annotations:a.annotations}}async createBatchSaveForUpdatedModule(e,j,t,r,n,o){let i=Y(j),{localId:a,moduleContent:s,sourceContent:l,sourceMapContent:k,submoduleContents:c={},binaryAssetContents:u={},metadata:$,sourceRevision:E,imports:m,type:d,name:f,annotations:R,update:_,...b}=j;switch(e){case"$new":g(a===void 0,`Attempted to create ${i} but it already has localId: ${a}`);break;case"$upsertName":default:g(a!==void 0,`The transient save for the provided moduleId: ${e} doesn't have localId`)}let{type:G,name:P,metadata:x,files:T,...F}=o;g(G===d&&P===f,`Mismatched type/name between save and parameters: ${G}/${P} !== ${d}/${f}`);let J=OA(P),v=s;m.relative.length>0&&(v=await this.replaceRelativeImportsWithAbsolute(i,s,m.relative,t,r,f6(c),n)),k&&(v+=`
//# sourceMappingURL=./${J.sourceMap}`);let I=(T??[]).concat([{name:J.module,type:"module",content:v},{name:J.source,type:"source",content:l}]);k&&I.push({name:J.sourceMap,type:"sourceMap",content:k});for(let[S,w]of Object.entries(c))I.push({name:S,type:"submodule",content:w});for(let[S,w]of Object.entries(u))I.push({name:S,type:"binaryAsset",bytes:w});let y={};if($||x)if(a){let S=t.get(a);g(S||e==="$upsertName",`Cannot safely update metadata for ${e} (${a})`),y.metadata={...S?.metadata,...$,...x,sourceRevision:E}}else y.metadata={...$,...x,sourceRevision:E};return{...b,moduleId:e,type:G,name:P,files:I,imports:m,...F,...y}}async createBatchSaveForDependentModule(e,j,t,r){let n=j.get(e);g(n,e,"is not found in persistedModules"),g(n.kind==="local","persisted module is not a local module");let o=Y(n),i=OA(n.name),a=n.imports,s=n.moduleContent;a.relative.length>0&&(s=await this.replaceRelativeImportsWithAbsolute(o,n.moduleContent,a.relative,j,t,f6(n.submoduleContents),r));let l=t.get(o);g(l,"newSaveIds don't contain saveId for",o);let k={},c=this.moduleUsesLocalImportMapSpecifiers(o);return n.metadata.localModuleImportMapEntries!==c&&(k.metadata={...n.metadata,localModuleImportMapEntries:c}),{type:n.type,moduleId:n.id,name:n.name,saveId:l,patchSaveId:n.saveId,files:[{name:i.module,type:"module",content:s}],imports:a,...k}}findPersistedModuleLocalIdByTypeSlashName(e,j){return this.ensurePersistedLocalIdsByTypeSlashNameCacheFor(e).get(j)}ensurePersistedLocalIdsByTypeSlashNameCacheFor(e){let j=this.persistedLocalIdsByTypeSlashNameCache.get(e);if(!j){j=new Map;for(let[t,r]of e.entries())j.set(Y(r),t);this.persistedLocalIdsByTypeSlashNameCache.set(e,j)}return j}async replaceRelativeImportsWithAbsolute(e,j,t,r,n,o,i){let{modulesCDN:a}=u6(),s={};for(let E of o){let m=Es(E);s[m]=m}let l=this.moduleUsesLocalImportMapSpecifiers(e),k=new Set;for(let E of t){if(E in s)continue;let m=Oj(E,e);if(!m)continue;let d=this.findPersistedModuleLocalIdByTypeSlashName(r,m);if(!d){k.add(m),O.error("Cannot resolve",E,"from",e);continue}let f=r.get(d);g(f);let{id:R,files:_}=f,b=n.get(m)??f.saveId,G=i?.get(m)?.module??_.module;g(kA(G),"Must have a module file name to build a local module import map specifier."),s[E]=l?Gt(d,G):`${a}/${R}/${b}/${G}`}let c=await dr(j,s);if(c.ok)return c.value;if(e.startsWith("codeFile"))return c.error.partiallyProcessedCode;let u=new Set,$=this.treeStore.tree;for(let E of c.error.unresolvedRelativeImports){let m=Oj(E,e);if(!m)continue;let[d]=Jt(m);if(!(d==="codeFile"||!$.getNodeWithTrait(m,M6))){u.add(m);break}}if(u.size===0)return O.reportError("Failed to rewrite relative imports due to unpersisted relative dependencies",{relativeImports:t,unresolved:Array.from(c.error.unresolvedRelativeImports)}),c.error.partiallyProcessedCode;if(O.reportError("Failed to rewrite relative imports",{typeSlashName:e,missing:Array.from(u)}),!vj.isOn("retryRelativeImportRewriting"))return c.error.partiallyProcessedCode;throw new We(u)}async getDependenciesFiles({baseURL:e,files:j}){let[t,r]=await Promise.allSettled([this.downloadQueue.run(async()=>{let i=await fetch(e+j.importMap);if(i.ok!==!0)throw new Error("failed to load importMap file");return i.text()}),this.downloadQueue.run(async()=>{let i=await fetch(e+j.dependencies);if(i.ok!==!0)throw new Error("failed to load dependencies file");return i.text()})]);g(t.status==="fulfilled","The importMap has to exist on the module");let n=t.value,o;return r.status==="fulfilled"?o=r.value:O.warn("No dependencies file was found!"),{importMapContent:n,dependenciesMapContent:o}}async upsertKit(e,j,t,r,n){return sA(async()=>{let o=JSON.stringify(e),i=[{name:"kit.json",type:"source",content:o},...t.map(c=>({name:`${c.id}.json`,type:"kitSection",content:JSON.stringify(c.content)})),...r.map(c=>({name:`${c.id}.json`,type:"kitVectorSetNames",content:JSON.stringify(c.content)}))],a=performance.now(),s="kit/kit",l={type:"kit",files:i,assets:n.size>0?Array.from(n):void 0,name:_d,moduleId:this.persistedModules.get(s)?.id??"$upsertName",saveId:bj(),metadata:{kit:{id:e.id,title:e.title,icon:j}},imports:{absolute:[],relative:[],bare:[]}};g(this.modulesService);let{data:k}=await this.modulesService.saveBatch({batch:[l]});this.setNextInternalState({dependenciesModule:this.dependenciesModule,transientSaves:this.transientSaves,persistedModules:pA(this.persistedModules,c=>{for(let u of k.values()){if(u.localId!==s)continue;let $={kind:"local",...u,id:u.id,localId:u.localId,imports:u.imports,moduleURL:u.baseURL+u.files.source,sourceContent:o,sourceMapContent:void 0,moduleContent:o,submoduleContents:{},binaryAssetContents:{},sourceRevision:void 0,annotations:void 0,update:a};c.set(s,$)}}),depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})})}async enqueueKitScreenshots(e,j,t){let r=this.persistedModules.get(d6("kit","kit"));g(r,"Kit module must have been persisted to enqueue screenshots");let n=t?"draft":r.saveId;g(n,"Kit Save ID must be set"),g(this.modulesService),await this.modulesService.enqueueKitScreenshots({moduleId:r.id,saveId:n,ids:Array.from(j),kitPageContent:e})}};function Dd(A,e){return`${u6().modulesCDN}/${e.id}/${A.saveId}/${e.files.module}`}function Al(A,e,j,t,r,n,o,i,a){let s=new Set(n.keys()),l=new Set(t.keys()),k=[],[c,u]=jr(n,m=>{for(let d of j.values()){let f=d.localId,R=Y(d),_=t.get(f),b=_?.type??d.type;if(!Fa(b))continue;let G;if(_)G={kind:"local",localId:f,type:_.type,name:_.name,moduleURL:Dd(_,d),moduleContent:_.moduleContent,sourceContent:_.sourceContent,sourceMapContent:_.sourceMapContent,submoduleContents:_.submoduleContents,binaryAssetContents:_.binaryAssetContents,relativeImports:_.imports.relative,files:d.files,sourceRevision:_.sourceRevision,kitSectionsStructure:_.kitSectionsStructure,svgIcon:_.svgIcon,update:_.update};else{let P=dn(d);G=d.kind==="local"?{kind:"local",localId:f,type:d.type,name:d.name,moduleURL:d.moduleURL,moduleContent:d.moduleContent,sourceContent:d.sourceContent,sourceMapContent:d.sourceMapContent,submoduleContents:d.submoduleContents,binaryAssetContents:d.binaryAssetContents,relativeImports:d.imports.relative,files:d.files,sourceRevision:P,svgIcon:void 0,kitSectionsStructure:void 0,update:d.update}:{kind:"server",localId:f,type:d.type,name:d.name,moduleURL:d.moduleURL,sourceContent:d.sourceContent,relativeImports:d.imports.relative,files:d.files,sourceRevision:P,update:d.update}}jl(m,R,G),l.delete(f),s.delete(R)}for(let d of l){let f=t.get(d);if(g(f),!f.localId)continue;let R=OA(f.name),_={kind:"local",localId:f.localId,type:f.type,name:f.name,moduleURL:`./transient/${f.saveId}/${R.module}`,moduleContent:f.moduleContent,sourceContent:f.sourceContent,sourceMapContent:f.sourceMapContent,submoduleContents:f.submoduleContents,binaryAssetContents:f.binaryAssetContents,relativeImports:f.imports.relative,files:R,sourceRevision:f.sourceRevision,svgIcon:f.svgIcon,kitSectionsStructure:f.kitSectionsStructure,update:f.update};jl(m,d,_),s.delete(Y(_))}for(let d of s)m.delete(d),k.push(d)}),$={};for(let m of k){let d=n.get(m);d&&($[m]=d.localId)}let E=pA(e,m=>{if(A){if(!m)return{kind:"dependencies",localId:aj,type:A.type,name:A.name,importMapContent:A.importMapContent,dependenciesMapContent:A.dependenciesMapContent};m.importMapContent=A.importMapContent,m.dependenciesMapContent=A.dependenciesMapContent}});return E&&E!==e&&u.push({op:e?"replace":"add",path:[Y(E)],value:E}),{dependenciesModule:E,modules:c,deletedLocalIdsByTypeSlashNames:$,depsGraph:r,initialized:o,metadata:{patches:u,hasLocalChanges:t.size>0,didRemoteChange:i,multiplayerChange:a}}}function jl(A,e,j){let t=A.get(e);if(!t){A.set(e,j);return}if(t.kind!==j.kind){A.set(e,j);return}if(t.kind==="server"){g(j.kind==="server"),el(t,j);return}g(j.kind==="local"),Pd(t.relativeImports,j.relativeImports)||(t.relativeImports=j.relativeImports),ti(t.files,j.files)||(t.files=j.files);let{relativeImports:r,files:n,...o}=j;el(t,o)}function el(A,e){Object.assign(A,e)}function Pd(A,e){if(!A&&!e)return!0;if(A&&e){let j=A.length;if(j!==e.length)return!1;for(let t=0;t<j;t++)if(A[t]!==e[t])return!1;return!0}else return!1}function xd(A){return A.type==="save"}function vd(A){return A.type==="delete"}function bj(){return Oe()}function kn(A){return A==="codeFile"||A==="canvasComponent"}function tl(A,e,j){return A.replace(new RegExp(`\\b(from\\s*)(["'])${sn(e)}\\2`,"g"),`$1${JSON.stringify(j)}`)}function Od(A,e){switch(A){case"canvasComponent":case"layoutTemplate":case"screen":case"prototype":case"collection":case"draftCollection":case"webPageMetadata":case"siteMetadata":case"vector":case"vectorSet":case"kit":return e.default;case"codeFile":case"css":case"componentPresets":case"config":case"localization":case"design":return Object.values(e)[0];default:PA(A)}}var rl={start:new Date("2025-09-03T10:00:00Z").getTime(),end:new Date("2025-09-07T13:00:00Z").getTime()};function Td(A,e){for(let j of A){if(j.id!==e.localId)continue;if(j.save.saveId===e.saveId)return!1;let t=new Date(e.savedAt).getTime();return Number.isNaN(t)?!1:t>rl.start&&t<rl.end}return!1}function ol(A,e){if(!A||A.length===0)return e?.placeholder??"";if(A.length===1)return A[0]&&A[0]!==""?A[0]:e?.placeholder??"";let j=[...A],t="";if(e?.max&&e.max<A.length){let r=A.length-e.max;j=j.slice(0,e.max),t=`${r} ${r>1?"others":"other"}`}else t=j.pop()??"";return j.length>1?`${j.join(", ")}, and ${t}`:`${j.join(", ")} and ${t}`}function Ze(A){let e=eA(A);if(!(!e||!WA(e)||!ij(e)))return`${e.moduleId}:${e.exportSpecifier}`}function il(A){let e=new Map;for(let j of A){let t=Ze(j);t&&e.set(t,j)}return e}function al(A,e){let j=A.getRawControlProps();for(let t in j){let r=j[t]?.type,n=j[t]?.value;if(r!=="vectorsetitem"||!kA(n)||!WA(n))continue;let o=Ze(n);if(!o||!e.has(o))continue;let i=e.get(o);i&&A.setControlProp(t,{type:"vectorsetitem",value:i})}}function sl(A,e){for(let j of e){al(j,A);let t=Ze(j.codeComponentIdentifier);if(!t||!A.has(t))continue;let r=A.get(t);r&&j.set({codeComponentIdentifier:r})}}function ll(A,e){let j=e.getContentManagementNode();if(j){g(j.isLoaded(),"CMS Should always be loaded.");for(let{node:t,skipChildren:r}of j.walkWithSkipChildren()){if(fj(t)){if(!t.variables.some(i=>i.type==="vectorsetitem")){r();continue}kl(t,A)}if(!be(t))continue;let n=t.getControlProps();for(let o in n){let i=n[o]?.value;if(n[o]?.type!=="vectorsetitem"||!kA(i)||!WA(i))continue;let s=Ze(i);if(!s||!A.has(s))continue;let l=A.get(s);l&&t.setControlProp(o,{...n[o],value:l})}}}}function kl(A,e){let j=!1,t=A.variables.map(r=>{if(r.type!=="vectorsetitem")return r;let{initialValue:n}=r,o=n.identifier;if(!o)return r;let i=Ze(o);if(!i||!e.has(i))return r;let a=e.get(i);return a?(j=!0,{...r,initialValue:{...n,identifier:a}}):r});j&&A.set({variables:t})}function cl(A,e){for(let j of e.root.children){if(tA(j)){al(j,A);continue}(wA(j)||ci(j))&&kl(j,A)}}var IA=zA("modules-store"),ul=new Set(["codeFile","canvasComponent","screen","layoutTemplate","vector"]),qd=500;function $n(A){let{module:e,exportSpecifier:j}=A,{id:t,saveId:r,files:n}=e;return g(n.module,"module file must exist for a saved module"),YA(t,r,n.module,j)}var ke,At,jt,Sj,dl=class extends ka{constructor(j,t,r,n,o,i,a){super();this.treeStore=j;this.loadedExternalModulesStore=t;this.chromeStore=r;this.modulesAPIServicePromise=n;this.makeDocumentReadOnly=o;this.insertTemporaryImportMap=i;this.loadAllLocalModules=a;K(this,"dependenciesModule");K(this,"localModules",new Map);K(this,"fastRefreshModules",new Map);K(this,"externalModulesDynamicInfo",new Map);K(this,"revision",0);pj(this,ke,new Map);K(this,"moduleDepsGraph",{});K(this,"modulesStorage");K(this,"moduleUpdatesEmitter",new p6);K(this,"fastRefreshModulesEmitter",new p6);pj(this,At);pj(this,jt,new Map);pj(this,Sj,new Map);K(this,"debugModuleStoreAndComponentLoaderRevisionsMatch",()=>this.revision===iA.modulesRevision);K(this,"checkForExternalModuleUpdates",async()=>{if(this.treeStore.tree.isViewOnly)return;let j=this.treeStore.tree.getExternalModulesListNode();if(!j||!j.children?.length)return;let t=[],r=new Map;j.children.forEach(a=>{let s=eA(a.codeComponentIdentifier);if(g(s?.kind==="externalModuleExport","expected ExternalModuleNode identifier to be of kind externalModuleExport"),a.type==="vector"){let l=a.annotation("framerVector");if(!Kt(l))return;let k=l.set.moduleId,c=r.get(k)??[];c.push(s),r.set(k,c)}else t.push(s)});for(let[a,s]of r){let l=this.treeStore.tree.get(a);if(!xj(l))continue;let k=l.annotation("framerVectorSet");S6(k)&&(sa(k)||t.push(...s))}let n=t.map(({moduleId:a,saveId:s})=>({moduleId:a,saveId:s}));if(!n.length)return;let o=[],i=[];for(let a=0;a<n.length;a++){let s=n[a];if(g(s,"query is expected to be defined."),o.push(s),o.length<qd&&a<n.length-1)continue;let{modules:l}=await this.lookUpModules(o,{includeStatus:!0});i.push(...l),o=[]}this.treeStore.tree.isViewOnly||this.updateExternalModuleNodes(i.map((a,s)=>{let l=t[s];return g(l,"External module missing a matching identifier"),{module:a,exportSpecifier:l.exportSpecifier}}),{onTreeUpdate(){}}).catch(lA)});K(this,"updatesPollId");K(this,"compileFastRefreshModule",async({localId:j,name:t,source:r,includeSourceMap:n=!0})=>{let{type:o,name:i}=mt(j);if(!ul.has(o))return;let a=o==="codeFile"?OA(t).source:i,{code:s,imports:l,sourceMap:k}=await k7({localId:j,source:r,name:a,includeSourceMap:n}),c={kind:"fast-refresh",localId:j,type:o,name:a,sourceContent:r,moduleContent:s,relativeImports:l.relative,sourceMapContent:k,binaryAssetContents:void 0,submoduleContents:{},update:0},[u,$]=jr(this.fastRefreshModules,E=>{E.set(t,c)});this.fastRefreshModules=u,this.fastRefreshModulesEmitter.emit({patches:$,dependentModules:[],prioritizedModules:[],revision:++this.revision,initialized:!0})});K(this,"compile",({localId:j,name:t,source:r,includeSourceMap:n=!0,type:o,telemetrySession:i})=>{let a=c7({name:t,source:r,includeSourceMap:n,type:o,telemetrySession:i});return this.fastRefreshEnabled&&j&&this.compileFastRefreshModule({localId:j,name:t,source:r,includeSourceMap:n}).catch(lA),a});this.modulesStorage=new pr(()=>this.modulesAPIServicePromise.catch(s=>{throw IA.error(s,{context:"Failed to discover ModulesAPI service:"}),s}),this.compile,s=>this.scheduler.process(s),s=>this.scheduler.processWhenReady(s),s=>this.scheduler.runWhenIdle(s),j,()=>this.getActiveScope(),()=>this.makeDocumentReadOnly()),this.fastRefreshModulesEmitter.onNewStream=s=>(IA.debug("onNewStream - fast refresh",s),{latest:this.getAllModulesAsUpdateEvent(!0)}),this.moduleUpdatesEmitter.onNewStream=s=>(IA.debug("onNewStream - module updates",s),{latest:this.getAllModulesAsUpdateEvent(!1)}),this.modulesStorage.subscribe(s=>{let l=s.dependenciesModule?.importMapContent,k=this.dependenciesModule?.importMapContent,c=!1,u=!1,$=!1,E=!1;if(l&&k&&l!==k){let x=JSON.parse(l),T=k?JSON.parse(k):void 0;for(let[F,J]of Object.entries(x.imports??{})){hA(this,ke).set(F,"success");let v=T?.imports?.[F];if(!v){c=!0;continue}v!==J&&(u=!0)}$=!u&&!c,E=s.metadata.multiplayerChange||u||$}E&&s.metadata.multiplayerChange,this.dependenciesModule=s.dependenciesModule,this.localModules=s.modules;let m=this.moduleDepsGraph;this.moduleDepsGraph=s.depsGraph;let d=s.metadata.patches,f=new Set,R=[],_=[],b;for(let x of d){let T=x.path[0];if(g(typeof T=="string"),T===aj){b=x;for(let F of s.modules.keys())f.add(F);break}x.op==="remove"&&x.path.length===1?_.push(T):R.push(T)}let G=new Set;if(!b){let x=this.getActiveScope(),T=ze(x);IA.debug("Calculated visible code component module typeSlashNames",T);for(let F of R)qj(s.depsGraph,F,f,T,G);for(let F of _)qj(m,F,f,T,G);R.forEach(F=>{f.delete(F)}),_.forEach(F=>{f.delete(F),G.delete(F)})}IA.debug("prioritized evaluation sending to sandbox",{dependentModules:f,visibleDependentModules:G},"highprio size",G.size,"dep size",f.size);let P={patches:d,dependentModules:Array.from(f),prioritizedModules:Array.from(G),revision:++this.revision,initialized:s.initialized};this.moduleUpdatesEmitter.emit(P),this.fastRefreshEnabled&&b&&this.fastRefreshModulesEmitter.emit({patches:[b],dependentModules:[],prioritizedModules:[],revision:P.revision,initialized:s.initialized})})}getActiveScope(){if(this.chromeStore.mainView===5)return;let j=this.treeStore.tree.getNode(hA(this,At));if(j)return g(j?.loaded,"Active scope node should be loaded"),j.loaded}setActiveScope(j){Jo(this,At,j)}getLatestDependencyGraph(){return this.moduleDepsGraph}initialize(){return this.initialized?this.modulesStorage.refresh():(this.setupPollingExternalModulesUpdates(),this.modulesStorage.initialize())}get initialized(){return this.modulesStorage.initialized}whenInitialized(){return this.modulesStorage.whenInitialized()}whenIdle(){return this.modulesStorage.whenIdle()}refresh(){return this.modulesStorage.refresh()}deleteModules(j){return this.modulesStorage.delete(j)}upsertBatch(j){return this.modulesStorage.upsertBatch(j)}forType(j){return new Br(this.modulesStorage,j,this.debugModuleStoreAndComponentLoaderRevisionsMatch)}getNpmDependencyInstallStatus(j){return hA(this,ke).get(De(j))??"unknown"}async addNpmDependencies(j){let r=typeof this.dependenciesModule>"u"&&!o7(),n=await U7(this.modulesStorage.addNpmDependencies(j)),o=Array.isArray(j)?j:[j],i=o.filter(({target:l})=>!Pe(l));for(let l of i)hA(this,ke).set(De(l),n.ok?"success":"failure");if(!n.ok)throw n.error;r&&i7();let a=Object.keys(n.value.dependenciesMap.dependencies),s=o.map(({target:l})=>l).filter(l=>!a.includes(l)&&Pe(l));if(s.length>0){let l=ol(s,{max:5,placeholder:"package"});BA({type:"add",variant:"warning",text:`${l} ${s.length===1?"is":"are"} incompatible with Framer`,duration:5e3})}return n.value}changeScope(j){this.setActiveScope(j.id),this.modulesStorage.changeScope(j)}async reinstallNpmDependencies(){return{importMap:await this.modulesStorage.reinstallNpmDependencies()}}async uninstallBlockedNpmDependencies(){return{importMap:await this.modulesStorage.uninstallBlockedNpmDependencies()}}async unsafeUpgradeDependency(j,t,r){return{importMap:await this.modulesStorage.unsafeUpgradeDependency(j,t,r)}}async clearNpmDependencies(){return this.modulesStorage.clearNpmDependencies()}async removeBlockedNpmDependencies(){return{dependenciesMap:await this.modulesStorage.removeBlockedNpmDependencies()}}async rebuildImportMapFromDependencies(){return{importMap:await this.modulesStorage.rebuildImportMapFromDependencies()}}async updateSources(j){return this.modulesStorage.updateSources(j)}async updateKit(...j){return await this.modulesStorage.whenInitialized(),this.modulesStorage.upsertKit(...j)}async listKits(){let j=await this.modulesAPIServicePromise;return g(j,"Modules API service not initialized correctly"),await j.kits()}async enqueueKitScreenshots(...j){return this.modulesStorage.enqueueKitScreenshots(...j)}async updateDependenciesSource(j,t){await this.modulesStorage.updateDependenciesSource(j,t)}getDependentsOfModule(j){return this.modulesStorage.getDependentsOfModule(j)}subscribeToModulesStorage(j){return this.modulesStorage.subscribe(j)}async getModuleDependencies(j){let t=await this.modulesAPIServicePromise;return g(t,"Modules API service not initialized correctly"),await t.getModuleDependencies(j)}getModuleEntryByLocalId(j){for(let t of this.localModules.values())if(t.localId===j)return t}getModuleEntryByUniqueName(j){for(let t of this.localModules.values())if(t.name===j)return t}getPersistedDependenciesModule(){return this.modulesStorage.getPersistedDependenciesModule()}getPersistedModuleByGlobalId(j){return this.modulesStorage.getPersistedModuleByGlobalId(j)}getPersistedModuleByLocalId(j){return this.modulesStorage.getPersistedModuleByLocalId(j)}getPersistedModuleByLocalIdentifier(j){let t=eA(j);if(bA(t))return this.getPersistedModuleByLocalId(t.localId)}tryConvertExternalCodeComponentIdentifierToLocal(j){let t=eA(j);if(t?.kind!=="externalModuleExport")return;let r=this.getPersistedModuleByGlobalId(t.moduleId);if(r)return pt(r.localId,t.exportSpecifier).value}async listNamespaces(){let j=await this.modulesAPIServicePromise;return g(j,"Modules API service not initialized correctly"),await j.listNamespaces()}async createNamespace(j,t){let r=await this.modulesAPIServicePromise;return g(r,"Modules API service not initialized correctly"),await r.createNamespace({ownerId:j,ownerType:t})}async lookUpModule(j,t){let{modules:r,dependencies:n}=await this.lookUpModules([j],t),o=r[0];g(o,"Module does not exist, looking up:",j);let i={module:o};return n&&(i.dependencies=n[o.ownerType]?.[o.ownerId]),i}async lookUpModules(j,t){let r=await this.modulesAPIServicePromise;if(!r)return IA.error("Modules API service not initialized correctly"),{modules:[],dependencies:{}};let{data:n,dependencies:o}=await r.lookUpModules({queries:j,...t}),i=new Map(this.externalModulesDynamicInfo);for(let s of n){let l=s.id,{localId:k,title:c,description:u,lastPublish:$,status:E}=s;i.set(l,{localId:k,title:c,description:u,lastPublish:$,status:E??i.get(l)?.status})}this.externalModulesDynamicInfo=i;let a={modules:n};return o&&(a.dependencies=o),a}trackExternalComponentInsert(j,t){let r=wt();for(let n of j)Ws({insertId:r,insertType:t,codeComponentId:n})}async installExternalModulesDependencies(j){let t=[],r=[];for(let n of j){let o=hA(this,jt).get(n);o?r.push(o):t.push(n)}if(t.length>0){let n=this.installDependenciesForModuleURLs(t);for(let o of t)hA(this,jt).set(o,n);r.push(n)}return Promise.allSettled(r).then(n=>{for(let o of n)o.status!=="fulfilled"&&IA.error("Failed to install external module",o.reason)})}isProcessingModules(){return this.modulesStorage.isProcessing()}hasLocalCodeFileChanges(){return this.modulesStorage.hasLocalCodeFileChanges()}resetModuleStateAndPermissions(j){this.modulesStorage.resetModuleStateAndPermissions(j)}getTransientSave(j){return this.modulesStorage.getTransientSave(j)}startUsingLocalModulesInTree(){return this.modulesStorage.startUsingLocalModulesInTree()}stopUsingLocalModulesInTree(){return this.modulesStorage.stopUsingLocalModulesInTree()}usingLocalModulesInTree(){return this.modulesStorage.usingLocalModulesInTree()}createFastRefreshModuleFromModule(j){if(ul.has(j.type)){if(j.kind==="server"){let t=this.getPersistedModuleByLocalId(j.localId);g(t?.kind==="server","Only server modules should have no sourceContent"),this.modulesStorage.createLocalModuleFromModule(t).catch(lA);return}this.compileFastRefreshModule({name:Y(j),localId:j.localId,source:j.sourceContent}).catch(lA)}}getModuleWithTypeSlashName(j){return this.modulesStorage.getModuleWithTypeSlashName(j)}waitForModulesToSave(){return this.modulesStorage.waitForModulesToSave()}installDependenciesForModuleURLs(j){return IA.info(`\u{1F986} Installing external modules:
	`,j.join(`
	`)),this.lookUpModules(j.map(t=>({url:t})),{includeDependencies:!0}).then(async({dependencies:t={}})=>{let r=Object.values(t).flatMap(i=>Object.values(i)),n,o;for(let{dependencies:i,importMap:a}of r)if(a){n=je(n??{imports:{}},a);let s=i??te(a);o=ee(o??{dependencies:{}},s)}n&&o&&await this.modulesStorage.extendCurrentImportMap(n,o)})}async addOrUpdateExternalVectors(j){await this.modulesStorage.whenInitialized();let{modules:t}=await this.lookUpModules(j.filter(o=>{let i=this.treeStore.tree.getNodeWithTrait(o.moduleId,xj);return i?eA(i.codeComponentIdentifier).saveId!==o.saveId:!0}),{includeDependencies:!1,includeStatus:!0}),r=new Map,n="default";for(let o of t){let i=$n({module:o,exportSpecifier:n}),a=this.treeStore.tree.getNodeWithTrait(o.id,xj);WA(a?.codeComponentIdentifier)&&eA(a.codeComponentIdentifier).saveId===o.saveId||r.set(i.value,{module:o,exportSpecifier:n})}await Promise.all(Array.from(r.keys(),o=>{let i=eA(o);return g(i,"Identifier must be a valid module identifier"),this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(i).catch(a=>{IA.error(`Failed to evaluate external module "${o}"`,a)})})),await new Promise((o,i)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes(Array.from(r.values()),{onTreeUpdate:()=>{let a=il(r.keys());sl(a,this.treeStore.getLoadedIndexes().codeComponents),ll(a,this.treeStore.tree),cl(a,this.treeStore.tree)},updateSave:!0}).then(o).catch(i)},{name:"update_external_module_version",runInBackground:!0})})}async addOrUpdateVectorSetAndVectors(j){await this.addOrUpdateExternalVectors([j]);let r=this.treeStore.tree.getNodeWithTrait(j.moduleId,xj)?.annotation("framerVectorSet");S6(r)&&await this.addOrUpdateExternalVectors(r.items.map(n=>({moduleId:n.moduleId,saveId:n.saveId??""})))}async addExternalModulesToProject(j,t){let r=j.map(o=>typeof o=="string"?eA(o):o),n=await this.preloadExternalModules(r);return this.updateExternalModuleNodes(n,t)}async preloadExternalModules(j){await this.modulesStorage.whenInitialized();let t=new Map;for(let s of j)t.set(s.bareValue,s);let r=[],n=[],o=[];for(let[s,l]of t){let{moduleId:k,saveId:c}=l;if(!!this.modulesStorage.getPersistedModuleByGlobalId(k)){IA.reportError("Attempted to treat local module as external module",{identifier:l});continue}let $=this.treeStore.tree.getNode(k);if($&&eA($.codeComponentIdentifier).saveId===c&&!this.loadedExternalModulesStore.hasModuleForIdentifier(l)){n.push(l);continue}let E=hA(this,Sj).get(s);if(E){o.push({identifier:l,preloadPromise:E});continue}hA(this,Sj).set(s,E6()),r.push(l)}let i=new Map;for(let{identifier:s,preloadPromise:l}of o)try{let k=await l;i.set(s.value,k)}catch{hA(this,Sj).set(s.bareValue,E6()),r.push(s)}if(r.length)try{let s=Array.from(r.values(),({moduleId:u,saveId:$})=>({moduleId:u,saveId:$})),{modules:l,dependencies:k}=await this.lookUpModules(s,{includeDependencies:!0,includeStatus:!0}),c=0;for(let u of r){let $=l[c++];g($,"Module must be defined"),i.set(u.value,{module:$,dependencies:k?.[$.ownerType]?.[$.ownerId],exportSpecifier:u.exportSpecifier}),n.push(u)}}catch(s){IA.reportError(s);for(let l of r)hA(this,Sj).get(l.bareValue)?.reject(s);throw Error(`Failed to preload modules: ${s}`)}let a;for(let s of n){let l=i.get(s.value);if(!l)continue;let{dependencies:k}=l;k?.importMap&&(a=je(a??{imports:{}},k.importMap))}a&&await this.insertTemporaryImportMap(a),await Promise.all(Array.from(n.values(),s=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(l=>{IA.error(`Failed to evaluate external module "${s.value}"`,l)})));for(let s of r){let l=i.get(s.value);g(l,"Expected to have module information for:",s.value);let k=hA(this,Sj).get(s.bareValue);g(k,"Expected to find a preload promise for:",s.bareValue),k.resolve(l)}return[...i.values()]}async updateExternalModuleNodes(j,{onTreeUpdate:t,updateSave:r=!1}){let n,o;for(let{dependencies:i}of j)if(i?.importMap){n=je(n??{imports:{}},i.importMap);let a=i.dependencies??te(i?.importMap);o=ee(o??{dependencies:{}},a)}return n&&!$a(n)&&o&&await this.modulesStorage.extendCurrentImportMap(n,o),await Promise.all(j.map(i=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox($n(i)))),this.scheduler.processWhenReadyAsync(()=>{if(this.treeStore.tree.isViewOnly)throw Error("unable to edit");for(let i of j){let{id:a,type:s,metadata:l,ownerId:k,ownerType:c}=i.module,u=$n(i),{title:$,status:E}=this.externalModulesDynamicInfo.get(u.moduleId)??i.module,m=this.treeStore.tree.getExternalModulesListNode();m||(m=new ya,this.treeStore.tree.insertNode(m,this.treeStore.tree.root.id)),g(Bi(m));let d=l.pluginId,f={codeComponentIdentifier:u.value,type:s,scopeNodeId:Ga(i.module),intrinsicWidth:kj(l.intrinsicWidth)??200,intrinsicHeight:kj(l.intrinsicHeight)??200,ownerId:k,ownerType:c,group:E?.group,updateSaveId:E?.updateSaveId,namespaceId:i.module.lastPublish?.namespaceId,pluginId:kA(d)?d:void 0},R=iA.componentForIdentifier(u.value);g(R,"Component not found in the component loader",u.value);let _=R.annotations??void 0;f.annotations=Ca(s)?re({default:_}).default:_;let b=R.name??$;f.title=b;let G=this.treeStore.tree.getNode(a);if(G)if(r)G.set(f);else{let{group:P,updateSaveId:x}=f;G.set({group:P,updateSaveId:x})}else G=new Ma({id:a,...f}),this.treeStore.tree.insertNode(G,m.id)}return t()})}setupPollingExternalModulesUpdates(){let j=vs(()=>{this.checkForExternalModuleUpdates().catch(IA.reportError)},1e4),t=()=>{j(),this.updatesPollId===void 0&&(this.updatesPollId=window.setInterval(this.checkForExternalModuleUpdates,6e4))},r=()=>{window.clearInterval(this.updatesPollId),this.updatesPollId=void 0};function n(){return!document.hidden&&navigator.onLine}n()&&t();function o(){setTimeout(()=>{n()?t():r()},500)}document.addEventListener("visibilitychange",o),window.addEventListener("offline",o),window.addEventListener("online",o)}getCodeComponentNodesForExternalModuleExport(j){return this.treeStore.getLoadedIndexes().codeComponents.filter(t=>{if(!cA(t)||yA(t)&&!t.isVectorInstance)return!1;let r=eA(t.codeComponentIdentifier);return r?.kind!=="externalModuleExport"?!1:r.moduleId===j.moduleId&&r.exportSpecifier===j.exportSpecifier})}get fastRefreshEnabled(){return this.chromeStore.codeEditorPreviewVisible}async updateExternalModuleComponentInstances(j){let t=eA(j);g(t?.kind==="externalModuleExport","parsed 'ExternalModuleNodes.id' should be of kind externalModuleExport");let{moduleId:r,exportSpecifier:n}=t,o=this.externalModulesDynamicInfo.get(r)?.status?.updateSaveId;if(!o){IA.warn("Could not update module",r,"latest status missing");return}let{module:i,dependencies:a}=await this.lookUpModule({moduleId:r,saveId:o},{includeDependencies:!0,includeStatus:!0});g(i.files.module,"Module file must be defined");let s=YA(r,o,i.files.module,n);try{await this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(IA.reportError),await new Promise((l,k)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes([{module:i,dependencies:a,exportSpecifier:n}],{onTreeUpdate:()=>{this.getCodeComponentNodesForExternalModuleExport(t).forEach(u=>u.set({codeComponentIdentifier:s.value})),rs(this.treeStore.tree,t.value,s.value),us(this.treeStore.tree,t.value,s.value)},updateSave:!0}).then(l).catch(k)},{name:"update_external_module_version",modalTitle:"Updating the module version"})}),this.trackExternalComponentInsert([s.value],"update")}catch(l){IA.reportError(l)}}async replaceRelativeImportsWithImportMapSpecifiers(j,t,r){let n={};for(let i of r){let a=Oj(i,j);if(!a)continue;let s;if(s=this.fastRefreshModules.get(a),s||(s=this.modulesStorage.getModuleWithTypeSlashName(a)),!s){IA.error("Cannot resolve",i,"from",j);continue}let l,{name:k,localId:c}=s;if(s.kind==="fast-refresh")l=OA(k).module;else{let{files:u}=s;g(kA(u.module),"Must have a module file name to build a local module import map specifier."),l=u.module}n[i]=Gt(c,l)}let o=await dr(t,n);return g(o.ok),o.value}getModules(j=!1){let t={};for(let[r,n]of this.localModules)t[r]=n;if(j)for(let[r,n]of this.fastRefreshModules)t[r]=n;return{dependenciesModule:this.dependenciesModule,modules:t,revision:this.revision,initialized:this.modulesStorage.initialized}}getAllModulesAsUpdateEvent(j=!1){let{dependenciesModule:t,modules:r,initialized:n,revision:o}=this.getModules(j),i=[];t&&i.push({op:"add",path:[`${t.type}/${t.name}`],value:t});for(let a of Object.values(r))i.push({op:"add",path:[`${a.type}/${a.name}`],value:a});return{patches:i,dependentModules:[],prioritizedModules:[],initialized:n,revision:o}}getModulesUpdatesService(j=!1){return{moduleUpdatesStream:()=>j?this.fastRefreshModulesEmitter.newStream({replay:"latest"}):this.moduleUpdatesEmitter.newStream({replay:"latest"})}}hasScreenModuleLoaded(j){let t=Xo("screen",j,"default").value;return iA.componentForIdentifier(t)!==null}postProcess(){this.modulesStorage.processTreeUpdates()}};ke=new WeakMap,At=new WeakMap,jt=new WeakMap,Sj=new WeakMap;var Ld={defaultComponent:{insert:"insert-default",drag:"insert-default-drag"},libraryModule:{insert:"insert-library",drag:"insert-library-drag"},externalModuleComponent:{insert:"insert",drag:"insert-drag"}},En="default_component_",mr="external_",Bn="local_",$l="legacy_design_component",El="legacy_code_component",Bl=`${Bn}${El}`,Kd=`${mr}${El}`,pl=`${Bn}${$l}`,ml=`${mr}${$l}`;var Jd=new Set(["form","frame","image-frame","stack","repeater"]),Hd=A=>A.startsWith(En),fl=A=>A===pl||A===ml,Qd=A=>Jd.has(A);function Gl({canvasNode:A,source:e,isDrag:j,engine:t}){let r=Ud(A,t);switch(qA("component_instance",{componentType:r.type,source:e}),e){case"insert_menu":{let n=Vd(r);qA("insert_menu_add",{type_added:n});break}}if(r.type==="local_module_canvasComponent_component"&&qA("component_canvas_instance",{componentId:A.id}),fl(r.type)&&qA("component_design_instance",{}),cA(A)&&ij(A.codeComponentIdentifier)){let n=r.type.startsWith(En)?"defaultComponent":e==="team_library"?"libraryModule":"externalModuleComponent",o=Ld[n][j?"drag":"insert"];t.stores.modulesStore.trackExternalComponentInsert([A.codeComponentIdentifier],o)}}function Ud(A,e){if(cA(A)){let r=A.codeComponentIdentifier,n=eA(r);if(!n)return{type:A.codeComponentIdentifier.startsWith(".")?Bl:Kd,codeComponentIdentifier:r};if(bA(n))return{type:`${Bn}module_${n.type}_component`,codeComponentIdentifier:r};if(ij(n)){let o=e.stores.treeStore.tree.getNode(n.moduleId);return Ar(e.stores.treeStore.tree,r)?{type:`${En}${o?.title}`,codeComponentIdentifier:r}:{type:`${mr}module_${o?.type??"unknown"}_component`,codeComponentIdentifier:r}}}let t=A.replicaInfo?.master&&e.tree.getNode(A.replicaInfo.master)||A;return Re(t)?si(t)?{type:ml}:{type:pl}:ki(A)?{type:"repeater"}:Vi(A)?{type:"form"}:ZA(A)?{type:"stack"}:ge(A)?A.fillType==="image"?{type:"image-frame"}:{type:"frame"}:{type:"unknown"}}function Vd({type:A}){return A.startsWith("local_module_")||A===Bl?"code_component":fl(A)?"design_component":A.startsWith(mr)?"package":Hd(A)||Qd(A)?A:"unknown"}function Fl(A,e){let j=A.children;return li(A)?!j||j.length===0?[]:e.getChildrenRects(A.id)??[]:null}function Rl(A,e,j){if(A>=e&&A<=j||A<=e&&A>=j)return 0;let t=Math.abs(e-A),r=Math.abs(j-A);return Math.min(t,r)}function Xd(A,e,j){let t=A?"y":"x",r=A?"height":"width",n=e[t],o=0,i=1/0;return j.forEach((a,s)=>{if(i===0)return;let l=a[t],k=l+a[r],c=Rl(n,l,k);c<i&&(o=s,i=c)}),o}function zd(A,e,j,t){let r=Math.max(A,j),n=Math.min(e,t);return r<n}function Wd(A,e,j){let t=A?"y":"x",r=A?"height":"width",n=j[e];g(n,"Out of bound access to childRects:",e,j);let o=n[t],i=o+n[r],a=new Set([e]);return j.forEach((s,l)=>{if(l===e)return;let k=s[t],c=k+s[r];zd(o,i,k,c)&&a.add(l)}),{startIndex:Math.min(...a),endIndex:Math.max(...a)}}function Yd(A,e,j,t,r,n){if(r)return t.startIndex;if(n)return t.endIndex;let o=e?"x":"y",i=e?"width":"height",a=A[o],s=1/0,l=t.startIndex;for(let k=t.startIndex;k<=t.endIndex;k++){let c=j[k];g(c,"Ouf of bound access to childRects:",k,t,j);let u=c[o],$=u+c[i],E=Rl(a,u,$);E<s&&(s=E,l=k)}return l}function Zd(A,e){let j=[];for(let t=e.startIndex;t<=e.endIndex;t++){let r=A[t];g(r,"Ouf of bound access to childRects:",t,e,A),j.push(r)}return EA.merge(...j)}function A$(A,e,j,t){let r=Ie(A)||A.resolveValue("stackDirection")==="horizontal",n=EA.merge(...e),o=r?"x":"y",i=r?"y":"x",a=r?"width":"height",s=r?"height":"width",l=j[o],k=j[i],c=n[i],u=c+n[s],$=k<c,E=!$&&k>u,m=Xd(r,j,e),d=Wd(r,m,e),f=Yd(j,r,e,d,$,E),R=e[f];g(R,"Closest rect is not defined:",f);let _=R[o]+R[a]/2,b=$||E?$:l<_,G=b?f:f+1;$&&(G=0),E&&(G=e.length);let P=R[o],x=P+R[a],T=b?P:x,F=null,J=b?f-1:f+1;if(J>=d.startIndex&&J<=d.endIndex){let z=e[J];if(z){let nA=z[o],p=nA+z[a];F=b?p:nA}}let v=T;TA(F)&&(v=Math.round((v+F)/2));let I=Zd(e,d),y=Math.round(I[i]+I[s]/2),S={[o]:v,[i]:y},w={...S},N={...S},V=t[s],W=Math.round(V/2);return r?(w.y-=W,N.y+=W):(w.x-=W,N.x+=W),{index:G,line:{a:w,b:N}}}function gl(A,e,j,t,r){if(g(e.length,"childInsertion only works correctly if there are more than 0 child rects"),Ie(A)||A.stackWrapEnabled)return A$(A,e,t,r);let n=1/0,o=null,i=A.stackDirection==="vertical";e.forEach((k,c)=>{let u=Math.abs(i?t.y-k.y:t.x-k.x);u>n||(n=u,o=c)});let a=0;if(o!==null){let k=e[o];g(k,"Closest child rect is not defined:",o);let c=EA.center(k);(i?t.y>c.y:t.x>c.x)&&o++,a=Math.min(Math.max(0,o),e.length)}let s=e$(A),l=t$(A.resolveValue("stackDirection"),A.resolveValue("stackAlignment"),s,j,e,a,r);return{index:j$(A,a),line:l}}function j$(A,e){g(jj(A),"A node must support children to consider an insertion index.");let j=e;for(let t=0;t<A.children.length&&t!==e;t++){let r=A.children[t];r&&(b6(r)||j++)}return j}function e$(A){let e=A.resolveValue("stackDirection"),j=A.resolveValue("stackAlignment");if(j==="center")return 0;let t=na(A);if(!t.perSide)return t.top;let r=j==="start";return e==="vertical"?r?t.left:t.right:r?t.top:t.bottom}function t$(A,e,j,t,r,n,o){let i=r[n-1],a=r[n],s=A==="vertical",l={x:t.width/2,y:t.height/2};if(!(!i&&!a)){if(r.length===1){let k=i||a;g(k,"Child rect must be defined"),n===0?s?l.y=k.y-10:l.x=k.x-10:s?l.y=k.y+k.height+10:l.x=k.x+k.width+10}else if(i&&a){let k=Math.abs(s?i.y+i.height-a.y:i.x+i.width-a.x);s?l.y=a.y-k/2:l.x=a.x-k/2}else if(i){let k=r[n-2];g(k,"Child rect must be defined");let c=Math.abs(s?k.y+k.height-i.y:k.x+k.width-i.x);s?l.y=i.y+i.height+c/2:l.x=i.x+i.width+c/2}else if(a){let k=r[n+1];g(k,"Child rect must be defined");let c=Math.abs(s?a.y+a.height-k.y:a.x+a.width-k.x);s?l.y=a.y-c/2:l.x=a.x-c/2}}return l.x=Math.min(Math.max(4,l.x),t.width-4),l.y=Math.min(Math.max(4,l.y),t.height-4),r$(A,e,j,l,t,o)}function r$(A,e,j,t,r,n){let o=A==="vertical",i,a,s=j??0;switch(e){case"center":i={x:o?t.x-n.width/2:t.x,y:o?t.y:t.y-n.height/2},a={x:o?t.x+n.width/2:t.x,y:o?t.y:t.y+n.height/2};break;case"start":i={x:o?s:t.x,y:o?t.y:s},a={x:o?n.width+s:t.x,y:o?t.y:n.height+s};break;case"end":default:i={x:o?r.width-n.width-s:t.x,y:o?t.y:r.height-n.height-s},a={x:o?r.width-s:t.x,y:o?t.y:r.height-s};break}return{a:i,b:a}}var Il=6;function n$(A,e){for(let j of A)if(e.includes(j))return!0;return!1}function o$(A,e,j,t,r){if(r.length===0||A.stackWrapEnabled||Dt(A)||yA(A))return null;let{tree:n}=e,{zoom:o}=e.stores.canvasStore,i=n.getParent(A.id);if(i&&ZA(i)&&(i.stackDirection!==A.stackDirection||i.stackWrapEnabled))return null;let a=n.convertPointToNode(A,j),s=n.getRect(A),l=A.stackDirection==="vertical",k=l?"x":"y",c=l?"y":"x",u=l?"width":"height",$=l?"height":"width",E=s[u],m=s[$],d=E*o,f=E*o;if(d<40||f<40)return null;let R=a[k],_=10/o,b=EA.merge(...r),G=b[k],P=G+b[u],x=Math.max(_,G/2),T=Math.max(_,(E-P)/2),F=R<=x,J=R>=E-T;if(!F&&!J)return null;let v=F?0:1,I=t[$],y=4/o,S=F?y:E-y,w=m/2,N=I/2,V=m/3,W=a[c],B="end";I>m?B="center":W<V?B="start":W<2*V&&(B="center");let z,nA;switch(B){case"start":{z=0,nA=I;break}case"end":{nA=m,z=nA-I;break}case"center":default:{z=w-N,nA=w+N;break}}let p={[k]:S,[c]:z},aA={[k]:S,[c]:nA},FA=n.convertPointToCanvas(A,p),UA=n.convertPointToCanvas(A,aA);return{insertionIndex:v,insertionLine:{a:FA,b:UA},wrap:{wrapAlignment:B}}}function pn(A,e,j,t,{allowWrapping:r=!0}={}){if(!jj(A))return{insertionIndex:null,insertionLine:null};let n=Fl(A,e.stores.layoutCache);if(!n)return{insertionIndex:null,insertionLine:null};if(ZA(A)&&r){let c=o$(A,e,j,t,n);if(c)return c}let o=e.tree,i=o.getRect(A),a=o.convertPointToNode(A,j);if(n.length===0)return{insertionIndex:0,insertionLine:null};let{index:s,line:l}=gl(A,n,i,a,t),k={a:o.convertPointToCanvas(A,l.a),b:o.convertPointToCanvas(A,l.b)};return{insertionIndex:s,insertionLine:k}}var i$={width:10,height:10};function hl(A,e,j,t,r,n=!1){g(j.length,"getStackOrGridInRange(): expects at least a single selected node");let o=A.stores.scopeStore.active;if(j.some(zi))return null;let a=A.tree.getNodesAtPoint(o,e).filter(k=>!(Ia(k)&&k.locked||!jj(k)||Gs(k)||Aa(A.tree,A.stores.overlayStore.activeOverlays,k))).reverse();if(t){let k=t.id,c=a.find(u=>u.id===k);if(c)return c}let s=null,l=j.map(k=>k.id);for(let k of a){if(!mi(k)||n&&!vA(k))continue;let c=A.tree.getAncestors(k.id);if(c.push(k.id),n$(c,l)||(s||(s=k),!he(k)))continue;let{insertionLine:$}=pn(k,A,e,i$);if(!$)continue;if($.a.x===$.b.x){if(Math.abs(e.x-$.a.x)*A.stores.canvasStore.zoom>Il)continue}else if($.a.y===$.b.y){if(Math.abs(e.y-$.a.y)*A.stores.canvasStore.zoom>Il)continue}else continue;if(j.every(m=>ye(A.tree,k,m,o.id,r)))return k}if(he(s)){let k=s;if(j.every(u=>ye(A.tree,k,u,o.id,r)))return s}return null}function bl(A,e,{wrapAlignment:j}){let t=hs.addStack(A,[e]);if(!t)return null;let r=A.tree.getNode(t);return!r||!ZA(r)?null:(r.set({stackDirection:e.stackDirection==="horizontal"?"vertical":"horizontal",stackAlignment:j}),r)}function mn(A,e){let{width:j,height:t}=A.tree.getRect(e);return _e(e)&&lj(e)&&(e.widthType===2&&e.width>0&&(j=e.width),e.heightType===2&&e.height>0&&(t=e.height)),{width:j,height:t}}function a$(A,e,j){let t=mn(A,e);return{...t,x:j.x-t.width/2,y:j.y-t.height/2}}function s$(A,e){let j=mn(A,e),t=A.stores.scopeStore.active,r=A.tree.getCommonGroundNode(A.stores.selectionStore.nodes),n,o;if(r){let a=A.tree.convertFrameToCanvas(r);n=EA.center(a).x-j.width/2,o=a.y}else if(tA(t)||wA(t)){let a=t.getPrimaryVariant(),s=A.tree.convertFrameToCanvas(a);n=EA.center(s).x-j.width/2,o=s.y}else{let a=A.stores.canvasStore.getCanvasCenter();n=a.x-j.width/2,o=a.y-j.height/2}let i={x:n,y:o};for(;;){let a={...j,...i},s=A.tree.getNodesInRect(t,a,!0);if(s.length===0)return a;let l=A.tree.getBoundingFrameForNodes(s);i.x=l.x-j.width-100}}function l$(A,e,j,t=!1){let{tree:r}=A,n=r.getPotentialParents(A.stores.scopeStore.active,A.stores.overlayStore.activeOverlays,EA.cornerPoints({...j,width:1,height:1}),j,iA,e);return t&&(n=n.filter(vA)),n=r.sortVisually(n).reverse(),n.length>0&&n[0]?n[0]:null}var Sl={width:1,widthType:1,heightType:2,left:0,right:null};function _l({engine:A,component:e,canvasPoint:j,source:t,type:r,shouldBecomeFullWidthForVariants:n=new Set,isLayoutSection:o=!1,notDraggedOntoCanvas:i=!1,insertAsGroundNode:a=!1,insertAsOverlayType:s,imageToUpload:l}){Gl({canvasNode:e,source:r==="libraryModule"?"team_library":t,isDrag:!0,engine:A});let{selectionStore:k,canvasStore:c,scopeStore:u}=A.stores,$=a?s$(A,e):a$(A,e,j);s===1&&qt(e)&&e.set({floatingPositionEnabled:!0,floatingPlacement:Wi,floatingAlignment:Yi,floatingOffsetX:0,floatingOffsetY:10});let E=Fs(A,e),m=hl(A,j,[E],null,iA,o);if(i&&o&&!m){let v=c.getCanvasVisibleRectTakingOverlaysIntoAccount(),I=k.ids.length===1&&k.ids[0]?A.tree.getNode(k.ids[0]):null,y=I?A.tree.getGroundNodeFor(I):null;he(y)&&EA.intersects(A.tree.convertFrameToCanvas(y),v)&&(m=y)}let d=m??l$(A,e,j,o),f=k.ids.length===0,R=u.active,_=Pt(R)?R.getPrimaryVariant():null;if(i&&o&&_&&f&&(d=_),s===1&&d&&qt(E)&&!vA(d)){g(d,"Parent should exist");let v=d.getPrimaryId(),I=fs(A.stores,"framer/useShowRelativeOverlay",v,E.draftOrCurrent());if(!I)return;A.tree.move(I.id,v);return}else qt(E)&&E.set(Xi);if(a&&(d=null,m=null,!EA.containsRect(c.getCanvasVisibleRectTakingOverlaysIntoAccount(),$))){let v=EA.center($),I=c.zoom,y=Math.min(I,1);c.scrollToCenter(v,{animate:!0,zoom:y})}let b=-1,G=null;if(d){Za(A,d,e,$),As(A,d,e);let v=d.draftOrCurrent();ZA(v)&&(m=v)}if(m){let v=mn(A,e),{insertionIndex:I,wrap:y}=pn(m,A,j,v);if(y&&(G=y),TA(I)&&(b=I),i&&o){if(b=m.children.length,k.ids.length===1){let VA=k.ids[0],XA=VA&&A.tree.getNode(VA);if(XA){let Yj=new Set([XA.id]);for(let Zj of XA.ancestors())Yj.add(Zj.id);let Bt=m.children.findIndex(Zj=>Yj.has(Zj.id));Bt>=0&&(b=Bt+1)}}let S,w=m.children[b-1];w?(S=A.tree.convertFrameToCanvas(w),S.y+=S.height):S=A.tree.convertFrameToCanvas(m),S.height=v.height;let N=A.tree.convertFrameToCanvas(m),V=Math.min(S.x,N.x),W=Math.max(EA.maxX(S),EA.maxX(N));S.x=V,S.width=W-V;let{zoom:B}=c,z=c.getCanvasVisibleRectTakingOverlaysIntoAccount(),nA=z.width*B,p=z.height*B,aA=40,FA=Math.max(nA-aA*2,100),UA=Math.max(p-aA*2,100),Mj=FA/(S.width||1),fA=UA/(S.height||1),Dj=Math.min(Mj,fA,.5),KA=EA.center(S);c.scrollToCenter(KA,{animate:!0,zoom:Dj})}js(A,m,e,$)}let P;if(d){let{width:v,height:I}=$;P={...A.tree.convertCanvasFrameToNode(d,$),width:v,height:I}}else P=$;let x=E.updateForRect({rect:P,parentSizeInfo:null,constraintsLocked:!1,shouldGuessPinToBottom:d?Qa(A.tree,E,d):!0,shouldGuessPinToRight:d?Ua(A.tree,E,d):!0});d&&ZA(d)&&lj(E)&&_e(E)&&(x=c$(E,x)),$7(E,x),E.set(x,A.tree);let T=E.id,F=!1,J=null;if(d){if(J=d,yi(d)&&(J=A.tree.getNode(d.originalid),F=!0,g(J,"Fail to insert node into variants: the original parent should exist")),G&&!yA(J)&&ZA(J)){let S=bl(A,J,G);if(!S)return;J=S}A.moveNode(E.id,J.id,b),F&&(g(yA(d),"Fail to insert node into variants: the new parent should be a replica node"),T=Xa(A,E,d,J));let v=A.tree.getGroundNodeFor(J),I=v.resolveValue("name"),y=!!(I&&n.has(I.toLowerCase()));if(ge(E)&&y&&E.set({left:0,width:1,widthType:1},A.tree),cA(E)&&Rj(v)&&vA(v)){let w={width:E.width,widthType:E.widthType,left:E.left,right:E.right};y&&E.set(Sl);let N=Wa(E);if(N){let V=A.tree.getScopeNodeFor(v);tA(V)&&V.getTopLevelReplicaVariants().forEach(B=>{let z=B.resolveValue("name");if(!z)return;let nA=Ya(z,N);if(!nA||nA===N.defaultVariant)return;let p={...B.replicaInfo.overrides},aA={...B.replicaInfo,overrides:p},FA={...p[E.id]},UA=k$(y,n,z,w);UA&&Object.assign(FA,UA),FA[Ct(N.key)]={type:"enum",value:nA},p[E.id]=FA,B.set({replicaInfo:aA})})}}Ie(d)&&Ji(E)&&(y||E.set({gridItemFillCellWidth:!0}),E.set({gridItemFillCellHeight:!0}))}l&&ge(e)&&ys(l,e,A).catch(lA),k.set(T,{switchToLayers:!0})}function k$(A,e,j,t){let r=e.has(j.toLowerCase());if(A!==r)return r?Sl:t}function c$(A,e){let j={...e};return(A.widthType===3||A.widthType===1)&&TA(e.width)&&e.widthType!==A.widthType&&(delete j.width,delete j.widthType),(A.heightType===3||A.heightType===1)&&TA(e.height)&&e.heightType!==A.heightType&&(delete j.height,delete j.heightType),j}function fr({engine:A,module:e,identifier:j,position:t,centerInParent:r,insertAsGroundNode:n,update:o}){let i={width:kj(e.metadata.intrinsicWidth)??200,height:kj(e.metadata.intrinsicHeight)??200},a=new ba({codeComponentIdentifier:j,slotsAreChildNodes:vj.isOn("componentSlotsAreChildNodes"),...i});o&&o(a);let s=t;if(r&&!n){let l=O7(a,A),k=l?EA.center(A.tree.convertFrameToCanvas(l)):null,c=A.stores.canvasStore.getCanvasVisibleRectTakingOverlaysIntoAccount();k&&EA.containsPoint(c,k)&&(s=k)}return _l({engine:A,component:a,canvasPoint:s,source:"context_menu",insertAsGroundNode:n}),a}var et=zA("unlinking");async function u$(A,e,j){let{codeEditorStore:t,selectionStore:r,treeStore:n}=A.stores;t.closeEditor();let[o]=r.nodes;if(r.nodes.length===1&&cA(o)&&o.codeComponentIdentifier===e)return!0;let i=await A.runWithFullyLoadedTreeAsync(()=>{for(let a of n.treeIndex.codeComponentNodeIds){let s=A.tree.getNodeWithTrait(a,cA);if(s?.codeComponentIdentifier===e)return s}},{runInBackground:!0,name:`findCodeComponentInstance: ${e}`});return i?(E7(A,i),!0):(BA({type:"add",variant:"info",key:"add-component-instance-to-edit-in-plugin",text:`Add this Component to Canvas to edit in ${j.name}`}),!1)}async function yl(A,e,j){return await u$(A,e,j)?(A.stores.pluginStore.openPlugin(j,A,{mode:"canvas"}),!0):!1}function Cl(A,e){let j=A.componentForIdentifier(e);if(j)return j;let t=eA(e);return!bA(t)||!WA(t)?null:A.componentForIdentifier(Vo(t))}var d$=0;async function Gr(A,e,j=d$){if(j===0){let r=eA(e),n=ds(A.stores.treeStore,A.stores.modulesStore,A.stores.pluginStore,r);if(n&&await yl(A,e,n))return}let t=Cl(iA,e);t&&A.stores.codeEditorStore.editFile(t.file)}async function Ml(A,{identifier:e,info:j,instance:t,enterIsolation:r,codeComponentIsolationMode:n}){let o=j.module.baseURL+j.module.files.source,a=await(await fetch(o)).text(),[s,l]=await Promise.all([u7(a),A.stores.modulesStore.getModuleDependencies(e)]);if(s.ok){let E=new Map;for(let d of s.value.relative){let f=Oj(d.specifier,`${j.module.type}/`);if(!f){et.warn("Failed to normalize relative import",d.specifier);continue}let R=E.get(f)??[];R.push(d),E.set(f,R)}let m;for(let d of l.imports){if(d.type!=="local")continue;let f=`${d.moduleType}/${d.moduleName}`,R=E.get(f);if(!R){et.warn("Unable to get source location of import",f,"when unlinking");continue}for(let _ of R){m||(m=a.split(`
`));let b=_.specifierLine;m[b]=m[b].replace(JSON.stringify(_.specifier),JSON.stringify(d.importURL))}}m&&(a=m.join(`
`))}let k=A.stores.modulesStore.forType("codeFile"),c=k.getUniqueName(j.module.name),u=await k.create({name:c,source:a,metadata:{pluginId:j.module.metadata.pluginId}}),$=ft(e,u).value;return t&&A.scheduler.processWhenReady(()=>{let E=A.tree.get(t.getPrimaryId());E&&E.set({codeComponentIdentifier:$})}),r&&(A.stores.chromeStore.contentPanelTab="Assets",Gr(A,$,n)),$}var Dl={canvasComponent:P7,codeFile:Ml};function E$(A){return kA(A)?A in Dl:!1}async function Gn(A,{identifier:e,moduleType:j,instance:t,enterIsolation:r=!0,codeComponentIsolationMode:n,renamedIds:o=new Map,isAutoDetach:i=!1}){if(!E$(j))throw Error(`Cannot import external module of type ${j}`);let[a]=await A.stores.modulesStore.preloadExternalModules([e]);g(a,"external module must exist on preload");let s={identifier:e,info:a,instance:t,enterIsolation:r,codeComponentIsolationMode:n,renamedIds:o,isAutoDetach:i},l=Dl[j],k=await l(A,s);if(!It(k))return!kA(k)&&wA(k)?{...a,codeComponentIdentifier:k.instanceIdentifier,node:k}:{...a,codeComponentIdentifier:k,node:void 0}}var fn=new Set;async function B$(A,e){let{instance:j,withUnlinkModal:t,...r}=e,n=Ar(A.stores.treeStore.tree,e.identifier),o=A.stores.insertSidebarStore.getEditBehavior(e.identifier.moduleId);if(t&&o!=="autoUnlink"&&(!n||Ss.isOn("openPrimaryForBuiltInModules"))){A.stores.modalStore.set({type:"UnlinkComponent",source:"edit_action",...r,nodeId:j?.id});return}if(!fn.has(e.identifier)){fn.add(e.identifier),A.scheduler.process(()=>{A.beginUndoGroup()});try{return(await Gn(A,{instance:j,enterIsolation:o!=="autoDetach",...r}))?.codeComponentIdentifier}catch(i){et.reportError(i),BA({type:"add",variant:"error",text:"Failed to unlink component",key:"external-component-unlink-error",icon:"error"})}finally{A.scheduler.processWhenReady(()=>{A.endUndoGroup()}),fn.delete(e.identifier)}}}async function hS(A,e){let{instance:j,moduleType:t,enterIsolation:r,codeComponentIsolationMode:n}=e;if(!cA(j))return;let o=await B$(A,{...e,enterIsolation:!1});if(!o)return;await cs(iA,[o],A.stores.modulesStore);let i=iA.componentForIdentifier(o);if(!i)return;let a=Is(i);a&&A.scheduler.processWhenReady(()=>{if(A.tree.getNodes(Array.from(A.stores.treeStore.treeIndex.codeComponentNodeIds)).forEach(l=>{if(!a||a.id===l.id||!cA(l)||l.codeComponentIdentifier!==j.codeComponentIdentifier||yA(l)||!Rs(l,{allowLockedNodes:!0}))return;let k=A.cloneNode(a,!1,!1);gs(A,l,k).catch(lA)}),!!r)if(t==="canvasComponent"){let l=Lt(o);l&&A.stores.scopeStore.select(l,{keepHistory:!1})}else t==="codeFile"&&Gr(A,o,n)})}var p$=zA("clipboard:modules");async function qS(A,e,j){if(!e||!fa(e))return!1;let t="insert-external-component";try{await f$({engine:A,moduleURL:e,position:j,centerInParent:!0,toastKey:t}),BA({type:"remove",key:t})}catch(r){console.error("Failed to insert external component",r),BA({type:"add",variant:"error",key:t,text:"Failed to insert external component",icon:"error"})}return!0}async function m$(A,e){let j=new URL(e),t=j.hash.substring(1).split(","),r=t[0]||"default",n=t.some((k,c)=>c>0&&k==="unlink"),{module:o}=await A.stores.modulesStore.lookUpModule({url:j.href}),i=o.id,a=A.stores.modulesStore.getPersistedModuleByGlobalId(i);g(o.files.module,"Module file must be defined");let s=YA(i,o.saveId,o.files.module,r),l=a?pt(a.localId,r):s;return{module:o,moduleIdentifier:l,externalIdentifier:s,insertUnlinked:n}}async function f$({engine:A,moduleURL:e,position:j,centerInParent:t,insertAsGroundNode:r,toastKey:n,update:o}){let{module:i,moduleIdentifier:a,externalIdentifier:s,insertUnlinked:l}=await m$(A,e);if(i.type==="screen")if(bA(a)){let k=Lt(a.value);if(!k)return;let c=A.tree.getNode(k);if(!tA(c))return;await A.loadScopesThenProcess([c],([u])=>{u&&v7(A,u,u.getPrimaryVariant())})}else n&&BA({type:"add",variant:"progress",key:n,text:"Inserting Web Page",icon:"reconnecting",duration:1/0,showCloseButton:"never"}),await x7(A,s);else if(l){n&&BA({type:"add",variant:"progress",key:n,text:"Inserting external component",icon:"reconnecting",duration:1/0,showCloseButton:"never"});let k=await Gn(A,{identifier:s,moduleType:i.type,enterIsolation:!1});await A.scheduler.processWhenReadyAsync(()=>{k&&fr({engine:A,module:i,identifier:k.codeComponentIdentifier,position:j,centerInParent:t,insertAsGroundNode:r,update:o})})}else{if(n&&BA({type:"add",variant:"progress",key:n,text:"Inserting external component",icon:"reconnecting",duration:1/0,showCloseButton:"never"}),!ij(a)){await A.scheduler.processWhenReadyAsync(()=>{fr({engine:A,module:i,identifier:a.value,position:j,centerInParent:t,insertAsGroundNode:r,update:o})});return}await A.stores.modulesStore.addExternalModulesToProject([a],{onTreeUpdate:()=>{if(fr({engine:A,module:i,identifier:a.value,position:j,centerInParent:t,insertAsGroundNode:r,update:o}),i.type!=="vector")return;let k=A.tree.getNodeWithTrait(i.id,xj)?.annotation("framerVector");Kt(k)&&A.stores.modulesStore.addOrUpdateVectorSetAndVectors({moduleId:k.set.moduleId,saveId:""}).catch(lA)}}).catch(p$.reportError),A.stores.modulesStore.trackExternalComponentInsert([a.value],"paste-url")}return i}function Pl(A,e){if(A.stores.projectStore.projectLicenseType===za())return A.stores.modalStore.set({type:"UpsellEnterprise",source:"upsell",description:"Sign up for an Enterprise plan to increase your file upload limit to 150MB and unlock other powerful features that help scale your site.",upsell:"file-limit-enterprise-upsell",upsellFeatures:["Advanced Permissions","Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]});let j=A.stores.projectStore.resourceLimits?.fileUploadLimitInMB;g(typeof j=="number","fileUploadLimitInMB is not a number");let t=j.toLocaleString()+"MB",r=(e/Os).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1})+"MB";return A.stores.modalStore.set({source:"upsell",type:"UpsellFeature",upsellFeature:"fileUploadLimitInMB",title:"File Upload Limit",description:`Your current plan limits file uploads to ${t}, and you\u2019re trying to upload a file that\u2019s ${r}. Upgrade your site to increase the limit and upload your file.`})}var xl=class{constructor(e,{concurrency:j=5,silent:t=!1}={}){this.engine=e;K(this,"uploads",new Map);K(this,"completed",0);K(this,"failed",0);K(this,"generating",!1);K(this,"resolveStatusUpdate");K(this,"limiter");K(this,"silent");this.limiter=new le(j),this.silent=t}add(e){return this.createTask(e,j=>j)()}createTask(e,j){let t=this.uploads.get(e);t||(t={task:async()=>{try{return typeof e=="string"?e.startsWith("data:")?await this.uploadFile(await _s(e,"imported")):await we.uploadAssetByURL(e,{silent:this.silent,refreshAssetService:!1}):await this.uploadFile(e)}catch(o){throw this.failed++,o}finally{this.completed++,this.resolveStatusUpdate?.()}}},this.uploads.set(e,t));let r=t;return async()=>{r.resultPromise||(r.resultPromise=this.limiter.run(r.task),this.resolveStatusUpdate?.());let n=await r.resultPromise;return this.engine.stores.assetStore.assetService?.addAssets([n.asset]),j(n)}}async uploadFile(e){let j=this.engine.stores.projectStore.resourceLimits?.fileUploadLimitInMB??void 0,t={silent:this.silent,maxFileSize:j,onExceedsCustomMaxSize:n=>Pl(this.engine,n),refreshAssetService:!1},r;if(e.type.startsWith("image/")?r=await we.uploadImage(e,t):e.type.startsWith("video/")?r=await we.uploadVideo(e,t):r=await we.uploadFile(e,t),!r)throw Error("Failed to upload file");return r}get active(){return[...this.uploads.values()].map(({resultPromise:e})=>e).filter(ht)}get status(){let{active:e,completed:j,failed:t}=this;return{started:e.length,completed:j,failed:t}}async*statusUpdates(){if(this.generating)throw Error("`statusUpdates` is in use by another call");for(this.generating=!0,yield this.status;this.completed<this.active.length;)await new Promise(e=>{this.resolveStatusUpdate=()=>{e(),this.resolveStatusUpdate=void 0}}),yield this.status;await this.engine.stores.assetStore.assetService?.refresh().catch(lA),this.generating=!1}async results(){let e=await Promise.allSettled(this.active).then(j=>j.filter(ei).map(t=>t.value));return await this.engine.stores.assetStore.assetService?.refresh().catch(lA),e}};var G$={}.hasOwnProperty;function Fn(A,e){let j=-1,t;if(e.extensions)for(;++j<e.extensions.length;)Fn(A,e.extensions[j]);for(t in e)if(G$.call(e,t))switch(t){case"extensions":break;case"unsafe":{vl(A[t],e[t]);break}case"join":{vl(A[t],e[t]);break}case"handlers":{F$(A[t],e[t]);break}default:A.options[t]=e[t]}return A}function vl(A,e){e&&A.push(...e)}function F$(A,e){e&&Object.assign(A,e)}function Ol(A,e,j,t){let r=j.enter("blockquote"),n=j.createTracker(t);n.move("> "),n.shift(2);let o=j.indentLines(j.containerFlow(A,n.current()),R$);return r(),o}function R$(A,e,j){return">"+(j?"":" ")+A}function Fr(A,e){return Tl(A,e.inConstruct,!0)&&!Tl(A,e.notInConstruct,!1)}function Tl(A,e,j){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return j;let t=-1;for(;++t<e.length;)if(A.includes(e[t]))return!0;return!1}function Rn(A,e,j,t){let r=-1;for(;++r<j.unsafe.length;)if(j.unsafe[r].character===`
`&&Fr(j.stack,j.unsafe[r]))return/[ \t]/.test(t.before)?"":" ";return`\\
`}function wl(A,e){let j=String(A),t=j.indexOf(e),r=t,n=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;t!==-1;)t===r?++n>o&&(o=n):n=1,r=t+e.length,t=j.indexOf(e,r);return o}function tt(A,e){return!!(e.options.fences===!1&&A.value&&!A.lang&&/[^ \r\n]/.test(A.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(A.value))}function ql(A){let e=A.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Nl(A,e,j,t){let r=ql(j),n=A.value||"",o=r==="`"?"GraveAccent":"Tilde";if(tt(A,j)){let k=j.enter("codeIndented"),c=j.indentLines(n,g$);return k(),c}let i=j.createTracker(t),a=r.repeat(Math.max(wl(n,r)+1,3)),s=j.enter("codeFenced"),l=i.move(a);if(A.lang){let k=j.enter(`codeFencedLang${o}`);l+=i.move(j.safe(A.lang,{before:l,after:" ",encode:["`"],...i.current()})),k()}if(A.lang&&A.meta){let k=j.enter(`codeFencedMeta${o}`);l+=i.move(" "),l+=i.move(j.safe(A.meta,{before:l,after:`
`,encode:["`"],...i.current()})),k()}return l+=i.move(`
`),n&&(l+=i.move(n+`
`)),l+=i.move(a),s(),l}function g$(A,e,j){return(j?"":"    ")+A}function ce(A){let e=A.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Ll(A,e,j,t){let r=ce(j),n=r==='"'?"Quote":"Apostrophe",o=j.enter("definition"),i=j.enter("label"),a=j.createTracker(t),s=a.move("[");return s+=a.move(j.safe(j.associationId(A),{before:s,after:"]",...a.current()})),s+=a.move("]: "),i(),!A.url||/[\0- \u007F]/.test(A.url)?(i=j.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(j.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=j.enter("destinationRaw"),s+=a.move(j.safe(A.url,{before:s,after:A.title?" ":`
`,...a.current()}))),i(),A.title&&(i=j.enter(`title${n}`),s+=a.move(" "+r),s+=a.move(j.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),o(),s}function Kl(A){let e=A.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}gn.peek=I$;function gn(A,e,j,t){let r=Kl(j),n=j.enter("emphasis"),o=j.createTracker(t),i=o.move(r);return i+=o.move(j.containerPhrasing(A,{before:i,after:r,...o.current()})),i+=o.move(r),n(),i}function I$(A,e,j){return j.options.emphasis||"*"}var h$={};function Kj(A,e){let j=e||h$,t=typeof j.includeImageAlt=="boolean"?j.includeImageAlt:!0,r=typeof j.includeHtml=="boolean"?j.includeHtml:!0;return Hl(A,t,r)}function Hl(A,e,j){if(b$(A)){if("value"in A)return A.type==="html"&&!j?"":A.value;if(e&&"alt"in A&&A.alt)return A.alt;if("children"in A)return Jl(A.children,e,j)}return Array.isArray(A)?Jl(A,e,j):""}function Jl(A,e,j){let t=[],r=-1;for(;++r<A.length;)t[r]=Hl(A[r],e,j);return t.join("")}function b$(A){return!!(A&&typeof A=="object")}function Rr(A,e){let j=!1;return xt(A,function(t){if("value"in t&&/\r?\n|\r/.test(t.value)||t.type==="break")return j=!0,Ti}),!!((!A.depth||A.depth<3)&&Kj(A)&&(e.options.setext||j))}function Ql(A,e,j,t){let r=Math.max(Math.min(6,A.depth||1),1),n=j.createTracker(t);if(Rr(A,j)){let l=j.enter("headingSetext"),k=j.enter("phrasing"),c=j.containerPhrasing(A,{...n.current(),before:`
`,after:`
`});return k(),l(),c+`
`+(r===1?"=":"-").repeat(c.length-(Math.max(c.lastIndexOf("\r"),c.lastIndexOf(`
`))+1))}let o="#".repeat(r),i=j.enter("headingAtx"),a=j.enter("phrasing");n.move(o+" ");let s=j.containerPhrasing(A,{before:"# ",after:`
`,...n.current()});return/^[\t ]/.test(s)&&(s="&#x"+s.charCodeAt(0).toString(16).toUpperCase()+";"+s.slice(1)),s=s?o+" "+s:o,j.options.closeAtx&&(s+=" "+o),a(),i(),s}In.peek=S$;function In(A){return A.value||""}function S$(){return"<"}hn.peek=_$;function hn(A,e,j,t){let r=ce(j),n=r==='"'?"Quote":"Apostrophe",o=j.enter("image"),i=j.enter("label"),a=j.createTracker(t),s=a.move("![");return s+=a.move(j.safe(A.alt,{before:s,after:"]",...a.current()})),s+=a.move("]("),i(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(i=j.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(j.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=j.enter("destinationRaw"),s+=a.move(j.safe(A.url,{before:s,after:A.title?" ":")",...a.current()}))),i(),A.title&&(i=j.enter(`title${n}`),s+=a.move(" "+r),s+=a.move(j.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),s+=a.move(")"),o(),s}function _$(){return"!"}bn.peek=y$;function bn(A,e,j,t){let r=A.referenceType,n=j.enter("imageReference"),o=j.enter("label"),i=j.createTracker(t),a=i.move("!["),s=j.safe(A.alt,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),o();let l=j.stack;j.stack=[],o=j.enter("reference");let k=j.safe(j.associationId(A),{before:a,after:"]",...i.current()});return o(),j.stack=l,n(),r==="full"||!s||s!==k?a+=i.move(k+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function y$(){return"!"}Sn.peek=C$;function Sn(A,e,j){let t=A.value||"",r="`",n=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(t);)r+="`";for(/[^ \r\n]/.test(t)&&(/^[ \r\n]/.test(t)&&/[ \r\n]$/.test(t)||/^`|`$/.test(t))&&(t=" "+t+" ");++n<j.unsafe.length;){let o=j.unsafe[n],i=j.compilePattern(o),a;if(o.atBreak)for(;a=i.exec(t);){let s=a.index;t.charCodeAt(s)===10&&t.charCodeAt(s-1)===13&&s--,t=t.slice(0,s)+" "+t.slice(a.index+1)}}return r+t+r}function C$(){return"`"}function _n(A,e){let j=Kj(A);return!!(!e.options.resourceLink&&A.url&&!A.title&&A.children&&A.children.length===1&&A.children[0].type==="text"&&(j===A.url||"mailto:"+j===A.url)&&/^[a-z][a-z+.-]+:/i.test(A.url)&&!/[\0- <>\u007F]/.test(A.url))}yn.peek=M$;function yn(A,e,j,t){let r=ce(j),n=r==='"'?"Quote":"Apostrophe",o=j.createTracker(t),i,a;if(_n(A,j)){let l=j.stack;j.stack=[],i=j.enter("autolink");let k=o.move("<");return k+=o.move(j.containerPhrasing(A,{before:k,after:">",...o.current()})),k+=o.move(">"),i(),j.stack=l,k}i=j.enter("link"),a=j.enter("label");let s=o.move("[");return s+=o.move(j.containerPhrasing(A,{before:s,after:"](",...o.current()})),s+=o.move("]("),a(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(a=j.enter("destinationLiteral"),s+=o.move("<"),s+=o.move(j.safe(A.url,{before:s,after:">",...o.current()})),s+=o.move(">")):(a=j.enter("destinationRaw"),s+=o.move(j.safe(A.url,{before:s,after:A.title?" ":")",...o.current()}))),a(),A.title&&(a=j.enter(`title${n}`),s+=o.move(" "+r),s+=o.move(j.safe(A.title,{before:s,after:r,...o.current()})),s+=o.move(r),a()),s+=o.move(")"),i(),s}function M$(A,e,j){return _n(A,j)?"<":"["}Cn.peek=D$;function Cn(A,e,j,t){let r=A.referenceType,n=j.enter("linkReference"),o=j.enter("label"),i=j.createTracker(t),a=i.move("["),s=j.containerPhrasing(A,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),o();let l=j.stack;j.stack=[],o=j.enter("reference");let k=j.safe(j.associationId(A),{before:a,after:"]",...i.current()});return o(),j.stack=l,n(),r==="full"||!s||s!==k?a+=i.move(k+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function D$(){return"["}function ue(A){let e=A.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Ul(A){let e=ue(A),j=A.options.bulletOther;if(!j)return e==="*"?"-":"*";if(j!=="*"&&j!=="+"&&j!=="-")throw new Error("Cannot serialize items with `"+j+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(j===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+j+"`) to be different");return j}function Vl(A){let e=A.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function gr(A){let e=A.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Xl(A,e,j,t){let r=j.enter("list"),n=j.bulletCurrent,o=A.ordered?Vl(j):ue(j),i=A.ordered?o==="."?")":".":Ul(j),a=e&&j.bulletLastUsed?o===j.bulletLastUsed:!1;if(!A.ordered){let l=A.children?A.children[0]:void 0;if((o==="*"||o==="-")&&l&&(!l.children||!l.children[0])&&j.stack[j.stack.length-1]==="list"&&j.stack[j.stack.length-2]==="listItem"&&j.stack[j.stack.length-3]==="list"&&j.stack[j.stack.length-4]==="listItem"&&j.indexStack[j.indexStack.length-1]===0&&j.indexStack[j.indexStack.length-2]===0&&j.indexStack[j.indexStack.length-3]===0&&(a=!0),gr(j)===o&&l){let k=-1;for(;++k<A.children.length;){let c=A.children[k];if(c&&c.type==="listItem"&&c.children&&c.children[0]&&c.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(o=i),j.bulletCurrent=o;let s=j.containerFlow(A,t);return j.bulletLastUsed=o,j.bulletCurrent=n,r(),s}function zl(A){let e=A.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Wl(A,e,j,t){let r=zl(j),n=j.bulletCurrent||ue(j);e&&e.type==="list"&&e.ordered&&(n=(typeof e.start=="number"&&e.start>-1?e.start:1)+(j.options.incrementListMarker===!1?0:e.children.indexOf(A))+n);let o=n.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||A.spread))&&(o=Math.ceil(o/4)*4);let i=j.createTracker(t);i.move(n+" ".repeat(o-n.length)),i.shift(o);let a=j.enter("listItem"),s=j.indentLines(j.containerFlow(A,i.current()),l);return a(),s;function l(k,c,u){return c?(u?"":" ".repeat(o))+k:(u?n:n+" ".repeat(o-n.length))+k}}function Yl(A,e,j,t){let r=j.enter("paragraph"),n=j.enter("phrasing"),o=j.containerPhrasing(A,t);return n(),r(),o}function Zl(A,e,j,t){return(A.children.some(function(o){return Ni(o)})?j.containerPhrasing:j.containerFlow).call(j,A,t)}function Ak(A){let e=A.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Mn.peek=P$;function Mn(A,e,j,t){let r=Ak(j),n=j.enter("strong"),o=j.createTracker(t),i=o.move(r+r);return i+=o.move(j.containerPhrasing(A,{before:i,after:r,...o.current()})),i+=o.move(r+r),n(),i}function P$(A,e,j){return j.options.strong||"*"}function jk(A,e,j,t){return j.safe(A.value,t)}function ek(A){let e=A.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function tk(A,e,j){let t=(gr(j)+(j.options.ruleSpaces?" ":"")).repeat(ek(j));return j.options.ruleSpaces?t.slice(0,-1):t}var $j={blockquote:Ol,break:Rn,code:Nl,definition:Ll,emphasis:gn,hardBreak:Rn,heading:Ql,html:In,image:hn,imageReference:bn,inlineCode:Sn,link:yn,linkReference:Cn,list:Xl,listItem:Wl,paragraph:Yl,root:Zl,strong:Mn,text:jk,thematicBreak:tk};var rk=[x$];function x$(A,e,j,t){if(e.type==="code"&&tt(e,t)&&(A.type==="list"||A.type===e.type&&tt(A,t)))return!1;if("spread"in j&&typeof j.spread=="boolean")return A.type==="paragraph"&&(A.type===e.type||e.type==="definition"||e.type==="heading"&&Rr(e,t))?void 0:j.spread?1:0}var Jj=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],nk=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Jj},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Jj},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Jj},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Jj},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Jj},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Jj},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Jj},{atBreak:!0,character:"~"}];var ok=document.createElement("i");function de(A){let e="&"+A+";";ok.innerHTML=e;let j=ok.textContent;return j.charCodeAt(j.length-1)===59&&A!=="semi"||j===e?!1:j}function Ir(A,e){let j=Number.parseInt(A,e);return j<9||j===11||j>13&&j<32||j>126&&j<160||j>55295&&j<57344||j>64975&&j<65008||(j&65535)===65535||(j&65535)===65534||j>1114111?"\uFFFD":String.fromCodePoint(j)}var v$=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function hr(A){return A.replace(v$,O$)}function O$(A,e,j){if(e)return e;if(j.charCodeAt(0)===35){let r=j.charCodeAt(1),n=r===120||r===88;return Ir(j.slice(n?2:1),n?16:10)}return de(j)||A}function ik(A){return A.label||!A.identifier?A.label||"":hr(A.identifier)}function ak(A){if(!A._compiled){let e=(A.atBreak?"[\\r\\n][\\t ]*":"")+(A.before?"(?:"+A.before+")":"");A._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(A.character)?"\\":"")+A.character+(A.after?"(?:"+A.after+")":""),"g")}return A._compiled}function sk(A,e,j){let t=e.indexStack,r=A.children||[],n=[],o=-1,i=j.before;t.push(-1);let a=e.createTracker(j);for(;++o<r.length;){let s=r[o],l;if(t[t.length-1]=o,o+1<r.length){let k=e.handle.handlers[r[o+1].type];k&&k.peek&&(k=k.peek),l=k?k(r[o+1],A,e,{before:"",after:"",...a.current()}).charAt(0):""}else l=j.after;n.length>0&&(i==="\r"||i===`
`)&&s.type==="html"&&(n[n.length-1]=n[n.length-1].replace(/(\r?\n|\r)$/," "),i=" ",a=e.createTracker(j),a.move(n.join(""))),n.push(a.move(e.handle(s,A,e,{...a.current(),before:i,after:l}))),i=n[n.length-1].slice(-1)}return t.pop(),n.join("")}function lk(A,e,j){let t=e.indexStack,r=A.children||[],n=e.createTracker(j),o=[],i=-1;for(t.push(-1);++i<r.length;){let a=r[i];t[t.length-1]=i,o.push(n.move(e.handle(a,A,e,{before:`
`,after:`
`,...n.current()}))),a.type!=="list"&&(e.bulletLastUsed=void 0),i<r.length-1&&o.push(n.move(T$(a,r[i+1],A,e)))}return t.pop(),o.join("")}function T$(A,e,j,t){let r=t.join.length;for(;r--;){let n=t.join[r](A,e,j,t);if(n===!0||n===1)break;if(typeof n=="number")return`
`.repeat(1+n);if(n===!1)return`

<!---->

`}return`

`}var w$=/\r?\n|\r/g;function kk(A,e){let j=[],t=0,r=0,n;for(;n=w$.exec(A);)o(A.slice(t,n.index)),j.push(n[0]),t=n.index+n[0].length,r++;return o(A.slice(t)),j.join("");function o(i){j.push(e(i,r,!i))}}function uk(A,e,j){let t=(j.before||"")+(e||"")+(j.after||""),r=[],n=[],o={},i=-1;for(;++i<A.unsafe.length;){let l=A.unsafe[i];if(!Fr(A.stack,l))continue;let k=A.compilePattern(l),c;for(;c=k.exec(t);){let u="before"in l||!!l.atBreak,$="after"in l,E=c.index+(u?c[1].length:0);r.includes(E)?(o[E].before&&!u&&(o[E].before=!1),o[E].after&&!$&&(o[E].after=!1)):(r.push(E),o[E]={before:u,after:$})}}r.sort(q$);let a=j.before?j.before.length:0,s=t.length-(j.after?j.after.length:0);for(i=-1;++i<r.length;){let l=r[i];l<a||l>=s||l+1<s&&r[i+1]===l+1&&o[l].after&&!o[l+1].before&&!o[l+1].after||r[i-1]===l-1&&o[l].before&&!o[l-1].before&&!o[l-1].after||(a!==l&&n.push(ck(t.slice(a,l),"\\")),a=l,/[!-/:-@[-`{-~]/.test(t.charAt(l))&&(!j.encode||!j.encode.includes(t.charAt(l)))?n.push("\\"):(n.push("&#x"+t.charCodeAt(l).toString(16).toUpperCase()+";"),a++))}return n.push(ck(t.slice(a,s),j.after)),n.join("")}function q$(A,e){return A-e}function ck(A,e){let j=/\\(?=[!-/:-@[-`{-~])/g,t=[],r=[],n=A+e,o=-1,i=0,a;for(;a=j.exec(n);)t.push(a.index);for(;++o<t.length;)i!==t[o]&&r.push(A.slice(i,t[o])),r.push("\\"),i=t[o];return r.push(A.slice(i)),r.join("")}function dk(A){let e=A||{},j=e.now||{},t=e.lineShift||0,r=j.line||1,n=j.column||1;return{move:a,current:o,shift:i};function o(){return{now:{line:r,column:n},lineShift:t}}function i(s){t+=s}function a(s){let l=s||"",k=l.split(/\r?\n|\r/g),c=k[k.length-1];return r+=k.length-1,n=k.length===1?n+c.length:1+c.length+t,l}}function Dn(A,e={}){let j={enter:r,indentLines:kk,associationId:ik,containerPhrasing:J$,containerFlow:H$,createTracker:dk,compilePattern:ak,safe:Q$,stack:[],unsafe:[...nk],join:[...rk],handlers:{...$j},options:{},indexStack:[],handle:void 0};Fn(j,e),j.options.tightDefinitions&&j.join.push(K$),j.handle=vt("type",{invalid:N$,unknown:L$,handlers:j.handlers});let t=j.handle(A,void 0,j,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return t&&t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t;function r(n){return j.stack.push(n),o;function o(){j.stack.pop()}}}function N$(A){throw new Error("Cannot handle value `"+A+"`, expected node")}function L$(A){let e=A;throw new Error("Cannot handle unknown node `"+e.type+"`")}function K$(A,e){if(A.type==="definition"&&A.type===e.type)return 0}function J$(A,e){return sk(A,this,e)}function H$(A,e){return lk(A,this,e)}function Q$(A,e){return uk(this,A,e)}var $k=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var U$=/["&'<>`]/g,V$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,X$=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,z$=/[|\\{}()[\]^$+*?.]/g,Ek=new WeakMap;function Bk(A,e){if(A=A.replace(e.subset?W$(e.subset):U$,t),e.subset||e.escapeOnly)return A;return A.replace(V$,j).replace(X$,t);function j(r,n,o){return e.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,o.charCodeAt(n+2),e)}function t(r,n,o){return e.format(r.charCodeAt(0),o.charCodeAt(n+1),e)}}function W$(A){let e=Ek.get(A);return e||(e=Y$(A),Ek.set(A,e)),e}function Y$(A){let e=[],j=-1;for(;++j<A.length;)e.push(A[j].replace(z$,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}var Z$=/[\dA-Fa-f]/;function pk(A,e,j){let t="&#x"+A.toString(16).toUpperCase();return j&&e&&!Z$.test(String.fromCharCode(e))?t:t+";"}var AE=/\d/;function mk(A,e,j){let t="&#"+String(A);return j&&e&&!AE.test(String.fromCharCode(e))?t:t+";"}var fk=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"];var br={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"};var Gk=["cent","copy","divide","gt","lt","not","para","times"];var Fk={}.hasOwnProperty,Pn={},Sr;for(Sr in br)Fk.call(br,Sr)&&(Pn[br[Sr]]=Sr);var jE=/[^\dA-Za-z]/;function Rk(A,e,j,t){let r=String.fromCharCode(A);if(Fk.call(Pn,r)){let n=Pn[r],o="&"+n;return j&&fk.includes(n)&&!Gk.includes(n)&&(!t||e&&e!==61&&jE.test(String.fromCharCode(e)))?o:o+";"}return""}function gk(A,e,j){let t=pk(A,e,j.omitOptionalSemicolons),r;if((j.useNamedReferences||j.useShortestReferences)&&(r=Rk(A,e,j.omitOptionalSemicolons,j.attribute)),(j.useShortestReferences||!r)&&j.useShortestReferences){let n=mk(A,e,j.omitOptionalSemicolons);n.length<t.length&&(t=n)}return r&&(!j.useShortestReferences||r.length<t.length)?r:t}function Ej(A,e){return Bk(A,Object.assign({format:gk},e))}var eE=/^>|^->|<!--|-->|--!>|<!-$/g,tE=[">"],rE=["<",">"];function Ik(A,e,j,t){return t.settings.bogusComments?"<?"+Ej(A.value,Object.assign({},t.settings.characterReferences,{subset:tE}))+">":"<!--"+A.value.replace(eE,r)+"-->";function r(n){return Ej(n,Object.assign({},t.settings.characterReferences,{subset:rE}))}}function hk(A,e,j,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}function $e(A,e){let j=String(A);if(typeof e!="string")throw new TypeError("Expected character");let t=0,r=j.indexOf(e);for(;r!==-1;)t++,r=j.indexOf(e,r+e.length);return t}var nE=/[ \t\n\f\r]/g;function Hj(A){return typeof A=="object"?A.type==="text"?bk(A.value):!1:bk(A)}function bk(A){return A.replace(nE,"")===""}var $A=Sk(1),xn=Sk(-1),oE=[];function Sk(A){return e;function e(j,t,r){let n=j?j.children:oE,o=(t||0)+A,i=n[o];if(!r)for(;i&&Hj(i);)o+=A,i=n[o];return i}}var iE={}.hasOwnProperty;function _r(A){return e;function e(j,t,r){return iE.call(A,j.tagName)&&A[j.tagName](j,t,r)}}var rt=_r({body:sE,caption:vn,colgroup:vn,dd:uE,dt:cE,head:vn,html:aE,li:kE,optgroup:dE,option:$E,p:lE,rp:_k,rt:_k,tbody:BE,td:yk,tfoot:pE,th:yk,thead:EE,tr:mE});function vn(A,e,j){let t=$A(j,e,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&Hj(t.value.charAt(0)))}function aE(A,e,j){let t=$A(j,e);return!t||t.type!=="comment"}function sE(A,e,j){let t=$A(j,e);return!t||t.type!=="comment"}function lE(A,e,j){let t=$A(j,e);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!j||!(j.type==="element"&&(j.tagName==="a"||j.tagName==="audio"||j.tagName==="del"||j.tagName==="ins"||j.tagName==="map"||j.tagName==="noscript"||j.tagName==="video"))}function kE(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&t.tagName==="li"}function cE(A,e,j){let t=$A(j,e);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function uE(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function _k(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function dE(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&t.tagName==="optgroup"}function $E(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function EE(A,e,j){let t=$A(j,e);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function BE(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function pE(A,e,j){return!$A(j,e)}function mE(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&t.tagName==="tr"}function yk(A,e,j){let t=$A(j,e);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}var Ck=_r({body:FE,colgroup:RE,head:GE,html:fE,tbody:gE});function fE(A){let e=$A(A,-1);return!e||e.type!=="comment"}function GE(A){let e=new Set;for(let t of A.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(e.has(t.tagName))return!1;e.add(t.tagName)}let j=A.children[0];return!j||j.type==="element"}function FE(A){let e=$A(A,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Hj(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function RE(A,e,j){let t=xn(j,e),r=$A(A,-1,!0);return j&&t&&t.type==="element"&&t.tagName==="colgroup"&&rt(t,j.children.indexOf(t),j)?!1:!!(r&&r.type==="element"&&r.tagName==="col")}function gE(A,e,j){let t=xn(j,e),r=$A(A,-1);return j&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&rt(t,j.children.indexOf(t),j)?!1:!!(r&&r.type==="element"&&r.tagName==="tr")}var yr={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Mk(A,e,j,t){let r=t.schema,n=r.space==="svg"?!1:t.settings.omitOptionalTags,o=r.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(A.tagName.toLowerCase()),i=[],a;r.space==="html"&&A.tagName==="svg"&&(t.schema=or);let s=IE(t,A.properties),l=t.all(r.space==="html"&&A.tagName==="template"?A.content:A);return t.schema=r,l&&(o=!1),(s||!n||!Ck(A,e,j))&&(i.push("<",A.tagName,s?" "+s:""),o&&(r.space==="svg"||t.settings.closeSelfClosing)&&(a=s.charAt(s.length-1),(!t.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&i.push(" "),i.push("/")),i.push(">")),i.push(l),!o&&(!n||!rt(A,e,j))&&i.push("</"+A.tagName+">"),i.join("")}function IE(A,e){let j=[],t=-1,r;if(e){for(r in e)if(e[r]!==null&&e[r]!==void 0){let n=hE(A,r,e[r]);n&&j.push(n)}}for(;++t<j.length;){let n=A.settings.tightAttributes?j[t].charAt(j[t].length-1):void 0;t!==j.length-1&&n!=='"'&&n!=="'"&&(j[t]+=" ")}return j.join("")}function hE(A,e,j){let t=K6(A.schema,e),r=A.settings.allowParseErrors&&A.schema.space==="html"?0:1,n=A.settings.allowDangerousCharacters?0:1,o=A.quote,i;if(t.overloadedBoolean&&(j===t.attribute||j==="")?j=!0:(t.boolean||t.overloadedBoolean)&&(typeof j!="string"||j===t.attribute||j==="")&&(j=!!j),j==null||j===!1||typeof j=="number"&&Number.isNaN(j))return"";let a=Ej(t.attribute,Object.assign({},A.settings.characterReferences,{subset:yr.name[r][n]}));return j===!0||(j=Array.isArray(j)?(t.commaSeparated?Ks:Js)(j,{padLeft:!A.settings.tightCommaSeparatedLists}):String(j),A.settings.collapseEmptyAttributes&&!j)?a:(A.settings.preferUnquoted&&(i=Ej(j,Object.assign({},A.settings.characterReferences,{attribute:!0,subset:yr.unquoted[r][n]}))),i!==j&&(A.settings.quoteSmart&&$e(j,o)>$e(j,A.alternative)&&(o=A.alternative),i=o+Ej(j,Object.assign({},A.settings.characterReferences,{subset:(o==="'"?yr.single:yr.double)[r][n],attribute:!0}))+o),a+(i&&"="+i))}var bE=["<","&"];function Cr(A,e,j,t){return j&&j.type==="element"&&(j.tagName==="script"||j.tagName==="style")?A.value:Ej(A.value,Object.assign({},t.settings.characterReferences,{subset:bE}))}function Dk(A,e,j,t){return t.settings.allowDangerousHtml?A.value:Cr(A,e,j,t)}function Pk(A,e,j,t){return t.all(A)}var xk=vt("type",{invalid:SE,unknown:_E,handlers:{comment:Ik,doctype:hk,element:Mk,raw:Dk,root:Pk,text:Cr}});function SE(A){throw new Error("Expected node, not `"+A+"`")}function _E(A){let e=A;throw new Error("Cannot compile unknown node `"+e.type+"`")}var yE={},CE={},ME=[];function On(A,e){let j=e||yE,t=j.quote||'"',r=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:DE,all:PE,settings:{omitOptionalTags:j.omitOptionalTags||!1,allowParseErrors:j.allowParseErrors||!1,allowDangerousCharacters:j.allowDangerousCharacters||!1,quoteSmart:j.quoteSmart||!1,preferUnquoted:j.preferUnquoted||!1,tightAttributes:j.tightAttributes||!1,upperDoctype:j.upperDoctype||!1,tightDoctype:j.tightDoctype||!1,bogusComments:j.bogusComments||!1,tightCommaSeparatedLists:j.tightCommaSeparatedLists||!1,tightSelfClosing:j.tightSelfClosing||!1,collapseEmptyAttributes:j.collapseEmptyAttributes||!1,allowDangerousHtml:j.allowDangerousHtml||!1,voids:j.voids||$k,characterReferences:j.characterReferences||CE,closeSelfClosing:j.closeSelfClosing||!1,closeEmptyElements:j.closeEmptyElements||!1},schema:j.space==="svg"?or:Ls,quote:t,alternative:r}.one(Array.isArray(A)?{type:"root",children:A}:A,void 0,void 0)}function DE(A,e,j){return xk(A,e,j,this)}function PE(A){let e=[],j=A&&A.children||ME,t=-1;for(;++t<j.length;)e[t]=this.one(j[t],t,A);return e.join("")}function Mr(A){let e=this,j={...e.data("settings"),...A};e.compiler=t;function t(r){return On(r,j)}}function Tn(A){if(typeof A!="string")throw new TypeError("Expected a string");return A.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function nt(A,e,j){let r=Oi((j||{}).ignore||[]),n=xE(e),o=-1;for(;++o<n.length;)wi(A,"text",i);function i(s,l){let k=-1,c;for(;++k<l.length;){let u=l[k],$=c?c.children:void 0;if(r(u,$?$.indexOf(u):void 0,c))return;c=u}if(c)return a(s,l)}function a(s,l){let k=l[l.length-1],c=n[o][0],u=n[o][1],$=0,m=k.children.indexOf(s),d=!1,f=[];c.lastIndex=0;let R=c.exec(s.value);for(;R;){let _=R.index,b={index:R.index,input:R.input,stack:[...l,s]},G=u(...R,b);if(typeof G=="string"&&(G=G.length>0?{type:"text",value:G}:void 0),G===!1?c.lastIndex=_+1:($!==_&&f.push({type:"text",value:s.value.slice($,_)}),Array.isArray(G)?f.push(...G):G&&f.push(G),$=_+R[0].length,d=!0),!c.global)break;R=c.exec(s.value)}return d?($<s.value.length&&f.push({type:"text",value:s.value.slice($)}),k.children.splice(m,1,...f)):f=[s],m+f.length}}function xE(A){let e=[];if(!Array.isArray(A))throw new TypeError("Expected find and replace tuple or list of tuples");let j=!A[0]||Array.isArray(A[0])?A:[A],t=-1;for(;++t<j.length;){let r=j[t];e.push([vE(r[0]),OE(r[1])])}return e}function vE(A){return typeof A=="string"?new RegExp(Tn(A),"g"):A}function OE(A){return typeof A=="function"?A:function(){return A}}function wn(A){nt(A,[/\r?\n|\r/g,TE])}function TE(){return{type:"break"}}function Dr(){return function(A){wn(A)}}var GA=_j(/[A-Za-z]/),dA=_j(/[\dA-Za-z]/),vk=_j(/[#-'*+\--9=?A-Z^-~]/);function Qj(A){return A!==null&&(A<32||A===127)}var ot=_j(/\d/),Ok=_j(/[\dA-Fa-f]/),Tk=_j(/[!-/:-@[-`{-~]/);function D(A){return A!==null&&A<-2}function U(A){return A!==null&&(A<0||A===32)}function L(A){return A===-2||A===-1||A===32}var Uj=_j(new RegExp("\\p{P}|\\p{S}","u")),ej=_j(/\s/);function _j(A){return e;function e(j){return j!==null&&j>-1&&A.test(String.fromCharCode(j))}}var qn="phrasing",Nn=["autolink","link","image","label"];function Kn(){return{transforms:[JE],enter:{literalAutolink:wE,literalAutolinkEmail:Ln,literalAutolinkHttp:Ln,literalAutolinkWww:Ln},exit:{literalAutolink:KE,literalAutolinkEmail:LE,literalAutolinkHttp:qE,literalAutolinkWww:NE}}}function Jn(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:qn,notInConstruct:Nn},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:qn,notInConstruct:Nn},{character:":",before:"[ps]",after:"\\/",inConstruct:qn,notInConstruct:Nn}]}}function wE(A){this.enter({type:"link",title:null,url:"",children:[]},A)}function Ln(A){this.config.enter.autolinkProtocol.call(this,A)}function qE(A){this.config.exit.autolinkProtocol.call(this,A)}function NE(A){this.config.exit.data.call(this,A);let e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(A)}function LE(A){this.config.exit.autolinkEmail.call(this,A)}function KE(A){this.exit(A)}function JE(A){nt(A,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,HE],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),QE]],{ignore:["link","linkReference"]})}function HE(A,e,j,t,r){let n="";if(!wk(r)||(/^w/i.test(e)&&(j=e+j,e="",n="http://"),!UE(j)))return!1;let o=VE(j+t);if(!o[0])return!1;let i={type:"link",title:null,url:n+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[i,{type:"text",value:o[1]}]:i}function QE(A,e,j,t){return!wk(t,!0)||/[-\d_]$/.test(j)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+j,children:[{type:"text",value:e+"@"+j}]}}function UE(A){let e=A.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function VE(A){let e=/[!"&'),.:;<>?\]}]+$/.exec(A);if(!e)return[A,void 0];A=A.slice(0,e.index);let j=e[0],t=j.indexOf(")"),r=$e(A,"("),n=$e(A,")");for(;t!==-1&&r>n;)A+=j.slice(0,t+1),j=j.slice(t+1),t=j.indexOf(")"),n++;return[A,j]}function wk(A,e){let j=A.input.charCodeAt(A.index-1);return(A.index===0||ej(j)||Uj(j))&&(!e||j!==47)}function SA(A){return A.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}qk.peek=tB;function XE(){this.buffer()}function zE(A){this.enter({type:"footnoteReference",identifier:"",label:""},A)}function WE(){this.buffer()}function YE(A){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},A)}function ZE(A){let e=this.resume(),j=this.stack[this.stack.length-1];j.type,j.identifier=SA(this.sliceSerialize(A)).toLowerCase(),j.label=e}function AB(A){this.exit(A)}function jB(A){let e=this.resume(),j=this.stack[this.stack.length-1];j.type,j.identifier=SA(this.sliceSerialize(A)).toLowerCase(),j.label=e}function eB(A){this.exit(A)}function tB(){return"["}function qk(A,e,j,t){let r=j.createTracker(t),n=r.move("[^"),o=j.enter("footnoteReference"),i=j.enter("reference");return n+=r.move(j.safe(j.associationId(A),{after:"]",before:n})),i(),o(),n+=r.move("]"),n}function Hn(){return{enter:{gfmFootnoteCallString:XE,gfmFootnoteCall:zE,gfmFootnoteDefinitionLabelString:WE,gfmFootnoteDefinition:YE},exit:{gfmFootnoteCallString:ZE,gfmFootnoteCall:AB,gfmFootnoteDefinitionLabelString:jB,gfmFootnoteDefinition:eB}}}function Qn(A){let e=!1;return A&&A.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:j,footnoteReference:qk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function j(t,r,n,o){let i=n.createTracker(o),a=i.move("[^"),s=n.enter("footnoteDefinition"),l=n.enter("label");return a+=i.move(n.safe(n.associationId(t),{before:a,after:"]"})),l(),a+=i.move("]:"),t.children&&t.children.length>0&&(i.shift(4),a+=i.move((e?`
`:" ")+n.indentLines(n.containerFlow(t,i.current()),e?Nk:rB))),s(),a}}function rB(A,e,j){return e===0?A:Nk(A,e,j)}function Nk(A,e,j){return(j?"":"    ")+A}var nB=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Lk.peek=aB;function Un(){return{canContainEols:["delete"],enter:{strikethrough:oB},exit:{strikethrough:iB}}}function Vn(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:nB}],handlers:{delete:Lk}}}function oB(A){this.enter({type:"delete",children:[]},A)}function iB(A){this.exit(A)}function Lk(A,e,j,t){let r=j.createTracker(t),n=j.enter("strikethrough"),o=r.move("~~");return o+=j.containerPhrasing(A,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),n(),o}function aB(){return"~"}function sB(A){return A.length}function Jk(A,e){let j=e||{},t=(j.align||[]).concat(),r=j.stringLength||sB,n=[],o=[],i=[],a=[],s=0,l=-1;for(;++l<A.length;){let E=[],m=[],d=-1;for(A[l].length>s&&(s=A[l].length);++d<A[l].length;){let f=lB(A[l][d]);if(j.alignDelimiters!==!1){let R=r(f);m[d]=R,(a[d]===void 0||R>a[d])&&(a[d]=R)}E.push(f)}o[l]=E,i[l]=m}let k=-1;if(typeof t=="object"&&"length"in t)for(;++k<s;)n[k]=Kk(t[k]);else{let E=Kk(t);for(;++k<s;)n[k]=E}k=-1;let c=[],u=[];for(;++k<s;){let E=n[k],m="",d="";E===99?(m=":",d=":"):E===108?m=":":E===114&&(d=":");let f=j.alignDelimiters===!1?1:Math.max(1,a[k]-m.length-d.length),R=m+"-".repeat(f)+d;j.alignDelimiters!==!1&&(f=m.length+f+d.length,f>a[k]&&(a[k]=f),u[k]=f),c[k]=R}o.splice(1,0,c),i.splice(1,0,u),l=-1;let $=[];for(;++l<o.length;){let E=o[l],m=i[l];k=-1;let d=[];for(;++k<s;){let f=E[k]||"",R="",_="";if(j.alignDelimiters!==!1){let b=a[k]-(m[k]||0),G=n[k];G===114?R=" ".repeat(b):G===99?b%2?(R=" ".repeat(b/2+.5),_=" ".repeat(b/2-.5)):(R=" ".repeat(b/2),_=R):_=" ".repeat(b)}j.delimiterStart!==!1&&!k&&d.push("|"),j.padding!==!1&&!(j.alignDelimiters===!1&&f==="")&&(j.delimiterStart!==!1||k)&&d.push(" "),j.alignDelimiters!==!1&&d.push(R),d.push(f),j.alignDelimiters!==!1&&d.push(_),j.padding!==!1&&d.push(" "),(j.delimiterEnd!==!1||k!==s-1)&&d.push("|")}$.push(j.delimiterEnd===!1?d.join("").replace(/ +$/,""):d.join(""))}return $.join(`
`)}function lB(A){return A==null?"":String(A)}function Kk(A){let e=typeof A=="string"?A.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function zn(){return{enter:{table:kB,tableData:Hk,tableHeader:Hk,tableRow:uB},exit:{codeText:dB,table:cB,tableData:Xn,tableHeader:Xn,tableRow:Xn}}}function kB(A){let e=A._align;this.enter({type:"table",align:e.map(function(j){return j==="none"?null:j}),children:[]},A),this.data.inTable=!0}function cB(A){this.exit(A),this.data.inTable=void 0}function uB(A){this.enter({type:"tableRow",children:[]},A)}function Xn(A){this.exit(A)}function Hk(A){this.enter({type:"tableCell",children:[]},A)}function dB(A){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,$B));let j=this.stack[this.stack.length-1];j.type,j.value=e,this.exit(A)}function $B(A,e){return e==="|"?e:A}function Wn(A){let e=A||{},j=e.tableCellPadding,t=e.tablePipeAlign,r=e.stringLength,n=j?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:c,table:o,tableCell:a,tableRow:i}};function o(u,$,E,m){return s(l(u,E,m),u.align)}function i(u,$,E,m){let d=k(u,E,m),f=s([d]);return f.slice(0,f.indexOf(`
`))}function a(u,$,E,m){let d=E.enter("tableCell"),f=E.enter("phrasing"),R=E.containerPhrasing(u,{...m,before:n,after:n});return f(),d(),R}function s(u,$){return Jk(u,{align:$,alignDelimiters:t,padding:j,stringLength:r})}function l(u,$,E){let m=u.children,d=-1,f=[],R=$.enter("table");for(;++d<m.length;)f[d]=k(m[d],$,E);return R(),f}function k(u,$,E){let m=u.children,d=-1,f=[],R=$.enter("tableRow");for(;++d<m.length;)f[d]=a(m[d],u,$,E);return R(),f}function c(u,$,E){let m=$j.inlineCode(u,$,E);return E.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function Yn(){return{exit:{taskListCheckValueChecked:Qk,taskListCheckValueUnchecked:Qk,paragraph:EB}}}function Zn(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:BB}}}function Qk(A){let e=this.stack[this.stack.length-2];e.type,e.checked=A.type==="taskListCheckValueChecked"}function EB(A){let e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){let j=this.stack[this.stack.length-1];j.type;let t=j.children[0];if(t&&t.type==="text"){let r=e.children,n=-1,o;for(;++n<r.length;){let i=r[n];if(i.type==="paragraph"){o=i;break}}o===j&&(t.value=t.value.slice(1),t.value.length===0?j.children.shift():j.position&&t.position&&typeof t.position.start.offset=="number"&&(t.position.start.column++,t.position.start.offset++,j.position.start=Object.assign({},t.position.start)))}}this.exit(A)}function BB(A,e,j,t){let r=A.children[0],n=typeof A.checked=="boolean"&&r&&r.type==="paragraph",o="["+(A.checked?"x":" ")+"] ",i=j.createTracker(t);n&&i.move(o);let a=$j.listItem(A,e,j,{...t,...i.current()});return n&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,s)),a;function s(l){return l+o}}function Ao(){return[Kn(),Hn(),Un(),zn(),Yn()]}function jo(A){return{extensions:[Jn(),Qn(A),Vn(),Wn(A),Zn()]}}function mA(A,e,j,t){let r=A.length,n=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,j=j>0?j:0,t.length<1e4)o=Array.from(t),o.unshift(e,j),A.splice(...o);else for(j&&A.splice(e,j);n<t.length;)o=t.slice(n,n+1e4),o.unshift(e,0),A.splice(...o),n+=1e4,e+=1e4}function CA(A,e){return A.length>0?(mA(A,A.length,0,e),A):e}var Uk={}.hasOwnProperty;function Pr(A){let e={},j=-1;for(;++j<A.length;)pB(e,A[j]);return e}function pB(A,e){let j;for(j in e){let r=(Uk.call(A,j)?A[j]:void 0)||(A[j]={}),n=e[j],o;if(n)for(o in n){Uk.call(r,o)||(r[o]=[]);let i=n[o];mB(r[o],Array.isArray(i)?i:i?[i]:[])}}}function mB(A,e){let j=-1,t=[];for(;++j<e.length;)(e[j].add==="after"?A:t).push(e[j]);mA(A,0,0,t)}var fB={tokenize:IB,partial:!0},Vk={tokenize:hB,partial:!0},Xk={tokenize:bB,partial:!0},zk={tokenize:SB,partial:!0},GB={tokenize:_B,partial:!0},Wk={name:"wwwAutolink",tokenize:RB,previous:Zk},Yk={name:"protocolAutolink",tokenize:gB,previous:Ac},Bj={name:"emailAutolink",tokenize:FB,previous:jc},tj={};function to(){return{text:tj}}var Vj=48;for(;Vj<123;)tj[Vj]=Bj,Vj++,Vj===58?Vj=65:Vj===91&&(Vj=97);tj[43]=Bj;tj[45]=Bj;tj[46]=Bj;tj[95]=Bj;tj[72]=[Bj,Yk];tj[104]=[Bj,Yk];tj[87]=[Bj,Wk];tj[119]=[Bj,Wk];function FB(A,e,j){let t=this,r,n;return o;function o(k){return!eo(k)||!jc.call(t,t.previous)||ro(t.events)?j(k):(A.enter("literalAutolink"),A.enter("literalAutolinkEmail"),i(k))}function i(k){return eo(k)?(A.consume(k),i):k===64?(A.consume(k),a):j(k)}function a(k){return k===46?A.check(GB,l,s)(k):k===45||k===95||dA(k)?(n=!0,A.consume(k),a):l(k)}function s(k){return A.consume(k),r=!0,a}function l(k){return n&&r&&GA(t.previous)?(A.exit("literalAutolinkEmail"),A.exit("literalAutolink"),e(k)):j(k)}}function RB(A,e,j){let t=this;return r;function r(o){return o!==87&&o!==119||!Zk.call(t,t.previous)||ro(t.events)?j(o):(A.enter("literalAutolink"),A.enter("literalAutolinkWww"),A.check(fB,A.attempt(Vk,A.attempt(Xk,n),j),j)(o))}function n(o){return A.exit("literalAutolinkWww"),A.exit("literalAutolink"),e(o)}}function gB(A,e,j){let t=this,r="",n=!1;return o;function o(k){return(k===72||k===104)&&Ac.call(t,t.previous)&&!ro(t.events)?(A.enter("literalAutolink"),A.enter("literalAutolinkHttp"),r+=String.fromCodePoint(k),A.consume(k),i):j(k)}function i(k){if(GA(k)&&r.length<5)return r+=String.fromCodePoint(k),A.consume(k),i;if(k===58){let c=r.toLowerCase();if(c==="http"||c==="https")return A.consume(k),a}return j(k)}function a(k){return k===47?(A.consume(k),n?s:(n=!0,a)):j(k)}function s(k){return k===null||Qj(k)||U(k)||ej(k)||Uj(k)?j(k):A.attempt(Vk,A.attempt(Xk,l),j)(k)}function l(k){return A.exit("literalAutolinkHttp"),A.exit("literalAutolink"),e(k)}}function IB(A,e,j){let t=0;return r;function r(o){return(o===87||o===119)&&t<3?(t++,A.consume(o),r):o===46&&t===3?(A.consume(o),n):j(o)}function n(o){return o===null?j(o):e(o)}}function hB(A,e,j){let t,r,n;return o;function o(s){return s===46||s===95?A.check(zk,a,i)(s):s===null||U(s)||ej(s)||s!==45&&Uj(s)?a(s):(n=!0,A.consume(s),o)}function i(s){return s===95?t=!0:(r=t,t=void 0),A.consume(s),o}function a(s){return r||t||!n?j(s):e(s)}}function bB(A,e){let j=0,t=0;return r;function r(o){return o===40?(j++,A.consume(o),r):o===41&&t<j?n(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?A.check(zk,e,n)(o):o===null||U(o)||ej(o)?e(o):(A.consume(o),r)}function n(o){return o===41&&t++,A.consume(o),r}}function SB(A,e,j){return t;function t(i){return i===33||i===34||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===63||i===95||i===126?(A.consume(i),t):i===38?(A.consume(i),n):i===93?(A.consume(i),r):i===60||i===null||U(i)||ej(i)?e(i):j(i)}function r(i){return i===null||i===40||i===91||U(i)||ej(i)?e(i):t(i)}function n(i){return GA(i)?o(i):j(i)}function o(i){return i===59?(A.consume(i),t):GA(i)?(A.consume(i),o):j(i)}}function _B(A,e,j){return t;function t(n){return A.consume(n),r}function r(n){return dA(n)?j(n):e(n)}}function Zk(A){return A===null||A===40||A===42||A===95||A===91||A===93||A===126||U(A)}function Ac(A){return!GA(A)}function jc(A){return!(A===47||eo(A))}function eo(A){return A===43||A===45||A===46||A===95||dA(A)}function ro(A){let e=A.length,j=!1;for(;e--;){let t=A[e][1];if((t.type==="labelLink"||t.type==="labelImage")&&!t._balanced){j=!0;break}if(t._gfmAutolinkLiteralWalkedInto){j=!1;break}}return A.length>0&&!j&&(A[A.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),j}function LA(A){let e=[],j=-1,t=0,r=0;for(;++j<A.length;){let n=A.charCodeAt(j),o="";if(n===37&&dA(A.charCodeAt(j+1))&&dA(A.charCodeAt(j+2)))r=2;else if(n<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(n))||(o=String.fromCharCode(n));else if(n>55295&&n<57344){let i=A.charCodeAt(j+1);n<56320&&i>56319&&i<57344?(o=String.fromCharCode(n,i),r=1):o="\uFFFD"}else o=String.fromCharCode(n);o&&(e.push(A.slice(t,j),encodeURIComponent(o)),t=j+r+1,o=""),r&&(j+=r,r=0)}return e.join("")+A.slice(t)}function Ee(A){if(A===null||U(A)||ej(A))return 1;if(Uj(A))return 2}function yj(A,e,j){let t=[],r=-1;for(;++r<A.length;){let n=A[r].resolveAll;n&&!t.includes(n)&&(e=n(e,j),t.push(n))}return e}var it={name:"attention",tokenize:CB,resolveAll:yB};function yB(A,e){let j=-1,t,r,n,o,i,a,s,l;for(;++j<A.length;)if(A[j][0]==="enter"&&A[j][1].type==="attentionSequence"&&A[j][1]._close){for(t=j;t--;)if(A[t][0]==="exit"&&A[t][1].type==="attentionSequence"&&A[t][1]._open&&e.sliceSerialize(A[t][1]).charCodeAt(0)===e.sliceSerialize(A[j][1]).charCodeAt(0)){if((A[t][1]._close||A[j][1]._open)&&(A[j][1].end.offset-A[j][1].start.offset)%3&&!((A[t][1].end.offset-A[t][1].start.offset+A[j][1].end.offset-A[j][1].start.offset)%3))continue;a=A[t][1].end.offset-A[t][1].start.offset>1&&A[j][1].end.offset-A[j][1].start.offset>1?2:1;let k=Object.assign({},A[t][1].end),c=Object.assign({},A[j][1].start);ec(k,-a),ec(c,a),o={type:a>1?"strongSequence":"emphasisSequence",start:k,end:Object.assign({},A[t][1].end)},i={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},A[j][1].start),end:c},n={type:a>1?"strongText":"emphasisText",start:Object.assign({},A[t][1].end),end:Object.assign({},A[j][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},i.end)},A[t][1].end=Object.assign({},o.start),A[j][1].start=Object.assign({},i.end),s=[],A[t][1].end.offset-A[t][1].start.offset&&(s=CA(s,[["enter",A[t][1],e],["exit",A[t][1],e]])),s=CA(s,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",n,e]]),s=CA(s,yj(e.parser.constructs.insideSpan.null,A.slice(t+1,j),e)),s=CA(s,[["exit",n,e],["enter",i,e],["exit",i,e],["exit",r,e]]),A[j][1].end.offset-A[j][1].start.offset?(l=2,s=CA(s,[["enter",A[j][1],e],["exit",A[j][1],e]])):l=0,mA(A,t-1,j-t+3,s),j=t+s.length-l-2;break}}for(j=-1;++j<A.length;)A[j][1].type==="attentionSequence"&&(A[j][1].type="data");return A}function CB(A,e){let j=this.parser.constructs.attentionMarkers.null,t=this.previous,r=Ee(t),n;return o;function o(a){return n=a,A.enter("attentionSequence"),i(a)}function i(a){if(a===n)return A.consume(a),i;let s=A.exit("attentionSequence"),l=Ee(a),k=!l||l===2&&r||j.includes(a),c=!r||r===2&&l||j.includes(t);return s._open=!!(n===42?k:k&&(r||!c)),s._close=!!(n===42?c:c&&(l||!k)),e(a)}}function ec(A,e){A.column+=e,A.offset+=e,A._bufferIndex+=e}var no={name:"autolink",tokenize:MB};function MB(A,e,j){let t=0;return r;function r(u){return A.enter("autolink"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.enter("autolinkProtocol"),n}function n(u){return GA(u)?(A.consume(u),o):u===64?j(u):s(u)}function o(u){return u===43||u===45||u===46||dA(u)?(t=1,i(u)):s(u)}function i(u){return u===58?(A.consume(u),t=0,a):(u===43||u===45||u===46||dA(u))&&t++<32?(A.consume(u),i):(t=0,s(u))}function a(u){return u===62?(A.exit("autolinkProtocol"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),e):u===null||u===32||u===60||Qj(u)?j(u):(A.consume(u),a)}function s(u){return u===64?(A.consume(u),l):vk(u)?(A.consume(u),s):j(u)}function l(u){return dA(u)?k(u):j(u)}function k(u){return u===46?(A.consume(u),t=0,l):u===62?(A.exit("autolinkProtocol").type="autolinkEmail",A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),e):c(u)}function c(u){if((u===45||dA(u))&&t++<63){let $=u===45?c:k;return A.consume(u),$}return j(u)}}function q(A,e,j,t){let r=t?t-1:Number.POSITIVE_INFINITY,n=0;return o;function o(a){return L(a)?(A.enter(j),i(a)):e(a)}function i(a){return L(a)&&n++<r?(A.consume(a),i):(A.exit(j),e(a))}}var rj={tokenize:DB,partial:!0};function DB(A,e,j){return t;function t(n){return L(n)?q(A,r,"linePrefix")(n):r(n)}function r(n){return n===null||D(n)?e(n):j(n)}}var xr={name:"blockQuote",tokenize:PB,continuation:{tokenize:xB},exit:vB};function PB(A,e,j){let t=this;return r;function r(o){if(o===62){let i=t.containerState;return i.open||(A.enter("blockQuote",{_container:!0}),i.open=!0),A.enter("blockQuotePrefix"),A.enter("blockQuoteMarker"),A.consume(o),A.exit("blockQuoteMarker"),n}return j(o)}function n(o){return L(o)?(A.enter("blockQuotePrefixWhitespace"),A.consume(o),A.exit("blockQuotePrefixWhitespace"),A.exit("blockQuotePrefix"),e):(A.exit("blockQuotePrefix"),e(o))}}function xB(A,e,j){let t=this;return r;function r(o){return L(o)?q(A,n,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):n(o)}function n(o){return A.attempt(xr,e,j)(o)}}function vB(A){A.exit("blockQuote")}var vr={name:"characterEscape",tokenize:OB};function OB(A,e,j){return t;function t(n){return A.enter("characterEscape"),A.enter("escapeMarker"),A.consume(n),A.exit("escapeMarker"),r}function r(n){return Tk(n)?(A.enter("characterEscapeValue"),A.consume(n),A.exit("characterEscapeValue"),A.exit("characterEscape"),e):j(n)}}var Or={name:"characterReference",tokenize:TB};function TB(A,e,j){let t=this,r=0,n,o;return i;function i(k){return A.enter("characterReference"),A.enter("characterReferenceMarker"),A.consume(k),A.exit("characterReferenceMarker"),a}function a(k){return k===35?(A.enter("characterReferenceMarkerNumeric"),A.consume(k),A.exit("characterReferenceMarkerNumeric"),s):(A.enter("characterReferenceValue"),n=31,o=dA,l(k))}function s(k){return k===88||k===120?(A.enter("characterReferenceMarkerHexadecimal"),A.consume(k),A.exit("characterReferenceMarkerHexadecimal"),A.enter("characterReferenceValue"),n=6,o=Ok,l):(A.enter("characterReferenceValue"),n=7,o=ot,l(k))}function l(k){if(k===59&&r){let c=A.exit("characterReferenceValue");return o===dA&&!de(t.sliceSerialize(c))?j(k):(A.enter("characterReferenceMarker"),A.consume(k),A.exit("characterReferenceMarker"),A.exit("characterReference"),e)}return o(k)&&r++<n?(A.consume(k),l):j(k)}}var tc={tokenize:qB,partial:!0},Tr={name:"codeFenced",tokenize:wB,concrete:!0};function wB(A,e,j){let t=this,r={tokenize:b,partial:!0},n=0,o=0,i;return a;function a(G){return s(G)}function s(G){let P=t.events[t.events.length-1];return n=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,i=G,A.enter("codeFenced"),A.enter("codeFencedFence"),A.enter("codeFencedFenceSequence"),l(G)}function l(G){return G===i?(o++,A.consume(G),l):o<3?j(G):(A.exit("codeFencedFenceSequence"),L(G)?q(A,k,"whitespace")(G):k(G))}function k(G){return G===null||D(G)?(A.exit("codeFencedFence"),t.interrupt?e(G):A.check(tc,E,_)(G)):(A.enter("codeFencedFenceInfo"),A.enter("chunkString",{contentType:"string"}),c(G))}function c(G){return G===null||D(G)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),k(G)):L(G)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),q(A,u,"whitespace")(G)):G===96&&G===i?j(G):(A.consume(G),c)}function u(G){return G===null||D(G)?k(G):(A.enter("codeFencedFenceMeta"),A.enter("chunkString",{contentType:"string"}),$(G))}function $(G){return G===null||D(G)?(A.exit("chunkString"),A.exit("codeFencedFenceMeta"),k(G)):G===96&&G===i?j(G):(A.consume(G),$)}function E(G){return A.attempt(r,_,m)(G)}function m(G){return A.enter("lineEnding"),A.consume(G),A.exit("lineEnding"),d}function d(G){return n>0&&L(G)?q(A,f,"linePrefix",n+1)(G):f(G)}function f(G){return G===null||D(G)?A.check(tc,E,_)(G):(A.enter("codeFlowValue"),R(G))}function R(G){return G===null||D(G)?(A.exit("codeFlowValue"),f(G)):(A.consume(G),R)}function _(G){return A.exit("codeFenced"),e(G)}function b(G,P,x){let T=0;return F;function F(S){return G.enter("lineEnding"),G.consume(S),G.exit("lineEnding"),J}function J(S){return G.enter("codeFencedFence"),L(S)?q(G,v,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):v(S)}function v(S){return S===i?(G.enter("codeFencedFenceSequence"),I(S)):x(S)}function I(S){return S===i?(T++,G.consume(S),I):T>=o?(G.exit("codeFencedFenceSequence"),L(S)?q(G,y,"whitespace")(S):y(S)):x(S)}function y(S){return S===null||D(S)?(G.exit("codeFencedFence"),P(S)):x(S)}}}function qB(A,e,j){let t=this;return r;function r(o){return o===null?j(o):(A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),n)}function n(o){return t.parser.lazy[t.now().line]?j(o):e(o)}}var at={name:"codeIndented",tokenize:LB},NB={tokenize:KB,partial:!0};function LB(A,e,j){let t=this;return r;function r(s){return A.enter("codeIndented"),q(A,n,"linePrefix",5)(s)}function n(s){let l=t.events[t.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?o(s):j(s)}function o(s){return s===null?a(s):D(s)?A.attempt(NB,o,a)(s):(A.enter("codeFlowValue"),i(s))}function i(s){return s===null||D(s)?(A.exit("codeFlowValue"),o(s)):(A.consume(s),i)}function a(s){return A.exit("codeIndented"),e(s)}}function KB(A,e,j){let t=this;return r;function r(o){return t.parser.lazy[t.now().line]?j(o):D(o)?(A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),r):q(A,n,"linePrefix",5)(o)}function n(o){let i=t.events[t.events.length-1];return i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(o):D(o)?r(o):j(o)}}var oo={name:"codeText",tokenize:QB,resolve:JB,previous:HB};function JB(A){let e=A.length-4,j=3,t,r;if((A[j][1].type==="lineEnding"||A[j][1].type==="space")&&(A[e][1].type==="lineEnding"||A[e][1].type==="space")){for(t=j;++t<e;)if(A[t][1].type==="codeTextData"){A[j][1].type="codeTextPadding",A[e][1].type="codeTextPadding",j+=2,e-=2;break}}for(t=j-1,e++;++t<=e;)r===void 0?t!==e&&A[t][1].type!=="lineEnding"&&(r=t):(t===e||A[t][1].type==="lineEnding")&&(A[r][1].type="codeTextData",t!==r+2&&(A[r][1].end=A[t-1][1].end,A.splice(r+2,t-r-2),e-=t-r-2,t=r+2),r=void 0);return A}function HB(A){return A!==96||this.events[this.events.length-1][1].type==="characterEscape"}function QB(A,e,j){let t=this,r=0,n,o;return i;function i(c){return A.enter("codeText"),A.enter("codeTextSequence"),a(c)}function a(c){return c===96?(A.consume(c),r++,a):(A.exit("codeTextSequence"),s(c))}function s(c){return c===null?j(c):c===32?(A.enter("space"),A.consume(c),A.exit("space"),s):c===96?(o=A.enter("codeTextSequence"),n=0,k(c)):D(c)?(A.enter("lineEnding"),A.consume(c),A.exit("lineEnding"),s):(A.enter("codeTextData"),l(c))}function l(c){return c===null||c===32||c===96||D(c)?(A.exit("codeTextData"),s(c)):(A.consume(c),l)}function k(c){return c===96?(A.consume(c),n++,k):n===r?(A.exit("codeTextSequence"),A.exit("codeText"),e(c)):(o.type="codeTextData",l(c))}}var wr=class{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,j){let t=j??Number.POSITIVE_INFINITY;return t<this.left.length?this.left.slice(e,t):e>this.left.length?this.right.slice(this.right.length-t+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-t+this.left.length).reverse())}splice(e,j,t){let r=j||0;this.setCursor(Math.trunc(e));let n=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return t&&st(this.left,t),n.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),st(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),st(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let j=this.left.splice(e,Number.POSITIVE_INFINITY);st(this.right,j.reverse())}else{let j=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);st(this.left,j.reverse())}}};function st(A,e){let j=0;if(e.length<1e4)A.push(...e);else for(;j<e.length;)A.push(...e.slice(j,j+1e4)),j+=1e4}function qr(A){let e={},j=-1,t,r,n,o,i,a,s,l=new wr(A);for(;++j<l.length;){for(;j in e;)j=e[j];if(t=l.get(j),j&&t[1].type==="chunkFlow"&&l.get(j-1)[1].type==="listItemPrefix"&&(a=t[1]._tokenizer.events,n=0,n<a.length&&a[n][1].type==="lineEndingBlank"&&(n+=2),n<a.length&&a[n][1].type==="content"))for(;++n<a.length&&a[n][1].type!=="content";)a[n][1].type==="chunkText"&&(a[n][1]._isInFirstContentOfListItem=!0,n++);if(t[0]==="enter")t[1].contentType&&(Object.assign(e,UB(l,j)),j=e[j],s=!0);else if(t[1]._container){for(n=j,r=void 0;n--&&(o=l.get(n),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(r&&(l.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=n);r&&(t[1].end=Object.assign({},l.get(r)[1].start),i=l.slice(r,j),i.unshift(t),l.splice(r,j-r+1,i))}}return mA(A,0,Number.POSITIVE_INFINITY,l.slice(0)),!s}function UB(A,e){let j=A.get(e)[1],t=A.get(e)[2],r=e-1,n=[],o=j._tokenizer||t.parser[j.contentType](j.start),i=o.events,a=[],s={},l,k,c=-1,u=j,$=0,E=0,m=[E];for(;u;){for(;A.get(++r)[1]!==u;);n.push(r),u._tokenizer||(l=t.sliceStream(u),u.next||l.push(null),k&&o.defineSkip(u.start),u._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(l),u._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),k=u,u=u.next}for(u=j;++c<i.length;)i[c][0]==="exit"&&i[c-1][0]==="enter"&&i[c][1].type===i[c-1][1].type&&i[c][1].start.line!==i[c][1].end.line&&(E=c+1,m.push(E),u._tokenizer=void 0,u.previous=void 0,u=u.next);for(o.events=[],u?(u._tokenizer=void 0,u.previous=void 0):m.pop(),c=m.length;c--;){let d=i.slice(m[c],m[c+1]),f=n.pop();a.push([f,f+d.length-1]),A.splice(f,2,d)}for(a.reverse(),c=-1;++c<a.length;)s[$+a[c][0]]=$+a[c][1],$+=a[c][1]-a[c][0]-1;return s}var io={tokenize:zB,resolve:XB},VB={tokenize:WB,partial:!0};function XB(A){return qr(A),A}function zB(A,e){let j;return t;function t(i){return A.enter("content"),j=A.enter("chunkContent",{contentType:"content"}),r(i)}function r(i){return i===null?n(i):D(i)?A.check(VB,o,n)(i):(A.consume(i),r)}function n(i){return A.exit("chunkContent"),A.exit("content"),e(i)}function o(i){return A.consume(i),A.exit("chunkContent"),j.next=A.enter("chunkContent",{contentType:"content",previous:j}),j=j.next,r}}function WB(A,e,j){let t=this;return r;function r(o){return A.exit("chunkContent"),A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),q(A,n,"linePrefix")}function n(o){if(o===null||D(o))return j(o);let i=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(o):A.interrupt(t.parser.constructs.flow,j,e)(o)}}function Nr(A,e,j,t,r,n,o,i,a){let s=a||Number.POSITIVE_INFINITY,l=0;return k;function k(d){return d===60?(A.enter(t),A.enter(r),A.enter(n),A.consume(d),A.exit(n),c):d===null||d===32||d===41||Qj(d)?j(d):(A.enter(t),A.enter(o),A.enter(i),A.enter("chunkString",{contentType:"string"}),E(d))}function c(d){return d===62?(A.enter(n),A.consume(d),A.exit(n),A.exit(r),A.exit(t),e):(A.enter(i),A.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===62?(A.exit("chunkString"),A.exit(i),c(d)):d===null||d===60||D(d)?j(d):(A.consume(d),d===92?$:u)}function $(d){return d===60||d===62||d===92?(A.consume(d),u):u(d)}function E(d){return!l&&(d===null||d===41||U(d))?(A.exit("chunkString"),A.exit(i),A.exit(o),A.exit(t),e(d)):l<s&&d===40?(A.consume(d),l++,E):d===41?(A.consume(d),l--,E):d===null||d===32||d===40||Qj(d)?j(d):(A.consume(d),d===92?m:E)}function m(d){return d===40||d===41||d===92?(A.consume(d),E):E(d)}}function Lr(A,e,j,t,r,n){let o=this,i=0,a;return s;function s(u){return A.enter(t),A.enter(r),A.consume(u),A.exit(r),A.enter(n),l}function l(u){return i>999||u===null||u===91||u===93&&!a||u===94&&!i&&"_hiddenFootnoteSupport"in o.parser.constructs?j(u):u===93?(A.exit(n),A.enter(r),A.consume(u),A.exit(r),A.exit(t),e):D(u)?(A.enter("lineEnding"),A.consume(u),A.exit("lineEnding"),l):(A.enter("chunkString",{contentType:"string"}),k(u))}function k(u){return u===null||u===91||u===93||D(u)||i++>999?(A.exit("chunkString"),l(u)):(A.consume(u),a||(a=!L(u)),u===92?c:k)}function c(u){return u===91||u===92||u===93?(A.consume(u),i++,k):k(u)}}function Kr(A,e,j,t,r,n){let o;return i;function i(c){return c===34||c===39||c===40?(A.enter(t),A.enter(r),A.consume(c),A.exit(r),o=c===40?41:c,a):j(c)}function a(c){return c===o?(A.enter(r),A.consume(c),A.exit(r),A.exit(t),e):(A.enter(n),s(c))}function s(c){return c===o?(A.exit(n),a(o)):c===null?j(c):D(c)?(A.enter("lineEnding"),A.consume(c),A.exit("lineEnding"),q(A,s,"linePrefix")):(A.enter("chunkString",{contentType:"string"}),l(c))}function l(c){return c===o||c===null||D(c)?(A.exit("chunkString"),s(c)):(A.consume(c),c===92?k:l)}function k(c){return c===o||c===92?(A.consume(c),l):l(c)}}function Xj(A,e){let j;return t;function t(r){return D(r)?(A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),j=!0,t):L(r)?q(A,t,j?"linePrefix":"lineSuffix")(r):e(r)}}var ao={name:"definition",tokenize:ZB},YB={tokenize:Ap,partial:!0};function ZB(A,e,j){let t=this,r;return n;function n(u){return A.enter("definition"),o(u)}function o(u){return Lr.call(t,A,i,j,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function i(u){return r=SA(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),u===58?(A.enter("definitionMarker"),A.consume(u),A.exit("definitionMarker"),a):j(u)}function a(u){return U(u)?Xj(A,s)(u):s(u)}function s(u){return Nr(A,l,j,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function l(u){return A.attempt(YB,k,k)(u)}function k(u){return L(u)?q(A,c,"whitespace")(u):c(u)}function c(u){return u===null||D(u)?(A.exit("definition"),t.parser.defined.push(r),e(u)):j(u)}}function Ap(A,e,j){return t;function t(i){return U(i)?Xj(A,r)(i):j(i)}function r(i){return Kr(A,n,j,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function n(i){return L(i)?q(A,o,"whitespace")(i):o(i)}function o(i){return i===null||D(i)?e(i):j(i)}}var so={name:"hardBreakEscape",tokenize:jp};function jp(A,e,j){return t;function t(n){return A.enter("hardBreakEscape"),A.consume(n),r}function r(n){return D(n)?(A.exit("hardBreakEscape"),e(n)):j(n)}}var lo={name:"headingAtx",tokenize:tp,resolve:ep};function ep(A,e){let j=A.length-2,t=3,r,n;return A[t][1].type==="whitespace"&&(t+=2),j-2>t&&A[j][1].type==="whitespace"&&(j-=2),A[j][1].type==="atxHeadingSequence"&&(t===j-1||j-4>t&&A[j-2][1].type==="whitespace")&&(j-=t+1===j?2:4),j>t&&(r={type:"atxHeadingText",start:A[t][1].start,end:A[j][1].end},n={type:"chunkText",start:A[t][1].start,end:A[j][1].end,contentType:"text"},mA(A,t,j-t+1,[["enter",r,e],["enter",n,e],["exit",n,e],["exit",r,e]])),A}function tp(A,e,j){let t=0;return r;function r(l){return A.enter("atxHeading"),n(l)}function n(l){return A.enter("atxHeadingSequence"),o(l)}function o(l){return l===35&&t++<6?(A.consume(l),o):l===null||U(l)?(A.exit("atxHeadingSequence"),i(l)):j(l)}function i(l){return l===35?(A.enter("atxHeadingSequence"),a(l)):l===null||D(l)?(A.exit("atxHeading"),e(l)):L(l)?q(A,i,"whitespace")(l):(A.enter("atxHeadingText"),s(l))}function a(l){return l===35?(A.consume(l),a):(A.exit("atxHeadingSequence"),i(l))}function s(l){return l===null||l===35||U(l)?(A.exit("atxHeadingText"),i(l)):(A.consume(l),s)}}var rc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ko=["pre","script","style","textarea"];var co={name:"htmlFlow",tokenize:ip,resolveTo:op,concrete:!0},rp={tokenize:sp,partial:!0},np={tokenize:ap,partial:!0};function op(A){let e=A.length;for(;e--&&!(A[e][0]==="enter"&&A[e][1].type==="htmlFlow"););return e>1&&A[e-2][1].type==="linePrefix"&&(A[e][1].start=A[e-2][1].start,A[e+1][1].start=A[e-2][1].start,A.splice(e-2,2)),A}function ip(A,e,j){let t=this,r,n,o,i,a;return s;function s(p){return l(p)}function l(p){return A.enter("htmlFlow"),A.enter("htmlFlowData"),A.consume(p),k}function k(p){return p===33?(A.consume(p),c):p===47?(A.consume(p),n=!0,E):p===63?(A.consume(p),r=3,t.interrupt?e:B):GA(p)?(A.consume(p),o=String.fromCharCode(p),m):j(p)}function c(p){return p===45?(A.consume(p),r=2,u):p===91?(A.consume(p),r=5,i=0,$):GA(p)?(A.consume(p),r=4,t.interrupt?e:B):j(p)}function u(p){return p===45?(A.consume(p),t.interrupt?e:B):j(p)}function $(p){let aA="CDATA[";return p===aA.charCodeAt(i++)?(A.consume(p),i===aA.length?t.interrupt?e:v:$):j(p)}function E(p){return GA(p)?(A.consume(p),o=String.fromCharCode(p),m):j(p)}function m(p){if(p===null||p===47||p===62||U(p)){let aA=p===47,FA=o.toLowerCase();return!aA&&!n&&ko.includes(FA)?(r=1,t.interrupt?e(p):v(p)):rc.includes(o.toLowerCase())?(r=6,aA?(A.consume(p),d):t.interrupt?e(p):v(p)):(r=7,t.interrupt&&!t.parser.lazy[t.now().line]?j(p):n?f(p):R(p))}return p===45||dA(p)?(A.consume(p),o+=String.fromCharCode(p),m):j(p)}function d(p){return p===62?(A.consume(p),t.interrupt?e:v):j(p)}function f(p){return L(p)?(A.consume(p),f):F(p)}function R(p){return p===47?(A.consume(p),F):p===58||p===95||GA(p)?(A.consume(p),_):L(p)?(A.consume(p),R):F(p)}function _(p){return p===45||p===46||p===58||p===95||dA(p)?(A.consume(p),_):b(p)}function b(p){return p===61?(A.consume(p),G):L(p)?(A.consume(p),b):R(p)}function G(p){return p===null||p===60||p===61||p===62||p===96?j(p):p===34||p===39?(A.consume(p),a=p,P):L(p)?(A.consume(p),G):x(p)}function P(p){return p===a?(A.consume(p),a=null,T):p===null||D(p)?j(p):(A.consume(p),P)}function x(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||U(p)?b(p):(A.consume(p),x)}function T(p){return p===47||p===62||L(p)?R(p):j(p)}function F(p){return p===62?(A.consume(p),J):j(p)}function J(p){return p===null||D(p)?v(p):L(p)?(A.consume(p),J):j(p)}function v(p){return p===45&&r===2?(A.consume(p),w):p===60&&r===1?(A.consume(p),N):p===62&&r===4?(A.consume(p),z):p===63&&r===3?(A.consume(p),B):p===93&&r===5?(A.consume(p),W):D(p)&&(r===6||r===7)?(A.exit("htmlFlowData"),A.check(rp,nA,I)(p)):p===null||D(p)?(A.exit("htmlFlowData"),I(p)):(A.consume(p),v)}function I(p){return A.check(np,y,nA)(p)}function y(p){return A.enter("lineEnding"),A.consume(p),A.exit("lineEnding"),S}function S(p){return p===null||D(p)?I(p):(A.enter("htmlFlowData"),v(p))}function w(p){return p===45?(A.consume(p),B):v(p)}function N(p){return p===47?(A.consume(p),o="",V):v(p)}function V(p){if(p===62){let aA=o.toLowerCase();return ko.includes(aA)?(A.consume(p),z):v(p)}return GA(p)&&o.length<8?(A.consume(p),o+=String.fromCharCode(p),V):v(p)}function W(p){return p===93?(A.consume(p),B):v(p)}function B(p){return p===62?(A.consume(p),z):p===45&&r===2?(A.consume(p),B):v(p)}function z(p){return p===null||D(p)?(A.exit("htmlFlowData"),nA(p)):(A.consume(p),z)}function nA(p){return A.exit("htmlFlow"),e(p)}}function ap(A,e,j){let t=this;return r;function r(o){return D(o)?(A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),n):j(o)}function n(o){return t.parser.lazy[t.now().line]?j(o):e(o)}}function sp(A,e,j){return t;function t(r){return A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),A.attempt(rj,e,j)}}var uo={name:"htmlText",tokenize:lp};function lp(A,e,j){let t=this,r,n,o;return i;function i(B){return A.enter("htmlText"),A.enter("htmlTextData"),A.consume(B),a}function a(B){return B===33?(A.consume(B),s):B===47?(A.consume(B),b):B===63?(A.consume(B),R):GA(B)?(A.consume(B),x):j(B)}function s(B){return B===45?(A.consume(B),l):B===91?(A.consume(B),n=0,$):GA(B)?(A.consume(B),f):j(B)}function l(B){return B===45?(A.consume(B),u):j(B)}function k(B){return B===null?j(B):B===45?(A.consume(B),c):D(B)?(o=k,N(B)):(A.consume(B),k)}function c(B){return B===45?(A.consume(B),u):k(B)}function u(B){return B===62?w(B):B===45?c(B):k(B)}function $(B){let z="CDATA[";return B===z.charCodeAt(n++)?(A.consume(B),n===z.length?E:$):j(B)}function E(B){return B===null?j(B):B===93?(A.consume(B),m):D(B)?(o=E,N(B)):(A.consume(B),E)}function m(B){return B===93?(A.consume(B),d):E(B)}function d(B){return B===62?w(B):B===93?(A.consume(B),d):E(B)}function f(B){return B===null||B===62?w(B):D(B)?(o=f,N(B)):(A.consume(B),f)}function R(B){return B===null?j(B):B===63?(A.consume(B),_):D(B)?(o=R,N(B)):(A.consume(B),R)}function _(B){return B===62?w(B):R(B)}function b(B){return GA(B)?(A.consume(B),G):j(B)}function G(B){return B===45||dA(B)?(A.consume(B),G):P(B)}function P(B){return D(B)?(o=P,N(B)):L(B)?(A.consume(B),P):w(B)}function x(B){return B===45||dA(B)?(A.consume(B),x):B===47||B===62||U(B)?T(B):j(B)}function T(B){return B===47?(A.consume(B),w):B===58||B===95||GA(B)?(A.consume(B),F):D(B)?(o=T,N(B)):L(B)?(A.consume(B),T):w(B)}function F(B){return B===45||B===46||B===58||B===95||dA(B)?(A.consume(B),F):J(B)}function J(B){return B===61?(A.consume(B),v):D(B)?(o=J,N(B)):L(B)?(A.consume(B),J):T(B)}function v(B){return B===null||B===60||B===61||B===62||B===96?j(B):B===34||B===39?(A.consume(B),r=B,I):D(B)?(o=v,N(B)):L(B)?(A.consume(B),v):(A.consume(B),y)}function I(B){return B===r?(A.consume(B),r=void 0,S):B===null?j(B):D(B)?(o=I,N(B)):(A.consume(B),I)}function y(B){return B===null||B===34||B===39||B===60||B===61||B===96?j(B):B===47||B===62||U(B)?T(B):(A.consume(B),y)}function S(B){return B===47||B===62||U(B)?T(B):j(B)}function w(B){return B===62?(A.consume(B),A.exit("htmlTextData"),A.exit("htmlText"),e):j(B)}function N(B){return A.exit("htmlTextData"),A.enter("lineEnding"),A.consume(B),A.exit("lineEnding"),V}function V(B){return L(B)?q(A,W,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):W(B)}function W(B){return A.enter("htmlTextData"),o(B)}}var zj={name:"labelEnd",tokenize:Ep,resolveTo:$p,resolveAll:dp},kp={tokenize:Bp},cp={tokenize:pp},up={tokenize:mp};function dp(A){let e=-1;for(;++e<A.length;){let j=A[e][1];(j.type==="labelImage"||j.type==="labelLink"||j.type==="labelEnd")&&(A.splice(e+1,j.type==="labelImage"?4:2),j.type="data",e++)}return A}function $p(A,e){let j=A.length,t=0,r,n,o,i;for(;j--;)if(r=A[j][1],n){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;A[j][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(A[j][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(n=j,r.type!=="labelLink")){t=2;break}}else r.type==="labelEnd"&&(o=j);let a={type:A[n][1].type==="labelLink"?"link":"image",start:Object.assign({},A[n][1].start),end:Object.assign({},A[A.length-1][1].end)},s={type:"label",start:Object.assign({},A[n][1].start),end:Object.assign({},A[o][1].end)},l={type:"labelText",start:Object.assign({},A[n+t+2][1].end),end:Object.assign({},A[o-2][1].start)};return i=[["enter",a,e],["enter",s,e]],i=CA(i,A.slice(n+1,n+t+3)),i=CA(i,[["enter",l,e]]),i=CA(i,yj(e.parser.constructs.insideSpan.null,A.slice(n+t+4,o-3),e)),i=CA(i,[["exit",l,e],A[o-2],A[o-1],["exit",s,e]]),i=CA(i,A.slice(o+1)),i=CA(i,[["exit",a,e]]),mA(A,n,A.length,i),A}function Ep(A,e,j){let t=this,r=t.events.length,n,o;for(;r--;)if((t.events[r][1].type==="labelImage"||t.events[r][1].type==="labelLink")&&!t.events[r][1]._balanced){n=t.events[r][1];break}return i;function i(c){return n?n._inactive?k(c):(o=t.parser.defined.includes(SA(t.sliceSerialize({start:n.end,end:t.now()}))),A.enter("labelEnd"),A.enter("labelMarker"),A.consume(c),A.exit("labelMarker"),A.exit("labelEnd"),a):j(c)}function a(c){return c===40?A.attempt(kp,l,o?l:k)(c):c===91?A.attempt(cp,l,o?s:k)(c):o?l(c):k(c)}function s(c){return A.attempt(up,l,k)(c)}function l(c){return e(c)}function k(c){return n._balanced=!0,j(c)}}function Bp(A,e,j){return t;function t(k){return A.enter("resource"),A.enter("resourceMarker"),A.consume(k),A.exit("resourceMarker"),r}function r(k){return U(k)?Xj(A,n)(k):n(k)}function n(k){return k===41?l(k):Nr(A,o,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(k)}function o(k){return U(k)?Xj(A,a)(k):l(k)}function i(k){return j(k)}function a(k){return k===34||k===39||k===40?Kr(A,s,j,"resourceTitle","resourceTitleMarker","resourceTitleString")(k):l(k)}function s(k){return U(k)?Xj(A,l)(k):l(k)}function l(k){return k===41?(A.enter("resourceMarker"),A.consume(k),A.exit("resourceMarker"),A.exit("resource"),e):j(k)}}function pp(A,e,j){let t=this;return r;function r(i){return Lr.call(t,A,n,o,"reference","referenceMarker","referenceString")(i)}function n(i){return t.parser.defined.includes(SA(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?e(i):j(i)}function o(i){return j(i)}}function mp(A,e,j){return t;function t(n){return A.enter("reference"),A.enter("referenceMarker"),A.consume(n),A.exit("referenceMarker"),r}function r(n){return n===93?(A.enter("referenceMarker"),A.consume(n),A.exit("referenceMarker"),A.exit("reference"),e):j(n)}}var $o={name:"labelStartImage",tokenize:fp,resolveAll:zj.resolveAll};function fp(A,e,j){let t=this;return r;function r(i){return A.enter("labelImage"),A.enter("labelImageMarker"),A.consume(i),A.exit("labelImageMarker"),n}function n(i){return i===91?(A.enter("labelMarker"),A.consume(i),A.exit("labelMarker"),A.exit("labelImage"),o):j(i)}function o(i){return i===94&&"_hiddenFootnoteSupport"in t.parser.constructs?j(i):e(i)}}var Eo={name:"labelStartLink",tokenize:Gp,resolveAll:zj.resolveAll};function Gp(A,e,j){let t=this;return r;function r(o){return A.enter("labelLink"),A.enter("labelMarker"),A.consume(o),A.exit("labelMarker"),A.exit("labelLink"),n}function n(o){return o===94&&"_hiddenFootnoteSupport"in t.parser.constructs?j(o):e(o)}}var lt={name:"lineEnding",tokenize:Fp};function Fp(A,e){return j;function j(t){return A.enter("lineEnding"),A.consume(t),A.exit("lineEnding"),q(A,e,"linePrefix")}}var Wj={name:"thematicBreak",tokenize:Rp};function Rp(A,e,j){let t=0,r;return n;function n(s){return A.enter("thematicBreak"),o(s)}function o(s){return r=s,i(s)}function i(s){return s===r?(A.enter("thematicBreakSequence"),a(s)):t>=3&&(s===null||D(s))?(A.exit("thematicBreak"),e(s)):j(s)}function a(s){return s===r?(A.consume(s),t++,a):(A.exit("thematicBreakSequence"),L(s)?q(A,i,"whitespace")(s):i(s))}}var _A={name:"list",tokenize:hp,continuation:{tokenize:bp},exit:_p},gp={tokenize:yp,partial:!0},Ip={tokenize:Sp,partial:!0};function hp(A,e,j){let t=this,r=t.events[t.events.length-1],n=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return i;function i(u){let $=t.containerState.type||(u===42||u===43||u===45?"listUnordered":"listOrdered");if($==="listUnordered"?!t.containerState.marker||u===t.containerState.marker:ot(u)){if(t.containerState.type||(t.containerState.type=$,A.enter($,{_container:!0})),$==="listUnordered")return A.enter("listItemPrefix"),u===42||u===45?A.check(Wj,j,s)(u):s(u);if(!t.interrupt||u===49)return A.enter("listItemPrefix"),A.enter("listItemValue"),a(u)}return j(u)}function a(u){return ot(u)&&++o<10?(A.consume(u),a):(!t.interrupt||o<2)&&(t.containerState.marker?u===t.containerState.marker:u===41||u===46)?(A.exit("listItemValue"),s(u)):j(u)}function s(u){return A.enter("listItemMarker"),A.consume(u),A.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||u,A.check(rj,t.interrupt?j:l,A.attempt(gp,c,k))}function l(u){return t.containerState.initialBlankLine=!0,n++,c(u)}function k(u){return L(u)?(A.enter("listItemPrefixWhitespace"),A.consume(u),A.exit("listItemPrefixWhitespace"),c):j(u)}function c(u){return t.containerState.size=n+t.sliceSerialize(A.exit("listItemPrefix"),!0).length,e(u)}}function bp(A,e,j){let t=this;return t.containerState._closeFlow=void 0,A.check(rj,r,n);function r(i){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,q(A,e,"listItemIndent",t.containerState.size+1)(i)}function n(i){return t.containerState.furtherBlankLines||!L(i)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,o(i)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,A.attempt(Ip,e,o)(i))}function o(i){return t.containerState._closeFlow=!0,t.interrupt=void 0,q(A,A.attempt(_A,e,j),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function Sp(A,e,j){let t=this;return q(A,r,"listItemIndent",t.containerState.size+1);function r(n){let o=t.events[t.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===t.containerState.size?e(n):j(n)}}function _p(A){A.exit(this.containerState.type)}function yp(A,e,j){let t=this;return q(A,r,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(n){let o=t.events[t.events.length-1];return!L(n)&&o&&o[1].type==="listItemPrefixWhitespace"?e(n):j(n)}}var Jr={name:"setextUnderline",tokenize:Mp,resolveTo:Cp};function Cp(A,e){let j=A.length,t,r,n;for(;j--;)if(A[j][0]==="enter"){if(A[j][1].type==="content"){t=j;break}A[j][1].type==="paragraph"&&(r=j)}else A[j][1].type==="content"&&A.splice(j,1),!n&&A[j][1].type==="definition"&&(n=j);let o={type:"setextHeading",start:Object.assign({},A[r][1].start),end:Object.assign({},A[A.length-1][1].end)};return A[r][1].type="setextHeadingText",n?(A.splice(r,0,["enter",o,e]),A.splice(n+1,0,["exit",A[t][1],e]),A[t][1].end=Object.assign({},A[n][1].end)):A[t][1]=o,A.push(["exit",o,e]),A}function Mp(A,e,j){let t=this,r;return n;function n(s){let l=t.events.length,k;for(;l--;)if(t.events[l][1].type!=="lineEnding"&&t.events[l][1].type!=="linePrefix"&&t.events[l][1].type!=="content"){k=t.events[l][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||k)?(A.enter("setextHeadingLine"),r=s,o(s)):j(s)}function o(s){return A.enter("setextHeadingLineSequence"),i(s)}function i(s){return s===r?(A.consume(s),i):(A.exit("setextHeadingLineSequence"),L(s)?q(A,a,"lineSuffix")(s):a(s))}function a(s){return s===null||D(s)?(A.exit("setextHeadingLine"),e(s)):j(s)}}var Dp={tokenize:qp,partial:!0};function Bo(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Op,continuation:{tokenize:Tp},exit:wp}},text:{91:{name:"gfmFootnoteCall",tokenize:vp},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Pp,resolveTo:xp}}}}function Pp(A,e,j){let t=this,r=t.events.length,n=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),o;for(;r--;){let a=t.events[r][1];if(a.type==="labelImage"){o=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return i;function i(a){if(!o||!o._balanced)return j(a);let s=SA(t.sliceSerialize({start:o.end,end:t.now()}));return s.codePointAt(0)!==94||!n.includes(s.slice(1))?j(a):(A.enter("gfmFootnoteCallLabelMarker"),A.consume(a),A.exit("gfmFootnoteCallLabelMarker"),e(a))}}function xp(A,e){let j=A.length,t;for(;j--;)if(A[j][1].type==="labelImage"&&A[j][0]==="enter"){t=A[j][1];break}A[j+1][1].type="data",A[j+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},A[j+3][1].start),end:Object.assign({},A[A.length-1][1].end)},n={type:"gfmFootnoteCallMarker",start:Object.assign({},A[j+3][1].end),end:Object.assign({},A[j+3][1].end)};n.end.column++,n.end.offset++,n.end._bufferIndex++;let o={type:"gfmFootnoteCallString",start:Object.assign({},n.end),end:Object.assign({},A[A.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[A[j+1],A[j+2],["enter",r,e],A[j+3],A[j+4],["enter",n,e],["exit",n,e],["enter",o,e],["enter",i,e],["exit",i,e],["exit",o,e],A[A.length-2],A[A.length-1],["exit",r,e]];return A.splice(j,A.length-j+1,...a),A}function vp(A,e,j){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),n=0,o;return i;function i(k){return A.enter("gfmFootnoteCall"),A.enter("gfmFootnoteCallLabelMarker"),A.consume(k),A.exit("gfmFootnoteCallLabelMarker"),a}function a(k){return k!==94?j(k):(A.enter("gfmFootnoteCallMarker"),A.consume(k),A.exit("gfmFootnoteCallMarker"),A.enter("gfmFootnoteCallString"),A.enter("chunkString").contentType="string",s)}function s(k){if(n>999||k===93&&!o||k===null||k===91||U(k))return j(k);if(k===93){A.exit("chunkString");let c=A.exit("gfmFootnoteCallString");return r.includes(SA(t.sliceSerialize(c)))?(A.enter("gfmFootnoteCallLabelMarker"),A.consume(k),A.exit("gfmFootnoteCallLabelMarker"),A.exit("gfmFootnoteCall"),e):j(k)}return U(k)||(o=!0),n++,A.consume(k),k===92?l:s}function l(k){return k===91||k===92||k===93?(A.consume(k),n++,s):s(k)}}function Op(A,e,j){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),n,o=0,i;return a;function a($){return A.enter("gfmFootnoteDefinition")._container=!0,A.enter("gfmFootnoteDefinitionLabel"),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume($),A.exit("gfmFootnoteDefinitionLabelMarker"),s}function s($){return $===94?(A.enter("gfmFootnoteDefinitionMarker"),A.consume($),A.exit("gfmFootnoteDefinitionMarker"),A.enter("gfmFootnoteDefinitionLabelString"),A.enter("chunkString").contentType="string",l):j($)}function l($){if(o>999||$===93&&!i||$===null||$===91||U($))return j($);if($===93){A.exit("chunkString");let E=A.exit("gfmFootnoteDefinitionLabelString");return n=SA(t.sliceSerialize(E)),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume($),A.exit("gfmFootnoteDefinitionLabelMarker"),A.exit("gfmFootnoteDefinitionLabel"),c}return U($)||(i=!0),o++,A.consume($),$===92?k:l}function k($){return $===91||$===92||$===93?(A.consume($),o++,l):l($)}function c($){return $===58?(A.enter("definitionMarker"),A.consume($),A.exit("definitionMarker"),r.includes(n)||r.push(n),q(A,u,"gfmFootnoteDefinitionWhitespace")):j($)}function u($){return e($)}}function Tp(A,e,j){return A.check(rj,e,A.attempt(Dp,e,j))}function wp(A){A.exit("gfmFootnoteDefinition")}function qp(A,e,j){let t=this;return q(A,r,"gfmFootnoteDefinitionIndent",5);function r(n){let o=t.events[t.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(n):j(n)}}function po(A){let j=(A||{}).singleTilde,t={name:"strikethrough",tokenize:n,resolveAll:r};return j==null&&(j=!0),{text:{126:t},insideSpan:{null:[t]},attentionMarkers:{null:[126]}};function r(o,i){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let s=a;for(;s--;)if(o[s][0]==="exit"&&o[s][1].type==="strikethroughSequenceTemporary"&&o[s][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[s][1].end.offset-o[s][1].start.offset){o[a][1].type="strikethroughSequence",o[s][1].type="strikethroughSequence";let l={type:"strikethrough",start:Object.assign({},o[s][1].start),end:Object.assign({},o[a][1].end)},k={type:"strikethroughText",start:Object.assign({},o[s][1].end),end:Object.assign({},o[a][1].start)},c=[["enter",l,i],["enter",o[s][1],i],["exit",o[s][1],i],["enter",k,i]],u=i.parser.constructs.insideSpan.null;u&&mA(c,c.length,0,yj(u,o.slice(s+1,a),i)),mA(c,c.length,0,[["exit",k,i],["enter",o[a][1],i],["exit",o[a][1],i],["exit",l,i]]),mA(o,s-1,a-s+3,c),a=s+c.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function n(o,i,a){let s=this.previous,l=this.events,k=0;return c;function c($){return s===126&&l[l.length-1][1].type!=="characterEscape"?a($):(o.enter("strikethroughSequenceTemporary"),u($))}function u($){let E=Ee(s);if($===126)return k>1?a($):(o.consume($),k++,u);if(k<2&&!j)return a($);let m=o.exit("strikethroughSequenceTemporary"),d=Ee($);return m._open=!d||d===2&&!!E,m._close=!E||E===2&&!!d,i($)}}}var Hr=class{constructor(){this.map=[]}add(e,j,t){Np(this,e,j,t)}consume(e){if(this.map.sort(function(n,o){return n[0]-o[0]}),this.map.length===0)return;let j=this.map.length,t=[];for(;j>0;)j-=1,t.push(e.slice(this.map[j][0]+this.map[j][1]),this.map[j][2]),e.length=this.map[j][0];t.push(e.slice()),e.length=0;let r=t.pop();for(;r;){for(let n of r)e.push(n);r=t.pop()}this.map.length=0}};function Np(A,e,j,t){let r=0;if(!(j===0&&t.length===0)){for(;r<A.map.length;){if(A.map[r][0]===e){A.map[r][1]+=j,A.map[r][2].push(...t);return}r+=1}A.map.push([e,j,t])}}function nc(A,e){let j=!1,t=[];for(;e<A.length;){let r=A[e];if(j){if(r[0]==="enter")r[1].type==="tableContent"&&t.push(A[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(A[e-1][1].type==="tableDelimiterMarker"){let n=t.length-1;t[n]=t[n]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(j=!0);e+=1}return t}function mo(){return{flow:{null:{name:"table",tokenize:Lp,resolveAll:Kp}}}}function Lp(A,e,j){let t=this,r=0,n=0,o;return i;function i(F){let J=t.events.length-1;for(;J>-1;){let y=t.events[J][1].type;if(y==="lineEnding"||y==="linePrefix")J--;else break}let v=J>-1?t.events[J][1].type:null,I=v==="tableHead"||v==="tableRow"?G:a;return I===G&&t.parser.lazy[t.now().line]?j(F):I(F)}function a(F){return A.enter("tableHead"),A.enter("tableRow"),s(F)}function s(F){return F===124||(o=!0,n+=1),l(F)}function l(F){return F===null?j(F):D(F)?n>1?(n=0,t.interrupt=!0,A.exit("tableRow"),A.enter("lineEnding"),A.consume(F),A.exit("lineEnding"),u):j(F):L(F)?q(A,l,"whitespace")(F):(n+=1,o&&(o=!1,r+=1),F===124?(A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),o=!0,l):(A.enter("data"),k(F)))}function k(F){return F===null||F===124||U(F)?(A.exit("data"),l(F)):(A.consume(F),F===92?c:k)}function c(F){return F===92||F===124?(A.consume(F),k):k(F)}function u(F){return t.interrupt=!1,t.parser.lazy[t.now().line]?j(F):(A.enter("tableDelimiterRow"),o=!1,L(F)?q(A,$,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):$(F))}function $(F){return F===45||F===58?m(F):F===124?(o=!0,A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),E):b(F)}function E(F){return L(F)?q(A,m,"whitespace")(F):m(F)}function m(F){return F===58?(n+=1,o=!0,A.enter("tableDelimiterMarker"),A.consume(F),A.exit("tableDelimiterMarker"),d):F===45?(n+=1,d(F)):F===null||D(F)?_(F):b(F)}function d(F){return F===45?(A.enter("tableDelimiterFiller"),f(F)):b(F)}function f(F){return F===45?(A.consume(F),f):F===58?(o=!0,A.exit("tableDelimiterFiller"),A.enter("tableDelimiterMarker"),A.consume(F),A.exit("tableDelimiterMarker"),R):(A.exit("tableDelimiterFiller"),R(F))}function R(F){return L(F)?q(A,_,"whitespace")(F):_(F)}function _(F){return F===124?$(F):F===null||D(F)?!o||r!==n?b(F):(A.exit("tableDelimiterRow"),A.exit("tableHead"),e(F)):b(F)}function b(F){return j(F)}function G(F){return A.enter("tableRow"),P(F)}function P(F){return F===124?(A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),P):F===null||D(F)?(A.exit("tableRow"),e(F)):L(F)?q(A,P,"whitespace")(F):(A.enter("data"),x(F))}function x(F){return F===null||F===124||U(F)?(A.exit("data"),P(F)):(A.consume(F),F===92?T:x)}function T(F){return F===92||F===124?(A.consume(F),x):x(F)}}function Kp(A,e){let j=-1,t=!0,r=0,n=[0,0,0,0],o=[0,0,0,0],i=!1,a=0,s,l,k,c=new Hr;for(;++j<A.length;){let u=A[j],$=u[1];u[0]==="enter"?$.type==="tableHead"?(i=!1,a!==0&&(oc(c,e,a,s,l),l=void 0,a=0),s={type:"table",start:Object.assign({},$.start),end:Object.assign({},$.end)},c.add(j,0,[["enter",s,e]])):$.type==="tableRow"||$.type==="tableDelimiterRow"?(t=!0,k=void 0,n=[0,0,0,0],o=[0,j+1,0,0],i&&(i=!1,l={type:"tableBody",start:Object.assign({},$.start),end:Object.assign({},$.end)},c.add(j,0,[["enter",l,e]])),r=$.type==="tableDelimiterRow"?2:l?3:1):r&&($.type==="data"||$.type==="tableDelimiterMarker"||$.type==="tableDelimiterFiller")?(t=!1,o[2]===0&&(n[1]!==0&&(o[0]=o[1],k=Qr(c,e,n,r,void 0,k),n=[0,0,0,0]),o[2]=j)):$.type==="tableCellDivider"&&(t?t=!1:(n[1]!==0&&(o[0]=o[1],k=Qr(c,e,n,r,void 0,k)),n=o,o=[n[1],j,0,0])):$.type==="tableHead"?(i=!0,a=j):$.type==="tableRow"||$.type==="tableDelimiterRow"?(a=j,n[1]!==0?(o[0]=o[1],k=Qr(c,e,n,r,j,k)):o[1]!==0&&(k=Qr(c,e,o,r,j,k)),r=0):r&&($.type==="data"||$.type==="tableDelimiterMarker"||$.type==="tableDelimiterFiller")&&(o[3]=j)}for(a!==0&&oc(c,e,a,s,l),c.consume(e.events),j=-1;++j<e.events.length;){let u=e.events[j];u[0]==="enter"&&u[1].type==="table"&&(u[1]._align=nc(e.events,j))}return A}function Qr(A,e,j,t,r,n){let o=t===1?"tableHeader":t===2?"tableDelimiter":"tableData",i="tableContent";j[0]!==0&&(n.end=Object.assign({},Be(e.events,j[0])),A.add(j[0],0,[["exit",n,e]]));let a=Be(e.events,j[1]);if(n={type:o,start:Object.assign({},a),end:Object.assign({},a)},A.add(j[1],0,[["enter",n,e]]),j[2]!==0){let s=Be(e.events,j[2]),l=Be(e.events,j[3]),k={type:i,start:Object.assign({},s),end:Object.assign({},l)};if(A.add(j[2],0,[["enter",k,e]]),t!==2){let c=e.events[j[2]],u=e.events[j[3]];if(c[1].end=Object.assign({},u[1].end),c[1].type="chunkText",c[1].contentType="text",j[3]>j[2]+1){let $=j[2]+1,E=j[3]-j[2]-1;A.add($,E,[])}}A.add(j[3]+1,0,[["exit",k,e]])}return r!==void 0&&(n.end=Object.assign({},Be(e.events,r)),A.add(r,0,[["exit",n,e]]),n=void 0),n}function oc(A,e,j,t,r){let n=[],o=Be(e.events,j);r&&(r.end=Object.assign({},o),n.push(["exit",r,e])),t.end=Object.assign({},o),n.push(["exit",t,e]),A.add(j+1,0,n)}function Be(A,e){let j=A[e],t=j[0]==="enter"?"start":"end";return j[1][t]}var Jp={name:"tasklistCheck",tokenize:Hp};function fo(){return{text:{91:Jp}}}function Hp(A,e,j){let t=this;return r;function r(a){return t.previous!==null||!t._gfmTasklistFirstContentOfListItem?j(a):(A.enter("taskListCheck"),A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),n)}function n(a){return U(a)?(A.enter("taskListCheckValueUnchecked"),A.consume(a),A.exit("taskListCheckValueUnchecked"),o):a===88||a===120?(A.enter("taskListCheckValueChecked"),A.consume(a),A.exit("taskListCheckValueChecked"),o):j(a)}function o(a){return a===93?(A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),A.exit("taskListCheck"),i):j(a)}function i(a){return D(a)?e(a):L(a)?A.check({tokenize:Qp},e,j)(a):j(a)}}function Qp(A,e,j){return q(A,t,"whitespace");function t(r){return r===null?j(r):e(r)}}function ic(A){return Pr([to(),Bo(),po(A),mo(),fo()])}var Up={};function kt(A){let e=this,j=A||Up,t=e.data(),r=t.micromarkExtensions||(t.micromarkExtensions=[]),n=t.fromMarkdownExtensions||(t.fromMarkdownExtensions=[]),o=t.toMarkdownExtensions||(t.toMarkdownExtensions=[]);r.push(ic(j)),n.push(Ao()),o.push(jo(j))}var ac={tokenize:Vp};function Vp(A){let e=A.attempt(this.parser.constructs.contentInitial,t,r),j;return e;function t(i){if(i===null){A.consume(i);return}return A.enter("lineEnding"),A.consume(i),A.exit("lineEnding"),q(A,e,"linePrefix")}function r(i){return A.enter("paragraph"),n(i)}function n(i){let a=A.enter("chunkText",{contentType:"text",previous:j});return j&&(j.next=a),j=a,o(i)}function o(i){if(i===null){A.exit("chunkText"),A.exit("paragraph"),A.consume(i);return}return D(i)?(A.consume(i),A.exit("chunkText"),n):(A.consume(i),o)}}var lc={tokenize:Xp},sc={tokenize:zp};function Xp(A){let e=this,j=[],t=0,r,n,o;return i;function i(R){if(t<j.length){let _=j[t];return e.containerState=_[1],A.attempt(_[0].continuation,a,s)(R)}return s(R)}function a(R){if(t++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&f();let _=e.events.length,b=_,G;for(;b--;)if(e.events[b][0]==="exit"&&e.events[b][1].type==="chunkFlow"){G=e.events[b][1].end;break}d(t);let P=_;for(;P<e.events.length;)e.events[P][1].end=Object.assign({},G),P++;return mA(e.events,b+1,0,e.events.slice(_)),e.events.length=P,s(R)}return i(R)}function s(R){if(t===j.length){if(!r)return c(R);if(r.currentConstruct&&r.currentConstruct.concrete)return $(R);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},A.check(sc,l,k)(R)}function l(R){return r&&f(),d(t),c(R)}function k(R){return e.parser.lazy[e.now().line]=t!==j.length,o=e.now().offset,$(R)}function c(R){return e.containerState={},A.attempt(sc,u,$)(R)}function u(R){return t++,j.push([e.currentConstruct,e.containerState]),c(R)}function $(R){if(R===null){r&&f(),d(0),A.consume(R);return}return r=r||e.parser.flow(e.now()),A.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:r}),E(R)}function E(R){if(R===null){m(A.exit("chunkFlow"),!0),d(0),A.consume(R);return}return D(R)?(A.consume(R),m(A.exit("chunkFlow")),t=0,e.interrupt=void 0,i):(A.consume(R),E)}function m(R,_){let b=e.sliceStream(R);if(_&&b.push(null),R.previous=n,n&&(n.next=R),n=R,r.defineSkip(R.start),r.write(b),e.parser.lazy[R.start.line]){let G=r.events.length;for(;G--;)if(r.events[G][1].start.offset<o&&(!r.events[G][1].end||r.events[G][1].end.offset>o))return;let P=e.events.length,x=P,T,F;for(;x--;)if(e.events[x][0]==="exit"&&e.events[x][1].type==="chunkFlow"){if(T){F=e.events[x][1].end;break}T=!0}for(d(t),G=P;G<e.events.length;)e.events[G][1].end=Object.assign({},F),G++;mA(e.events,x+1,0,e.events.slice(P)),e.events.length=G}}function d(R){let _=j.length;for(;_-- >R;){let b=j[_];e.containerState=b[1],b[0].exit.call(e,A)}j.length=R}function f(){r.write([null]),n=void 0,r=void 0,e.containerState._closeFlow=void 0}}function zp(A,e,j){return q(A,A.attempt(this.parser.constructs.document,e,j),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}var kc={tokenize:Wp};function Wp(A){let e=this,j=A.attempt(rj,t,A.attempt(this.parser.constructs.flowInitial,r,q(A,A.attempt(this.parser.constructs.flow,r,A.attempt(io,r)),"linePrefix")));return j;function t(n){if(n===null){A.consume(n);return}return A.enter("lineEndingBlank"),A.consume(n),A.exit("lineEndingBlank"),e.currentConstruct=void 0,j}function r(n){if(n===null){A.consume(n);return}return A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),e.currentConstruct=void 0,j}}var cc={resolveAll:Ec()},uc=$c("string"),dc=$c("text");function $c(A){return{tokenize:e,resolveAll:Ec(A==="text"?Yp:void 0)};function e(j){let t=this,r=this.parser.constructs[A],n=j.attempt(r,o,i);return o;function o(l){return s(l)?n(l):i(l)}function i(l){if(l===null){j.consume(l);return}return j.enter("data"),j.consume(l),a}function a(l){return s(l)?(j.exit("data"),n(l)):(j.consume(l),a)}function s(l){if(l===null)return!0;let k=r[l],c=-1;if(k)for(;++c<k.length;){let u=k[c];if(!u.previous||u.previous.call(t,t.previous))return!0}return!1}}}function Ec(A){return e;function e(j,t){let r=-1,n;for(;++r<=j.length;)n===void 0?j[r]&&j[r][1].type==="data"&&(n=r,r++):(!j[r]||j[r][1].type!=="data")&&(r!==n+2&&(j[n][1].end=j[r-1][1].end,j.splice(n+2,r-n-2),r=n+2),n=void 0);return A?A(j,t):j}}function Yp(A,e){let j=0;for(;++j<=A.length;)if((j===A.length||A[j][1].type==="lineEnding")&&A[j-1][1].type==="data"){let t=A[j-1][1],r=e.sliceStream(t),n=r.length,o=-1,i=0,a;for(;n--;){let s=r[n];if(typeof s=="string"){for(o=s.length;s.charCodeAt(o-1)===32;)i++,o--;if(o)break;o=-1}else if(s===-2)a=!0,i++;else if(s!==-1){n++;break}}if(i){let s={type:j===A.length||a||i<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-i,offset:t.end.offset-i,_index:t.start._index+n,_bufferIndex:n?o:t.start._bufferIndex+o},end:Object.assign({},t.end)};t.end=Object.assign({},s.start),t.start.offset===t.end.offset?Object.assign(t,s):(A.splice(j,0,["enter",s,e],["exit",s,e]),j+=2)}j++}return A}function Bc(A,e,j){let t=Object.assign(j?Object.assign({},j):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),r={},n=[],o=[],i=[],a=!0,s={consume:_,enter:b,exit:G,attempt:T(P),check:T(x),interrupt:T(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:A,sliceStream:E,sliceSerialize:$,now:m,defineSkip:d,write:u},k=e.tokenize.call(l,s),c;return e.resolveAll&&n.push(e),l;function u(I){return o=CA(o,I),f(),o[o.length-1]!==null?[]:(F(e,0),l.events=yj(n,l.events,l),l.events)}function $(I,y){return A0(E(I),y)}function E(I){return Zp(o,I)}function m(){let{line:I,column:y,offset:S,_index:w,_bufferIndex:N}=t;return{line:I,column:y,offset:S,_index:w,_bufferIndex:N}}function d(I){r[I.line]=I.column,v()}function f(){let I;for(;t._index<o.length;){let y=o[t._index];if(typeof y=="string")for(I=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===I&&t._bufferIndex<y.length;)R(y.charCodeAt(t._bufferIndex));else R(y)}}function R(I){a=void 0,c=I,k=k(I)}function _(I){D(I)?(t.line++,t.column=1,t.offset+=I===-3?2:1,v()):I!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===o[t._index].length&&(t._bufferIndex=-1,t._index++)),l.previous=I,a=!0}function b(I,y){let S=y||{};return S.type=I,S.start=m(),l.events.push(["enter",S,l]),i.push(S),S}function G(I){let y=i.pop();return y.end=m(),l.events.push(["exit",y,l]),y}function P(I,y){F(I,y.from)}function x(I,y){y.restore()}function T(I,y){return S;function S(w,N,V){let W,B,z,nA;return Array.isArray(w)?aA(w):"tokenize"in w?aA([w]):p(w);function p(fA){return Dj;function Dj(KA){let VA=KA!==null&&fA[KA],XA=KA!==null&&fA.null,Yj=[...Array.isArray(VA)?VA:VA?[VA]:[],...Array.isArray(XA)?XA:XA?[XA]:[]];return aA(Yj)(KA)}}function aA(fA){return W=fA,B=0,fA.length===0?V:FA(fA[B])}function FA(fA){return Dj;function Dj(KA){return nA=J(),z=fA,fA.partial||(l.currentConstruct=fA),fA.name&&l.parser.constructs.disable.null.includes(fA.name)?Mj(KA):fA.tokenize.call(y?Object.assign(Object.create(l),y):l,s,UA,Mj)(KA)}}function UA(fA){return a=!0,I(z,nA),N}function Mj(fA){return a=!0,nA.restore(),++B<W.length?FA(W[B]):V}}}function F(I,y){I.resolveAll&&!n.includes(I)&&n.push(I),I.resolve&&mA(l.events,y,l.events.length-y,I.resolve(l.events.slice(y),l)),I.resolveTo&&(l.events=I.resolveTo(l.events,l))}function J(){let I=m(),y=l.previous,S=l.currentConstruct,w=l.events.length,N=Array.from(i);return{restore:V,from:w};function V(){t=I,l.previous=y,l.currentConstruct=S,l.events.length=w,i=N,v()}}function v(){t.line in r&&t.column<2&&(t.column=r[t.line],t.offset+=r[t.line]-1)}}function Zp(A,e){let j=e.start._index,t=e.start._bufferIndex,r=e.end._index,n=e.end._bufferIndex,o;if(j===r)o=[A[j].slice(t,n)];else{if(o=A.slice(j,r),t>-1){let i=o[0];typeof i=="string"?o[0]=i.slice(t):o.shift()}n>0&&o.push(A[r].slice(0,n))}return o}function A0(A,e){let j=-1,t=[],r;for(;++j<A.length;){let n=A[j],o;if(typeof n=="string")o=n;else switch(n){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(n)}r=n===-2,t.push(o)}return t.join("")}var Go={};Ko(Go,{attentionMarkers:()=>a0,contentInitial:()=>e0,disable:()=>s0,document:()=>j0,flow:()=>r0,flowInitial:()=>t0,insideSpan:()=>i0,string:()=>n0,text:()=>o0});var j0={42:_A,43:_A,45:_A,48:_A,49:_A,50:_A,51:_A,52:_A,53:_A,54:_A,55:_A,56:_A,57:_A,62:xr},e0={91:ao},t0={[-2]:at,[-1]:at,32:at},r0={35:lo,42:Wj,45:[Jr,Wj],60:co,61:Jr,95:Wj,96:Tr,126:Tr},n0={38:Or,92:vr},o0={[-5]:lt,[-4]:lt,[-3]:lt,33:$o,38:Or,42:it,60:[no,uo],91:Eo,92:[so,vr],93:zj,95:it,96:oo},i0={null:[it,cc]},a0={null:[42,95]},s0={null:[]};function Fo(A){let j=Pr([Go,...(A||{}).extensions||[]]),t={defined:[],lazy:{},constructs:j,content:r(ac),document:r(lc),flow:r(kc),string:r(uc),text:r(dc)};return t;function r(n){return o;function o(i){return Bc(t,n,i)}}}function Ro(A){for(;!qr(A););return A}var pc=/[\0\t\n\r]/g;function go(){let A=1,e="",j=!0,t;return r;function r(n,o,i){let a=[],s,l,k,c,u;for(n=e+(typeof n=="string"?n.toString():new TextDecoder(o||void 0).decode(n)),k=0,e="",j&&(n.charCodeAt(0)===65279&&k++,j=void 0);k<n.length;){if(pc.lastIndex=k,s=pc.exec(n),c=s&&s.index!==void 0?s.index:n.length,u=n.charCodeAt(c),!s){e=n.slice(k);break}if(u===10&&k===c&&t)a.push(-3),t=void 0;else switch(t&&(a.push(-5),t=void 0),k<c&&(a.push(n.slice(k,c)),A+=c-k),u){case 0:{a.push(65533),A++;break}case 9:{for(l=Math.ceil(A/4)*4,a.push(-2);A++<l;)a.push(-1);break}case 10:{a.push(-4),A=1;break}default:t=!0,A=1}k=c+1}return i&&(t&&a.push(-5),e&&a.push(e),a.push(null)),a}}var fc={}.hasOwnProperty;function Io(A,e,j){return typeof e!="string"&&(j=e,e=void 0),l0(j)(Ro(Fo(j).document().write(go()(A,e,!0))))}function l0(A){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:n(No),autolinkProtocol:T,autolinkEmail:T,atxHeading:n(Zj),blockQuote:n(KA),characterEscape:T,characterReference:T,codeFenced:n(VA),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:n(VA,o),codeText:n(XA,o),codeTextData:T,data:T,codeFlowValue:T,definition:n(Yj),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:n(Bt),hardBreakEscape:n(wo),hardBreakTrailing:n(wo),htmlFlow:n(qo,o),htmlFlowData:T,htmlText:n(qo,o),htmlTextData:T,image:n(ku),label:o,link:n(No),listItem:n(cu),listItemValue:c,listOrdered:n(Lo,k),listUnordered:n(Lo),paragraph:n(uu),reference:p,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:n(Zj),strong:n(du),thematicBreak:n(Eu)},exit:{atxHeading:a(),atxHeadingSequence:b,autolink:a(),autolinkEmail:Dj,autolinkProtocol:fA,blockQuote:a(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:FA,characterReferenceMarkerNumeric:FA,characterReferenceValue:UA,characterReference:Mj,codeFenced:a(m),codeFencedFence:E,codeFencedFenceInfo:u,codeFencedFenceMeta:$,codeFlowValue:F,codeIndented:a(d),codeText:a(S),codeTextData:F,data:F,definition:a(),definitionDestinationString:_,definitionLabelString:f,definitionTitleString:R,emphasis:a(),hardBreakEscape:a(v),hardBreakTrailing:a(v),htmlFlow:a(I),htmlFlowData:F,htmlText:a(y),htmlTextData:F,image:a(N),label:W,labelText:V,lineEnding:J,link:a(w),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:aA,resourceDestinationString:B,resourceTitleString:z,resource:nA,setextHeading:a(x),setextHeadingLineSequence:P,setextHeadingText:G,strong:a(),thematicBreak:a()}};Gc(e,(A||{}).mdastExtensions||[]);let j={};return t;function t(h){let M={type:"root",children:[]},H={stack:[M],tokenStack:[],config:e,enter:i,exit:s,buffer:o,resume:l,data:j},X=[],oA=-1;for(;++oA<h.length;)if(h[oA][1].type==="listOrdered"||h[oA][1].type==="listUnordered")if(h[oA][0]==="enter")X.push(oA);else{let JA=X.pop();oA=r(h,JA,oA)}for(oA=-1;++oA<h.length;){let JA=e[h[oA][0]];fc.call(JA,h[oA][1].type)&&JA[h[oA][1].type].call(Object.assign({sliceSerialize:h[oA][2].sliceSerialize},H),h[oA][1])}if(H.tokenStack.length>0){let JA=H.tokenStack[H.tokenStack.length-1];(JA[1]||mc).call(H,void 0,JA[0])}for(M.position={start:Cj(h.length>0?h[0][1].start:{line:1,column:1,offset:0}),end:Cj(h.length>0?h[h.length-2][1].end:{line:1,column:1,offset:0})},oA=-1;++oA<e.transforms.length;)M=e.transforms[oA](M)||M;return M}function r(h,M,H){let X=M-1,oA=-1,JA=!1,Pj,nj,fe,Ge;for(;++X<=H;){let DA=h[X];switch(DA[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{DA[0]==="enter"?oA++:oA--,Ge=void 0;break}case"lineEndingBlank":{DA[0]==="enter"&&(Pj&&!Ge&&!oA&&!fe&&(fe=X),Ge=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ge=void 0}if(!oA&&DA[0]==="enter"&&DA[1].type==="listItemPrefix"||oA===-1&&DA[0]==="exit"&&(DA[1].type==="listUnordered"||DA[1].type==="listOrdered")){if(Pj){let Ae=X;for(nj=void 0;Ae--;){let oj=h[Ae];if(oj[1].type==="lineEnding"||oj[1].type==="lineEndingBlank"){if(oj[0]==="exit")continue;nj&&(h[nj][1].type="lineEndingBlank",JA=!0),oj[1].type="lineEnding",nj=Ae}else if(!(oj[1].type==="linePrefix"||oj[1].type==="blockQuotePrefix"||oj[1].type==="blockQuotePrefixWhitespace"||oj[1].type==="blockQuoteMarker"||oj[1].type==="listItemIndent"))break}fe&&(!nj||fe<nj)&&(Pj._spread=!0),Pj.end=Object.assign({},nj?h[nj][1].start:DA[1].end),h.splice(nj||X,0,["exit",Pj,DA[2]]),X++,H++}if(DA[1].type==="listItemPrefix"){let Ae={type:"listItem",_spread:!1,start:Object.assign({},DA[1].start),end:void 0};Pj=Ae,h.splice(X,0,["enter",Ae,DA[2]]),X++,H++,fe=void 0,Ge=!0}}}return h[M][1]._spread=JA,H}function n(h,M){return H;function H(X){i.call(this,h(X),X),M&&M.call(this,X)}}function o(){this.stack.push({type:"fragment",children:[]})}function i(h,M,H){this.stack[this.stack.length-1].children.push(h),this.stack.push(h),this.tokenStack.push([M,H]),h.position={start:Cj(M.start),end:void 0}}function a(h){return M;function M(H){h&&h.call(this,H),s.call(this,H)}}function s(h,M){let H=this.stack.pop(),X=this.tokenStack.pop();if(X)X[0].type!==h.type&&(M?M.call(this,h,X[0]):(X[1]||mc).call(this,h,X[0]));else throw new Error("Cannot close `"+h.type+"` ("+Ij({start:h.start,end:h.end})+"): it\u2019s not open");H.position.end=Cj(h.end)}function l(){return Kj(this.stack.pop())}function k(){this.data.expectingFirstListItemValue=!0}function c(h){if(this.data.expectingFirstListItemValue){let M=this.stack[this.stack.length-2];M.start=Number.parseInt(this.sliceSerialize(h),10),this.data.expectingFirstListItemValue=void 0}}function u(){let h=this.resume(),M=this.stack[this.stack.length-1];M.lang=h}function $(){let h=this.resume(),M=this.stack[this.stack.length-1];M.meta=h}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function d(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h.replace(/(\r?\n|\r)$/g,"")}function f(h){let M=this.resume(),H=this.stack[this.stack.length-1];H.label=M,H.identifier=SA(this.sliceSerialize(h)).toLowerCase()}function R(){let h=this.resume(),M=this.stack[this.stack.length-1];M.title=h}function _(){let h=this.resume(),M=this.stack[this.stack.length-1];M.url=h}function b(h){let M=this.stack[this.stack.length-1];if(!M.depth){let H=this.sliceSerialize(h).length;M.depth=H}}function G(){this.data.setextHeadingSlurpLineEnding=!0}function P(h){let M=this.stack[this.stack.length-1];M.depth=this.sliceSerialize(h).codePointAt(0)===61?1:2}function x(){this.data.setextHeadingSlurpLineEnding=void 0}function T(h){let H=this.stack[this.stack.length-1].children,X=H[H.length-1];(!X||X.type!=="text")&&(X=$u(),X.position={start:Cj(h.start),end:void 0},H.push(X)),this.stack.push(X)}function F(h){let M=this.stack.pop();M.value+=this.sliceSerialize(h),M.position.end=Cj(h.end)}function J(h){let M=this.stack[this.stack.length-1];if(this.data.atHardBreak){let H=M.children[M.children.length-1];H.position.end=Cj(h.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(M.type)&&(T.call(this,h),F.call(this,h))}function v(){this.data.atHardBreak=!0}function I(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h}function y(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h}function S(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h}function w(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let M=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=M,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}function N(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let M=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=M,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}function V(h){let M=this.sliceSerialize(h),H=this.stack[this.stack.length-2];H.label=hr(M),H.identifier=SA(M).toLowerCase()}function W(){let h=this.stack[this.stack.length-1],M=this.resume(),H=this.stack[this.stack.length-1];if(this.data.inReference=!0,H.type==="link"){let X=h.children;H.children=X}else H.alt=M}function B(){let h=this.resume(),M=this.stack[this.stack.length-1];M.url=h}function z(){let h=this.resume(),M=this.stack[this.stack.length-1];M.title=h}function nA(){this.data.inReference=void 0}function p(){this.data.referenceType="collapsed"}function aA(h){let M=this.resume(),H=this.stack[this.stack.length-1];H.label=M,H.identifier=SA(this.sliceSerialize(h)).toLowerCase(),this.data.referenceType="full"}function FA(h){this.data.characterReferenceType=h.type}function UA(h){let M=this.sliceSerialize(h),H=this.data.characterReferenceType,X;H?(X=Ir(M,H==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):X=de(M);let oA=this.stack[this.stack.length-1];oA.value+=X}function Mj(h){let M=this.stack.pop();M.position.end=Cj(h.end)}function fA(h){F.call(this,h);let M=this.stack[this.stack.length-1];M.url=this.sliceSerialize(h)}function Dj(h){F.call(this,h);let M=this.stack[this.stack.length-1];M.url="mailto:"+this.sliceSerialize(h)}function KA(){return{type:"blockquote",children:[]}}function VA(){return{type:"code",lang:null,meta:null,value:""}}function XA(){return{type:"inlineCode",value:""}}function Yj(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Bt(){return{type:"emphasis",children:[]}}function Zj(){return{type:"heading",depth:0,children:[]}}function wo(){return{type:"break"}}function qo(){return{type:"html",value:""}}function ku(){return{type:"image",title:null,url:"",alt:null}}function No(){return{type:"link",title:null,url:"",children:[]}}function Lo(h){return{type:"list",ordered:h.type==="listOrdered",start:null,spread:h._spread,children:[]}}function cu(h){return{type:"listItem",spread:h._spread,checked:null,children:[]}}function uu(){return{type:"paragraph",children:[]}}function du(){return{type:"strong",children:[]}}function $u(){return{type:"text",value:""}}function Eu(){return{type:"thematicBreak"}}}function Cj(A){return{line:A.line,column:A.column,offset:A.offset}}function Gc(A,e){let j=-1;for(;++j<e.length;){let t=e[j];Array.isArray(t)?Gc(A,t):k0(A,t)}}function k0(A,e){let j;for(j in e)if(fc.call(e,j))switch(j){case"canContainEols":{let t=e[j];t&&A[j].push(...t);break}case"transforms":{let t=e[j];t&&A[j].push(...t);break}case"enter":case"exit":{let t=e[j];t&&Object.assign(A[j],t);break}}}function mc(A,e){throw A?new Error("Cannot close `"+A.type+"` ("+Ij({start:A.start,end:A.end})+"): a different token (`"+e.type+"`, "+Ij({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ij({start:e.start,end:e.end})+") is still open")}function Ur(A){let e=this;e.parser=j;function j(t){return Io(t,{...e.data("settings"),...A,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Fc(A,e){let j={type:"element",tagName:"blockquote",properties:{},children:A.wrap(A.all(e),!0)};return A.patch(e,j),A.applyData(e,j)}function Rc(A,e){let j={type:"element",tagName:"br",properties:{},children:[]};return A.patch(e,j),[A.applyData(e,j),{type:"text",value:`
`}]}function gc(A,e){let j=e.value?e.value+`
`:"",t={};e.lang&&(t.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:t,children:[{type:"text",value:j}]};return e.meta&&(r.data={meta:e.meta}),A.patch(e,r),r=A.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},A.patch(e,r),r}function Ic(A,e){let j={type:"element",tagName:"del",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function hc(A,e){let j={type:"element",tagName:"em",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function bc(A,e){let j=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",t=String(e.identifier).toUpperCase(),r=LA(t.toLowerCase()),n=A.footnoteOrder.indexOf(t),o,i=A.footnoteCounts.get(t);i===void 0?(i=0,A.footnoteOrder.push(t),o=A.footnoteOrder.length):o=n+1,i+=1,A.footnoteCounts.set(t,i);let a={type:"element",tagName:"a",properties:{href:"#"+j+"fn-"+r,id:j+"fnref-"+r+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};A.patch(e,a);let s={type:"element",tagName:"sup",properties:{},children:[a]};return A.patch(e,s),A.applyData(e,s)}function Sc(A,e){let j={type:"element",tagName:"h"+e.depth,properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function _c(A,e){if(A.options.allowDangerousHtml){let j={type:"raw",value:e.value};return A.patch(e,j),A.applyData(e,j)}}function Vr(A,e){let j=e.referenceType,t="]";if(j==="collapsed"?t+="[]":j==="full"&&(t+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+t}];let r=A.all(e),n=r[0];n&&n.type==="text"?n.value="["+n.value:r.unshift({type:"text",value:"["});let o=r[r.length-1];return o&&o.type==="text"?o.value+=t:r.push({type:"text",value:t}),r}function yc(A,e){let j=String(e.identifier).toUpperCase(),t=A.definitionById.get(j);if(!t)return Vr(A,e);let r={src:LA(t.url||""),alt:e.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);let n={type:"element",tagName:"img",properties:r,children:[]};return A.patch(e,n),A.applyData(e,n)}function Cc(A,e){let j={src:LA(e.url)};e.alt!==null&&e.alt!==void 0&&(j.alt=e.alt),e.title!==null&&e.title!==void 0&&(j.title=e.title);let t={type:"element",tagName:"img",properties:j,children:[]};return A.patch(e,t),A.applyData(e,t)}function Mc(A,e){let j={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};A.patch(e,j);let t={type:"element",tagName:"code",properties:{},children:[j]};return A.patch(e,t),A.applyData(e,t)}function Dc(A,e){let j=String(e.identifier).toUpperCase(),t=A.definitionById.get(j);if(!t)return Vr(A,e);let r={href:LA(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);let n={type:"element",tagName:"a",properties:r,children:A.all(e)};return A.patch(e,n),A.applyData(e,n)}function Pc(A,e){let j={href:LA(e.url)};e.title!==null&&e.title!==void 0&&(j.title=e.title);let t={type:"element",tagName:"a",properties:j,children:A.all(e)};return A.patch(e,t),A.applyData(e,t)}function xc(A,e,j){let t=A.all(e),r=j?c0(j):vc(e),n={},o=[];if(typeof e.checked=="boolean"){let l=t[0],k;l&&l.type==="element"&&l.tagName==="p"?k=l:(k={type:"element",tagName:"p",properties:{},children:[]},t.unshift(k)),k.children.length>0&&k.children.unshift({type:"text",value:" "}),k.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),n.className=["task-list-item"]}let i=-1;for(;++i<t.length;){let l=t[i];(r||i!==0||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`}),l.type==="element"&&l.tagName==="p"&&!r?o.push(...l.children):o.push(l)}let a=t[t.length-1];a&&(r||a.type!=="element"||a.tagName!=="p")&&o.push({type:"text",value:`
`});let s={type:"element",tagName:"li",properties:n,children:o};return A.patch(e,s),A.applyData(e,s)}function c0(A){let e=!1;if(A.type==="list"){e=A.spread||!1;let j=A.children,t=-1;for(;!e&&++t<j.length;)e=vc(j[t])}return e}function vc(A){let e=A.spread;return e??A.children.length>1}function Oc(A,e){let j={},t=A.all(e),r=-1;for(typeof e.start=="number"&&e.start!==1&&(j.start=e.start);++r<t.length;){let o=t[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){j.className=["contains-task-list"];break}}let n={type:"element",tagName:e.ordered?"ol":"ul",properties:j,children:A.wrap(t,!0)};return A.patch(e,n),A.applyData(e,n)}function Tc(A,e){let j={type:"element",tagName:"p",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function wc(A,e){let j={type:"root",children:A.wrap(A.all(e))};return A.patch(e,j),A.applyData(e,j)}function qc(A,e){let j={type:"element",tagName:"strong",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}var Xr=Nc("end"),zr=Nc("start");function Nc(A){return e;function e(j){let t=j&&j.position&&j.position[A]||{};if(typeof t.line=="number"&&t.line>0&&typeof t.column=="number"&&t.column>0)return{line:t.line,column:t.column,offset:typeof t.offset=="number"&&t.offset>-1?t.offset:void 0}}}function ho(A){let e=zr(A),j=Xr(A);if(e&&j)return{start:e,end:j}}function Lc(A,e){let j=A.all(e),t=j.shift(),r=[];if(t){let o={type:"element",tagName:"thead",properties:{},children:A.wrap([t],!0)};A.patch(e.children[0],o),r.push(o)}if(j.length>0){let o={type:"element",tagName:"tbody",properties:{},children:A.wrap(j,!0)},i=zr(e.children[1]),a=Xr(e.children[e.children.length-1]);i&&a&&(o.position={start:i,end:a}),r.push(o)}let n={type:"element",tagName:"table",properties:{},children:A.wrap(r,!0)};return A.patch(e,n),A.applyData(e,n)}function Kc(A,e,j){let t=j?j.children:void 0,n=(t?t.indexOf(e):1)===0?"th":"td",o=j&&j.type==="table"?j.align:void 0,i=o?o.length:e.children.length,a=-1,s=[];for(;++a<i;){let k=e.children[a],c={},u=o?o[a]:void 0;u&&(c.align=u);let $={type:"element",tagName:n,properties:c,children:[]};k&&($.children=A.all(k),A.patch(k,$),$=A.applyData(k,$)),s.push($)}let l={type:"element",tagName:"tr",properties:{},children:A.wrap(s,!0)};return A.patch(e,l),A.applyData(e,l)}function Jc(A,e){let j={type:"element",tagName:"td",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function Hc(A,e){let j={type:"text",value:vi(String(e.value))};return A.patch(e,j),A.applyData(e,j)}function Qc(A,e){let j={type:"element",tagName:"hr",properties:{},children:[]};return A.patch(e,j),A.applyData(e,j)}var Uc={blockquote:Fc,break:Rc,code:gc,delete:Ic,emphasis:hc,footnoteReference:bc,heading:Sc,html:_c,imageReference:yc,image:Cc,inlineCode:Mc,linkReference:Dc,link:Pc,listItem:xc,list:Oc,paragraph:Tc,root:wc,strong:qc,table:Lc,tableCell:Jc,tableRow:Kc,text:Hc,thematicBreak:Qc,toml:Wr,yaml:Wr,definition:Wr,footnoteDefinition:Wr};function Wr(){}var Vc=typeof self=="object"?self:globalThis,u0=(A,e)=>{let j=(r,n)=>(A.set(n,r),r),t=r=>{if(A.has(r))return A.get(r);let[n,o]=e[r];switch(n){case 0:case-1:return j(o,r);case 1:{let i=j([],r);for(let a of o)i.push(t(a));return i}case 2:{let i=j({},r);for(let[a,s]of o)i[t(a)]=t(s);return i}case 3:return j(new Date(o),r);case 4:{let{source:i,flags:a}=o;return j(new RegExp(i,a),r)}case 5:{let i=j(new Map,r);for(let[a,s]of o)i.set(t(a),t(s));return i}case 6:{let i=j(new Set,r);for(let a of o)i.add(t(a));return i}case 7:{let{name:i,message:a}=o;return j(new Vc[i](a),r)}case 8:return j(BigInt(o),r);case"BigInt":return j(Object(BigInt(o)),r)}return j(new Vc[n](o),r)};return t},yo=A=>u0(new Map,A)(0);var pe="",{toString:d0}={},{keys:$0}=Object,$t=A=>{let e=typeof A;if(e!=="object"||!A)return[0,e];let j=d0.call(A).slice(8,-1);switch(j){case"Array":return[1,pe];case"Object":return[2,pe];case"Date":return[3,pe];case"RegExp":return[4,pe];case"Map":return[5,pe];case"Set":return[6,pe]}return j.includes("Array")?[1,j]:j.includes("Error")?[7,j]:[2,j]},e6=([A,e])=>A===0&&(e==="function"||e==="symbol"),E0=(A,e,j,t)=>{let r=(o,i)=>{let a=t.push(o)-1;return j.set(i,a),a},n=o=>{if(j.has(o))return j.get(o);let[i,a]=$t(o);switch(i){case 0:{let l=o;switch(a){case"bigint":i=8,l=o.toString();break;case"function":case"symbol":if(A)throw new TypeError("unable to serialize "+a);l=null;break;case"undefined":return r([-1],o)}return r([i,l],o)}case 1:{if(a)return r([a,[...o]],o);let l=[],k=r([i,l],o);for(let c of o)l.push(n(c));return k}case 2:{if(a)switch(a){case"BigInt":return r([a,o.toString()],o);case"Boolean":case"Number":case"String":return r([a,o.valueOf()],o)}if(e&&"toJSON"in o)return n(o.toJSON());let l=[],k=r([i,l],o);for(let c of $0(o))(A||!e6($t(o[c])))&&l.push([n(c),n(o[c])]);return k}case 3:return r([i,o.toISOString()],o);case 4:{let{source:l,flags:k}=o;return r([i,{source:l,flags:k}],o)}case 5:{let l=[],k=r([i,l],o);for(let[c,u]of o)(A||!(e6($t(c))||e6($t(u))))&&l.push([n(c),n(u)]);return k}case 6:{let l=[],k=r([i,l],o);for(let c of o)(A||!e6($t(c)))&&l.push(n(c));return k}}let{message:s}=o;return r([i,{name:a,message:s}],o)};return n},Co=(A,{json:e,lossy:j}={})=>{let t=[];return E0(!(e||j),!!e,new Map,t)(A),t};var me=typeof structuredClone=="function"?(A,e)=>e&&("json"in e||"lossy"in e)?yo(Co(A,e)):structuredClone(A):(A,e)=>yo(Co(A,e));function B0(A,e){let j=[{type:"text",value:"\u21A9"}];return e>1&&j.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),j}function p0(A,e){return"Back to reference "+(A+1)+(e>1?"-"+e:"")}function Xc(A){let e=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",j=A.options.footnoteBackContent||B0,t=A.options.footnoteBackLabel||p0,r=A.options.footnoteLabel||"Footnotes",n=A.options.footnoteLabelTagName||"h2",o=A.options.footnoteLabelProperties||{className:["sr-only"]},i=[],a=-1;for(;++a<A.footnoteOrder.length;){let s=A.footnoteById.get(A.footnoteOrder[a]);if(!s)continue;let l=A.all(s),k=String(s.identifier).toUpperCase(),c=LA(k.toLowerCase()),u=0,$=[],E=A.footnoteCounts.get(k);for(;E!==void 0&&++u<=E;){$.length>0&&$.push({type:"text",value:" "});let f=typeof j=="string"?j:j(a,u);typeof f=="string"&&(f={type:"text",value:f}),$.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:typeof t=="string"?t:t(a,u),className:["data-footnote-backref"]},children:Array.isArray(f)?f:[f]})}let m=l[l.length-1];if(m&&m.type==="element"&&m.tagName==="p"){let f=m.children[m.children.length-1];f&&f.type==="text"?f.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...$)}else l.push(...$);let d={type:"element",tagName:"li",properties:{id:e+"fn-"+c},children:A.wrap(l,!0)};A.patch(s,d),i.push(d)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:n,properties:{...me(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:A.wrap(i,!0)},{type:"text",value:`
`}]}}var Mo={}.hasOwnProperty,m0={};function Wc(A,e){let j=e||m0,t=new Map,r=new Map,n=new Map,o={...Uc,...j.handlers},i={all:s,applyData:G0,definitionById:t,footnoteById:r,footnoteCounts:n,footnoteOrder:[],handlers:o,one:a,options:j,patch:f0,wrap:R0};return xt(A,function(l){if(l.type==="definition"||l.type==="footnoteDefinition"){let k=l.type==="definition"?t:r,c=String(l.identifier).toUpperCase();k.has(c)||k.set(c,l)}}),i;function a(l,k){let c=l.type,u=i.handlers[c];if(Mo.call(i.handlers,c)&&u)return u(i,l,k);if(i.options.passThrough&&i.options.passThrough.includes(c)){if("children"in l){let{children:E,...m}=l,d=me(m);return d.children=i.all(l),d}return me(l)}return(i.options.unknownHandler||F0)(i,l,k)}function s(l){let k=[];if("children"in l){let c=l.children,u=-1;for(;++u<c.length;){let $=i.one(c[u],l);if($){if(u&&c[u-1].type==="break"&&(!Array.isArray($)&&$.type==="text"&&($.value=zc($.value)),!Array.isArray($)&&$.type==="element")){let E=$.children[0];E&&E.type==="text"&&(E.value=zc(E.value))}Array.isArray($)?k.push(...$):k.push($)}}}return k}}function f0(A,e){A.position&&(e.position=ho(A))}function G0(A,e){let j=e;if(A&&A.data){let t=A.data.hName,r=A.data.hChildren,n=A.data.hProperties;if(typeof t=="string")if(j.type==="element")j.tagName=t;else{let o="children"in j?j.children:[j];j={type:"element",tagName:t,properties:{},children:o}}j.type==="element"&&n&&Object.assign(j.properties,me(n)),"children"in j&&j.children&&r!==null&&r!==void 0&&(j.children=r)}return j}function F0(A,e){let j=e.data||{},t="value"in e&&!(Mo.call(j,"hProperties")||Mo.call(j,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:A.all(e)};return A.patch(e,t),A.applyData(e,t)}function R0(A,e){let j=[],t=-1;for(e&&j.push({type:"text",value:`
`});++t<A.length;)t&&j.push({type:"text",value:`
`}),j.push(A[t]);return e&&A.length>0&&j.push({type:"text",value:`
`}),j}function zc(A){let e=0,j=A.charCodeAt(e);for(;j===9||j===32;)e++,j=A.charCodeAt(e);return A.slice(e)}function t6(A,e){let j=Wc(A,e),t=j.one(A,void 0),r=Xc(j),n=Array.isArray(t)?{type:"root",children:t}:t||{type:"root",children:[]};return r&&("children"in n,n.children.push({type:"text",value:`
`},r)),n}function r6(A,e){return A&&"run"in A?async function(j,t){let r=t6(j,{file:t,...e});await A.run(r,t)}:function(j,t){return t6(j,{file:t,...A||e})}}function n6(A){let e=this;e.compiler=j;function j(t){return Dn(t,{...e.data("settings"),...A,extensions:e.data("toMarkdownExtensions")||[]})}}function Do(A){if(A)throw A}var a6=l6(ou(),1);function Et(A){if(typeof A!="object"||A===null)return!1;let e=Object.getPrototypeOf(A);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)}function Po(){let A=[],e={run:j,use:t};return e;function j(...r){let n=-1,o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);i(null,...r);function i(a,...s){let l=A[++n],k=-1;if(a){o(a);return}for(;++k<r.length;)(s[k]===null||s[k]===void 0)&&(s[k]=r[k]);r=s,l?iu(l,i)(...s):o(null,...s)}}function t(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return A.push(r),e}}function iu(A,e){let j;return t;function t(...o){let i=A.length>o.length,a;i&&o.push(r);try{a=A.apply(this,o)}catch(s){let l=s;if(i&&j)throw l;return r(l)}i||(a&&a.then&&typeof a.then=="function"?a.then(n,r):a instanceof Error?r(a):n(a))}function r(o,...i){j||(j=!0,e(o,...i))}function n(o){r(null,o)}}var au=function(A){let t=this.constructor.prototype,r=t[A],n=function(){return r.apply(n,arguments)};return Object.setPrototypeOf(n,t),n};var g0={}.hasOwnProperty,To=class A extends au{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Po()}copy(){let e=new A,j=-1;for(;++j<this.attachers.length;){let t=this.attachers[j];e.use(...t)}return e.data((0,a6.default)(!0,{},this.namespace)),e}data(e,j){return typeof e=="string"?arguments.length===2?(Oo("data",this.frozen),this.namespace[e]=j,this):g0.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Oo("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[j,...t]=this.attachers[this.freezeIndex];if(t[0]===!1)continue;t[0]===!0&&(t[0]=void 0);let r=j.call(e,...t);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let j=i6(e),t=this.parser||this.Parser;return xo("parse",t),t(String(j),j)}process(e,j){let t=this;return this.freeze(),xo("process",this.parser||this.Parser),vo("process",this.compiler||this.Compiler),j?r(void 0,j):new Promise(r);function r(n,o){let i=i6(e),a=t.parse(i);t.run(a,i,function(l,k,c){if(l||!k||!c)return s(l);let u=k,$=t.stringify(u,c);h0($)?c.value=$:c.result=$,s(l,c)});function s(l,k){l||!k?o(l):n?n(k):j(void 0,k)}}}processSync(e){let j=!1,t;return this.freeze(),xo("processSync",this.parser||this.Parser),vo("processSync",this.compiler||this.Compiler),this.process(e,r),lu("processSync","process",j),t;function r(n,o){j=!0,Do(n),t=o}}run(e,j,t){su(e),this.freeze();let r=this.transformers;return!t&&typeof j=="function"&&(t=j,j=void 0),t?n(void 0,t):new Promise(n);function n(o,i){let a=i6(j);r.run(e,a,s);function s(l,k,c){let u=k||e;l?i(l):o?o(u):t(void 0,u,c)}}}runSync(e,j){let t=!1,r;return this.run(e,j,n),lu("runSync","run",t),r;function n(o,i){Do(o),r=i,t=!0}}stringify(e,j){this.freeze();let t=i6(j),r=this.compiler||this.Compiler;return vo("stringify",r),su(e),r(e,t)}use(e,...j){let t=this.attachers,r=this.namespace;if(Oo("use",this.frozen),e!=null)if(typeof e=="function")a(e,j);else if(typeof e=="object")Array.isArray(e)?i(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function n(s){if(typeof s=="function")a(s,[]);else if(typeof s=="object")if(Array.isArray(s)){let[l,...k]=s;a(l,k)}else o(s);else throw new TypeError("Expected usable value, not `"+s+"`")}function o(s){if(!("plugins"in s)&&!("settings"in s))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(s.plugins),s.settings&&(r.settings=(0,a6.default)(!0,r.settings,s.settings))}function i(s){let l=-1;if(s!=null)if(Array.isArray(s))for(;++l<s.length;){let k=s[l];n(k)}else throw new TypeError("Expected a list of plugins, not `"+s+"`")}function a(s,l){let k=-1,c=-1;for(;++k<t.length;)if(t[k][0]===s){c=k;break}if(c===-1)t.push([s,...l]);else if(l.length>0){let[u,...$]=l,E=t[c][1];Et(E)&&Et(u)&&(u=(0,a6.default)(!0,E,u)),t[c]=[s,u,...$]}}}},s6=new To().freeze();function xo(A,e){if(typeof e!="function")throw new TypeError("Cannot `"+A+"` without `parser`")}function vo(A,e){if(typeof e!="function")throw new TypeError("Cannot `"+A+"` without `compiler`")}function Oo(A,e){if(e)throw new Error("Cannot call `"+A+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function su(A){if(!Et(A)||typeof A.type!="string")throw new TypeError("Expected node, got `"+A+"`")}function lu(A,e,j){if(!j)throw new Error("`"+A+"` finished async. Use `"+e+"` instead")}function i6(A){return I0(A)?A:new Ke(A)}function I0(A){return!!(A&&typeof A=="object"&&"message"in A&&"messages"in A)}function h0(A){return typeof A=="string"||b0(A)}function b0(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}var S0=/^(#{1,6})\s+(.+)$/m,_0=/\*\*(.*?)\*\*/,y0=/\*(.*?)\*/,C0=/^\s*[-*+]\s+(.+)$/m,M0=/^\s*(\d+)\.\s+(.+)$/m,D0=/^>\s+(.+)$/m,P0=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/,x0=/`([^`]+)`/,v0=/```[\s\S]*?```/,O0=/^\s*\|(.+\|)+\s*$/m,T0=/~~(.*?)~~/,w0=/^\s*[-*+]\s+\[[ x]\]\s+\S/m,q0=/^(-{3,}|_{3,})\s*$/m,N0=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/,L0=/<(https?:\/\/[^>]+)>/;function yv(A){return!A||A.length===0?!1:[S0,_0,y0,C0,M0,D0,P0,x0,v0,O0,T0,w0,q0,N0,L0].some(j=>j.test(A))}function K0(A){return s6().use(Ur).use(Dr).use(kt).use(r6,{handlers:{break:function(j,t){let r={type:"element",tagName:"br",properties:{},children:[]};return j.patch(t,r),[j.applyData(t,r)]}}}).use(Mr).processSync(A).toString()}function Cv(A,e){let j=K0(A),t=document.createElement("div");return t.innerHTML=j,Pi.fromSchema(e).parseSlice(t,{preserveWhitespace:!0})}function Mv(A,e,j){let t={},r;for(r in j.nodes){let a=j.nodes[r].spec.toMarkdown;t[r]=(...s)=>a(...s,e)}let n={},o;for(o in j.marks){let a=j.marks[o].spec.toMarkdown;n[o]=(...s)=>a(...s,e)}let i=qi(A,{schema:j,nodeHandlers:t,markHandlers:n});return s6().use(kt).use(n6,{handlers:{text(...a){let[s]=a;return s.data?.avoidEscaping?s.value:$j.text(...a)}},bullet:"-",emphasis:"_"}).stringify(i)}function Ov({stackElement:A,tree:e}){return A?e.getNodeWithTrait(A.type==="temporary"?A.collectionId:e.getParent(A.itemId)?.id,fj):null}function Tv({treeStore:A,contentManagementStore:e,stackElement:j}){if(!j)return null;if(j.type==="existing")return A.tree.getNodeWithTrait(j.itemId,be);if(j.type==="temporary")return e.temporaryItemCache.get(j.itemId)??null;PA(j)}function wv(A,e=[]){let j=A.stores.selectionStore.ids.length===1?c6(A.stores.selectionStore.ids,0):void 0,t=H0(A,e),r=c6(t,0),n=A.tree.getNodeWithTrait(j,be);if(n){if(!r)return[{itemId:n.id,type:"existing"}];if(r.type==="existing")return r.itemId===n.id?t:(g(t.length===1,"Must dismiss overlay stack before changing selection"),[{itemId:n.id,type:"existing"}]);if(r.type==="temporary")throw new Error("Must save temporary item stack before selecting a collection item");PA(r)}if(!r||r.type==="temporary")return t;if(r.type==="existing")return A.stores.chromeStore.mainView!==2?t:(g(t.length===1,"Must dismiss overlay stack before de-selecting collection item"),[]);PA(r)}function H0(A,e){let j=[];for(let t=0;t<e.length;t++){let r=e[t];if(!r)continue;if(r.type==="temporary"&&A.tree.has(r.itemId)&&(r={type:"existing",itemId:r.itemId}),!Q0(A,r))break;j.push(r),t>0&&g(r.type==="existing"||!!r.saveAction,"Temporary items in the stack must have saveAction, except when they are the first")}return j}function Q0(A,e){if(e.type==="temporary")return g(!A.tree.has(e.itemId),"Temporary stack element must not exist in the tree. It should be turned existing before passing it to validateOverlayStackElement."),A.tree.has(e.collectionId)&&A.stores.contentManagementStore.temporaryItemCache.has(e.itemId);if(e.type==="existing")return A.tree.has(e.itemId);PA(e)}function Nv(A,e){let j=e.getItemIds(A.id);if(j)return j[0]}export{Ks as a,Js as b,gA as c,Ke as d,Fl as e,n$ as f,pn as g,hl as h,bl as i,Nv as j,ir as k,gf as l,If as m,kr as n,Vu as o,F7 as p,R7 as q,g7 as r,rF as s,Zu as t,CF as u,h7 as v,b7 as w,S7 as x,MF as y,DF as z,PF as A,od as B,xF as C,rA as D,vF as E,OF as F,I7 as G,Nu as H,ar as I,X6 as J,z6 as K,JF as L,HF as M,QF as N,UF as O,VF as P,sd as Q,XF as R,C7 as S,An as T,v7 as U,og as V,O7 as W,Vf as X,o7 as Y,i7 as Z,Xf as _,hj as $,cg as aa,ae as ba,ug as ca,q7 as da,Ve as ea,bg as fa,Gd as ga,Sg as ha,Fd as ia,Rd as ja,en as ka,N7 as la,_g as ma,L7 as na,yg as oa,on as pa,an as qa,sn as ra,_d as sa,SI as ta,lG as ua,kG as va,u7 as wa,dl as xa,Ud as ya,Vd as za,$7 as Aa,mn as Ba,l$ as Ca,_l as Da,c$ as Ea,E7 as Fa,yl as Ga,Cl as Ha,E$ as Ia,Gn as Ja,B$ as Ka,hS as La,qS as Ma,m$ as Na,f$ as Oa,xl as Pa,Hj as Qa,Dr as Ra,Ur as Sa,r6 as Ta,s6 as Ua,yv as Va,K0 as Wa,Cv as Xa,Mv as Ya,Ov as Za,Tv as _a,wv as $a,H0 as ab};
//# sourceMappingURL=https://app.framerstatic.com/chunk-NDJDKMBM.mjs.map
