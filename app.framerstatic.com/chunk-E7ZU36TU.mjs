import{c as _i,e as qi,f as mo,g as Yi}from"https://app.framerstatic.com/chunk-QYDLTJ2P.mjs";import{Ha as ji,Na as $i,Pa as Ze,Va as Xi,Xa as Ki,e as Oi,f as Bi,g as Ei,h as Li,i as Ai,j as yt}from"https://app.framerstatic.com/chunk-NDJDKMBM.mjs";import{G as Ti,Nd as co,Qa as wi,X as Ni,Y as Mi,bc as Di,ea as Ri,h as xi,j as Ci,k as bi,l as Ii,m as nr,pa as Pi,pb as Fi}from"https://app.framerstatic.com/chunk-TAQLITMJ.mjs";import{b as Gi,c as gt}from"https://app.framerstatic.com/chunk-SGE7S3UE.mjs";import{a as zi}from"https://app.framerstatic.com/chunk-KQIDTEPV.mjs";import{k as sr}from"https://app.framerstatic.com/chunk-EDICM4ZE.mjs";import{i as Ui}from"https://app.framerstatic.com/chunk-YE4QPCYK.mjs";import{g as Ji,h as ta}from"https://app.framerstatic.com/chunk-GWDCOJRU.mjs";import{b as Ye}from"https://app.framerstatic.com/chunk-BTZXTEZJ.mjs";import{b as po,c as Hi,g as ea}from"https://app.framerstatic.com/chunk-UPSEOFNI.mjs";import{g as ar,u as Wi}from"https://app.framerstatic.com/chunk-6IZ5CTSQ.mjs";import{a as Vi}from"https://app.framerstatic.com/chunk-35HHB5TS.mjs";import{Ab as hi,G as jn,Ld as so,Mb as gi,Md as lo,Nb as yi,O as er,P as Jn,Qc as no,Tg as rr,U as ti,Vb as Si,a as Gn,e as Hn,ia as _e,la as Zt,m as Wn,rb as ro,sb as ui,tb as fi,va as ft,wa as oi,yd as io,ye as tr,yf as vi,za as ri,zd as ao,ze as or}from"https://app.framerstatic.com/chunk-DPLENNOO.mjs";import{e as Qo}from"https://app.framerstatic.com/chunk-7DZRNN4K.mjs";import{f as qe}from"https://app.framerstatic.com/chunk-H4WBCNOK.mjs";import{b as Qi,d as lr}from"https://app.framerstatic.com/chunk-6GUIIDJM.mjs";import{Ug as ht}from"https://app.framerstatic.com/chunk-SIIQYSAG.mjs";import{a as Zi}from"https://app.framerstatic.com/chunk-3LCEKAEC.mjs";import{C as _n,Df as di,E as Ke,Hc as Qt,Ii as oo,Oc as ii,R as qn,T as Yn,V as Zn,bi as mi,ch as pi,ed as ai,kc as Jt,l as Un,n as $n,o as _t,p as Xn,r as qt,v as Kn,y as Yt}from"https://app.framerstatic.com/chunk-3XJVYL4D.mjs";import{$d as Ae,$q as Mn,$s as Zo,B as R,Bc as Et,Bk as pn,Dc as Ho,Fr as _o,Fv as Ln,G as zo,H as D,He as Vt,I as N,Ib as jr,Ie as Uo,Ig as $t,Iq as ct,Jc as he,Je as it,Jf as rn,Jq as $e,Jv as An,Ke as Yr,Le as Zr,Lp as xn,Mc as Xr,Mu as ut,Ne as zt,Nv as Vn,Oe as Gt,Pe as Ht,Pf as jo,Po as gn,Qe as Wt,Qj as ln,Re as Z,Rj as cn,Sj as dn,Sk as mn,Te as Ve,Tq as Tn,Ue as ze,Ul as Xt,Um as $o,Uq as Nn,Ur as mt,V as Wr,Vr as Xe,W as Go,We as Jr,Wq as z,Xe as Qr,Ye as ge,Yn as fn,Zd as Kr,Ze as Ut,Zr as ne,_r as Pn,_s as Yo,ae as Lt,af as at,ag as nn,at as Fn,be as _r,bf as Ge,bt as Dn,bw as zn,cf as en,cp as yn,df as jt,dr as dt,eo as Xo,fo as hn,ft as B,ga as le,gj as an,he as At,hm as un,ho as Ko,id as O,ip as Sn,iw as Qn,jd as V,jj as ye,jm as He,jr as Rn,jw as ei,kb as Ot,kd as Le,l as j,lj as Se,ln as lt,lr as pt,mj as oe,mp as vn,mw as si,nc as Bt,nv as Bn,of as tn,pw as li,qw as ci,rt as On,se as Wo,sv as En,tj as sn,ue as qr,vc as _,vm as st,wr as kn,wt as Jo,xf as on,xv as Kt,yf as Me,zc as $r}from"https://app.framerstatic.com/chunk-O7B2OPHS.mjs";import{a as wn,b as qo}from"https://app.framerstatic.com/chunk-6C6VSETA.mjs";import{c as We,g as Ue,i as Cn,r as je,u as q,v as bn,w as re,y as Q,z as In}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{a as ni}from"https://app.framerstatic.com/chunk-R3NZHMAQ.mjs";import{K as Vo,L as Zl,f as Ao,p as Vr,q as zr,s as Gr}from"https://app.framerstatic.com/chunk-WHDKBU2K.mjs";import{b as eo,c as to}from"https://app.framerstatic.com/chunk-SQ3KTMH2.mjs";import{L as Ar}from"https://app.framerstatic.com/chunk-3UVLKWUZ.mjs";import{g as $,i as ir,m as ki}from"https://app.framerstatic.com/chunk-52AHQOTG.mjs";import{b as Lr}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as te}from"https://app.framerstatic.com/chunk-NEFK4M7X.mjs";import{b as fe,d as W,i as ce,j as Ur,l as Ne}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Ia as Dt,b as Hr}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{e as Lo,f as Br,k as Er}from"https://app.framerstatic.com/chunk-WWFRYK5U.mjs";import{A as H,D as wt,E as Ft,F as Be,H as Bo,I as Dr,J as Eo,L as Ee,M as ue,fa as Or,l as E,p as Fr,v as me,z as k}from"https://app.framerstatic.com/chunk-35MJ64JF.mjs";import{a as x,b as Te}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{c as nt,d as Yl,e as Pt,j as I,k as se,l as Oo}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var xt=nt(ve=>{"use strict";ve.removeLeadingAndTrailingHTTPWhitespace=e=>e.replace(/^[ \t\n\r]+/u,"").replace(/[ \t\n\r]+$/u,"");ve.removeTrailingHTTPWhitespace=e=>e.replace(/[ \t\n\r]+$/u,"");ve.isHTTPWhitespaceChar=e=>e===" "||e==="	"||e===`
`||e==="\r";ve.solelyContainsHTTPTokenCodePoints=e=>/^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(e);ve.soleyContainsHTTPQuotedStringTokenCodePoints=e=>/^[\t\u0020-\u007E\u0080-\u00FF]*$/u.test(e);ve.asciiLowercase=e=>e.replace(/[A-Z]/ug,t=>t.toLowerCase());ve.collectAnHTTPQuotedString=(e,t)=>{let o="";for(t++;;){for(;t<e.length&&e[t]!=='"'&&e[t]!=="\\";)o+=e[t],++t;if(t>=e.length)break;let r=e[t];if(++t,r==="\\"){if(t>=e.length){o+="\\";break}o+=e[t],++t}else break}return[o,t]}});var Ms=nt((Wy,Ns)=>{"use strict";var{asciiLowercase:yo,solelyContainsHTTPTokenCodePoints:op,soleyContainsHTTPQuotedStringTokenCodePoints:rp}=xt();Ns.exports=class{constructor(t){this._map=t}get size(){return this._map.size}get(t){return t=yo(String(t)),this._map.get(t)}has(t){return t=yo(String(t)),this._map.has(t)}set(t,o){if(t=yo(String(t)),o=String(o),!op(t))throw new Error(`Invalid MIME type parameter name "${t}": only HTTP token code points are valid.`);if(!rp(o))throw new Error(`Invalid MIME type parameter value "${o}": only HTTP quoted-string token code points are valid.`);return this._map.set(t,o)}clear(){this._map.clear()}delete(t){return t=yo(String(t)),this._map.delete(t)}forEach(t,o){this._map.forEach(t,o)}keys(){return this._map.keys()}values(){return this._map.values()}entries(){return this._map.entries()}[Symbol.iterator](){return this._map[Symbol.iterator]()}}});var Ps=nt((Uy,ks)=>{"use strict";var{removeLeadingAndTrailingHTTPWhitespace:np,removeTrailingHTTPWhitespace:Rs,isHTTPWhitespaceChar:ip,solelyContainsHTTPTokenCodePoints:xr,soleyContainsHTTPQuotedStringTokenCodePoints:ap,asciiLowercase:Cr,collectAnHTTPQuotedString:sp}=xt();ks.exports=e=>{e=np(e);let t=0,o="";for(;t<e.length&&e[t]!=="/";)o+=e[t],++t;if(o.length===0||!xr(o)||t>=e.length)return null;++t;let r="";for(;t<e.length&&e[t]!==";";)r+=e[t],++t;if(r=Rs(r),r.length===0||!xr(r))return null;let n={type:Cr(o),subtype:Cr(r),parameters:new Map};for(;t<e.length;){for(++t;ip(e[t]);)++t;let i="";for(;t<e.length&&e[t]!==";"&&e[t]!=="=";)i+=e[t],++t;if(i=Cr(i),t<e.length){if(e[t]===";")continue;++t}let a=null;if(e[t]==='"')for([a,t]=sp(e,t);t<e.length&&e[t]!==";";)++t;else{for(a="";t<e.length&&e[t]!==";";)a+=e[t],++t;if(a=Rs(a),a==="")continue}i.length>0&&xr(i)&&ap(a)&&!n.parameters.has(i)&&n.parameters.set(i,a)}return n}});var Fs=nt((jy,ws)=>{"use strict";var{solelyContainsHTTPTokenCodePoints:lp}=xt();ws.exports=e=>{let t=`${e.type}/${e.subtype}`;if(e.parameters.size===0)return t;for(let[o,r]of e.parameters)t+=";",t+=o,t+="=",(!lp(r)||r.length===0)&&(r=r.replace(/(["\\])/ug,"\\$1"),r=`"${r}"`),t+=r;return t}});var Es=nt((Xy,Bs)=>{"use strict";var cp=Ms(),dp=Ps(),pp=Fs(),{asciiLowercase:Ds,solelyContainsHTTPTokenCodePoints:Os}=xt();Bs.exports=class{constructor(t){t=String(t);let o=dp(t);if(o===null)throw new Error(`Could not parse MIME type string "${t}"`);this._type=o.type,this._subtype=o.subtype,this._parameters=new cp(o.parameters)}static parse(t){try{return new this(t)}catch{return null}}get essence(){return`${this.type}/${this.subtype}`}get type(){return this._type}set type(t){if(t=Ds(String(t)),t.length===0)throw new Error("Invalid type: must be a non-empty string");if(!Os(t))throw new Error(`Invalid type ${t}: must contain only HTTP token code points`);this._type=t}get subtype(){return this._subtype}set subtype(t){if(t=Ds(String(t)),t.length===0)throw new Error("Invalid subtype: must be a non-empty string");if(!Os(t))throw new Error(`Invalid subtype ${t}: must contain only HTTP token code points`);this._subtype=t}get parameters(){return this._parameters}toString(){return pp(this)}isJavaScript({prohibitParameters:t=!1}={}){switch(this._type){case"text":switch(this._subtype){case"ecmascript":case"javascript":case"javascript1.0":case"javascript1.1":case"javascript1.2":case"javascript1.3":case"javascript1.4":case"javascript1.5":case"jscript":case"livescript":case"x-ecmascript":case"x-javascript":return!t||this._parameters.size===0;default:return!1}case"application":switch(this._subtype){case"ecmascript":case"javascript":case"x-ecmascript":case"x-javascript":return!t||this._parameters.size===0;default:return!1}default:return!1}}isXML(){return this._subtype==="xml"&&(this._type==="text"||this._type==="application")||this._subtype.endsWith("+xml")}isHTML(){return this._subtype==="html"&&this._type==="text"}}});function oa(e){return e.homeNodeId}function Jl(e,t){let o=oa(t);return o?e.getNode(o):null}function ra(e,t,o){let r=tc(e,t);return!!r&&r.id===o.id}function St(e,t){return t?.parentid===e.id&&!Jr(t)}function na(e,t){let o=e.get(t.homeNodeId);return St(t,o)}function Ql(e,t,o){if(o&&!St(t,o))return;let r=oa(t);o&&o.id===r||o===r||t.set({homeNodeId:o?o.id:null})}function ia(e,t){let o=e.get(t.homeNodeId);if(o){let r=e.getGroundNodeFor(o);if(St(t,r))return r}if(!t.isLoaded())return null;for(let r=t.children.length-1;r>=0;r--){let n=t.children[r];if(n&&ec(t,n))return n}return null}function ec(e,t){return!(!t||!St(e,t)||Ge(t)||ge(t)&&!sn(t))}function tc(e,t){let o=Jl(e,t);return St(t,o)?o:ia(e,t)}function aa(e,t){let o=ia(e,t);Ql(e,t,o)}function sa(e,t,o){!(o&&o.enum===6)&&!na(e,t)&&(aa(e,t),me("app").debug("updated home node:",t.id,t.homeNodeId))}var{onewayMethodTemplate:fu,voidMethodTemplate:hu,valueMethodTemplate:oc,streamMethodTemplate:gu}=Er,dr;(t=>t.service={id:"__ColorSampler__",fingerprint:"2f07b191423077f3239a93a5dec7e417",methods:{sampleColor:{}},newOutgoingWrapper:o=>({sampleColor:oc.bind(-1,"sampleColor",!1,o)})})(dr||={});var pr;(r=>{r.service=dr.service;function t(n){let i=Lo.shared();return{expect:()=>i.expectWithoutDiscovery(r.service,n),discover:a=>i.discover(r.service,n,a),register:a=>i.register({channel:n,service:r.service,implementation:a})}}r.on=t;async function o(n){Lo.shared().unregister(n)}r.unregister=o})(pr||={});var rc={track:!0};function la(e){let t={...e,event:"preview_shown"};Lr(t,rc)}var uo=class extends Ot("VekterTool"){constructor(o,r){super();I(this,"enum",49);I(this,"wantsAutoscrolling",!1);I(this,"engine");I(this,"onKeyDown");I(this,"onKeyPress");I(this,"onKeyUp");I(this,"displaySelectionBox",!1);I(this,"displaySelectionHandles",!1);I(this,"displayPaddingHandles",!1);I(this,"displayGapHandles",!1);I(this,"displayViewportHandle",!1);I(this,"displayViewportLabel",!1);I(this,"cmsBadge","hidden");this.engine=o}start(){}stop(){}cancel(){}update(){}};function ca(e,t){if(e===t)return!0;if(e.constructor!==t.constructor)return!1;let o=e.keys();for(let r of o){switch(r){case"id":case"left":case"right":case"top":case"bottom":case"widthFactor":case"heightFactor":case"centerAnchorX":case"centerAnchorY":case"children":case"parentid":case"styledText":case"cache":case"update":case"mutable":case"isMaster":case"originalid":case"replicaInfo":case"duplicatedFrom":continue}if(r.startsWith("_"))continue;let n=e[r],i=t[r];if(r==="rotation"&&(n=n??0,i=i??0),!le(n,i))return!1}return!0}var da="https://app.framerstatic.com/cursor-add-6XAMN4WT.png";var pa="https://app.framerstatic.com/cursor-add@2x-2LFPOUCY.png";var ma="https://app.framerstatic.com/cursor-disconnect-ZKL7EWFU.png";var ua="https://app.framerstatic.com/cursor-disconnect@2x-OE3AENSJ.png";var fa="https://app.framerstatic.com/cursor-feedback-BOBWQH3Z.png";var ha="https://app.framerstatic.com/cursor-feedback@2x-6D4B4MBW.png";var ga="https://app.framerstatic.com/cursor-grab-FRV55RHP.png";var ya="https://app.framerstatic.com/cursor-grab@2x-GIY2VUEH.png";var Sa="https://app.framerstatic.com/cursor-grabbing-OKC4B74I.png";var va="https://app.framerstatic.com/cursor-grabbing@2x-WE42DW3I.png";var xa="https://app.framerstatic.com/cursor-insert-6UGIJVAR.png";var Ca="https://app.framerstatic.com/cursor-insert@2x-ZOKYLV6L.png";var ba="https://app.framerstatic.com/cursor-remove-Q4ORWDOQ.png";var Ia="https://app.framerstatic.com/cursor-remove@2x-QZ7R5XN6.png";var Ta="https://app.framerstatic.com/cursor-swap-2VDBHJ6M.png";var Na="https://app.framerstatic.com/cursor-swap@2x-BAI7OT3Z.png";var Ma="https://app.framerstatic.com/cursor-vector-add-L3563YFF.png";var Ra="https://app.framerstatic.com/cursor-vector-add@2x-24A2HJDM.png";var ka="https://app.framerstatic.com/cursor-vector-point-6OWAA3FG.png";var Pa="https://app.framerstatic.com/cursor-vector-point@2x-4OEKRKH6.png";var wa="https://app.framerstatic.com/cursor-vector-OLHKU4LP.png";var Fa="https://app.framerstatic.com/cursor-vector@2x-YFL4EEVU.png";var Da="https://app.framerstatic.com/cursor-zoom-in-2YKQ3Z67.png";var Oa="https://app.framerstatic.com/cursor-zoom-in@2x-ZUXRFEB6.png";var Ba="https://app.framerstatic.com/cursor-zoom-out-IWSRWDMJ.png";var Ea="https://app.framerstatic.com/cursor-zoom-out@2x-EW4OYJ5J.png";var La="https://app.framerstatic.com/resize-east-west-ANAPBU4H.png";var Aa="https://app.framerstatic.com/resize-east-west@2x-HS4NZ3H2.png";var Va="https://app.framerstatic.com/resize-east-XHHFSY6J.png";var za="https://app.framerstatic.com/resize-east@2x-3TA77JQ5.png";var Ga="https://app.framerstatic.com/resize-nesw-GL7KYSRE.png";var Ha="https://app.framerstatic.com/resize-nesw@2x-7OD4PILK.png";var Wa="https://app.framerstatic.com/resize-north-east-OYDCT3XA.png";var Ua="https://app.framerstatic.com/resize-north-east@2x-GB4FBRV3.png";var ja="https://app.framerstatic.com/resize-north-south-JYDNIYWS.png";var $a="https://app.framerstatic.com/resize-north-south@2x-IHAJOLEA.png";var Xa="https://app.framerstatic.com/resize-north-west-WOGBMCQ7.png";var Ka="https://app.framerstatic.com/resize-north-west@2x-CGE2AJ7O.png";var _a="https://app.framerstatic.com/resize-north-TOADQ3IJ.png";var qa="https://app.framerstatic.com/resize-north@2x-U6CXDTI2.png";var Ya="https://app.framerstatic.com/resize-nwse-CTXL5YSS.png";var Za="https://app.framerstatic.com/resize-nwse@2x-H5TFIU4Y.png";var Ja="https://app.framerstatic.com/resize-south-east-7BL2E7ZY.png";var Qa="https://app.framerstatic.com/resize-south-east@2x-YOYUZV36.png";var es="https://app.framerstatic.com/resize-south-west-EZHHVQZN.png";var ts="https://app.framerstatic.com/resize-south-west@2x-XZTWVP5E.png";var os="https://app.framerstatic.com/resize-south-MEM66EWG.png";var rs="https://app.framerstatic.com/resize-south@2x-KMVPTHAA.png";var ns="https://app.framerstatic.com/resize-west-GRT5XBDQ.png";var is="https://app.framerstatic.com/resize-west@2x-DBCUQ6K5.png";var as="https://app.framerstatic.com/touch-active-CQT44XON.png";var ss="https://app.framerstatic.com/touch-active@2x-N44WHZVB.png";var ls="https://app.framerstatic.com/touch-K4JGV3WE.png";var cs="https://app.framerstatic.com/touch@2x-M3Y2EBTW.png";var ds={"cursor-add":[da,pa],"cursor-disconnect":[ma,ua],"cursor-feedback":[fa,ha],"cursor-grab":[ga,ya],"cursor-grabbing":[Sa,va],"cursor-insert":[xa,Ca],"cursor-remove":[ba,Ia],"cursor-swap":[Ta,Na],"cursor-vector-add":[Ma,Ra],"cursor-vector-point":[ka,Pa],"cursor-vector":[wa,Fa],"cursor-zoom-in":[Da,Oa],"cursor-zoom-out":[Ba,Ea],"resize-nesw":[Ga,Ha],"resize-nwse":[Ya,Za],"resize-north-east":[Wa,Ua],"resize-north-west":[Xa,Ka],"resize-south-east":[Ja,Qa],"resize-south-west":[es,ts],"resize-east-west":[La,Aa],"resize-west":[ns,is],"resize-east":[Va,za],"resize-north-south":[ja,$a],"resize-north":[_a,qa],"resize-south":[os,rs],"touch-active":[as,ss],touch:[ls,cs]};var nd=Ar.isFirefox(),J=(e,t=12)=>{let o=W(t)?t:t.x,r=W(t)?t:t.y,[n,i]=ds[e];return nd?`url(${n}) ${o} ${r}, auto`:`-webkit-image-set(url(${n}) 1x, url(${i}) 2x) ${o} ${r}, default`},ur={x:6,y:2},Hh=J("cursor-vector",ur),Wh=J("cursor-vector-add",ur),Uh=J("cursor-vector-point",ur),jh=J("cursor-disconnect",10),$h=J("cursor-add",10),Xh=J("cursor-remove",10),Kh=J("cursor-swap",{x:3,y:3}),_h=J("cursor-feedback",{x:16,y:16}),fo={x:15,y:15},qh=J("cursor-insert",fo),Yh=J("cursor-zoom-in",fo),Zh=J("cursor-zoom-out",fo),ps=J("cursor-grabbing",fo),id=(e,t)=>{switch(e){case 0:{if(t.x&&t.y)return 8;if(t.x)return 6;if(t.y)return 2;break}case 1:{if(t.x)return 7;break}case 2:{if(t.x&&t.y)return 6;if(t.x)return 8;if(t.y)return 0;break}case 3:{if(t.y)return 5;break}case 5:{if(t.y)return 3;break}case 6:{if(t.x&&t.y)return 2;if(t.x)return 0;if(t.y)return 8;break}case 7:{if(t.x)return 1;break}case 8:{if(t.x&&t.y)return 0;if(t.x)return 2;if(t.y)return 6;break}default:break}return e},ad=e=>8-e,sd=(e,t,o)=>{let{fx:r,fy:n}=e,i=t.findIndex(d=>d.fx===r&&d.fy===n),a=id(i,o),l=t[a];x(l,"handle must be defined",l,t);let s=ad(a),c=t[s];return x(c,"handle must be defined",c,t),R.angleFromX(c,l)},ld=e=>{switch(e){case 0:return 15;case 1:return 8;case 2:return 9;case 3:return 14;case 5:return 10;case 6:return 13;case 7:return 12;case 8:return 11}},Je=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M5 10.25v3.5c0 .138.112.25.25.25H13v2.7a.25.25 0 0 0 .415.187l5.37-4.699a.25.25 0 0 0 0-.376l-5.37-4.7a.25.25 0 0 0-.415.189V10H5.25a.25.25 0 0 0-.25.25Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M6 11h8V9l3.5 3-3.5 3v-2H6z'/></g></g></svg>") 12 12, pointer`,cd=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M9 13.98v2.72a.25.25 0 0 1-.415.187l-5.37-4.699a.25.25 0 0 1 0-.376l5.37-4.7A.25.25 0 0 1 9 7.302V10l6 .02V7.3a.25.25 0 0 1 .415-.187l5.37 4.699a.25.25 0 0 1 0 .376l-5.37 4.7a.25.25 0 0 1-.415-.189V14l-6-.02Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M16 13v2l3.5-3L16 9v2H8V9l-3.5 3L8 15v-2z'/></g></g></svg>") 12 12, pointer`,mr=e=>e+180,dd=(e,t,o)=>{if(t){let r=t.x.max&&t.x.min,n=t.y.max&&t.y.min,i=ld(e),a=i===8||i===12,l=i===14||i===10;if(a&&n||l&&r)return;if(l&&t.x.max)return Je(mr(o));if(l&&t.x.min)return Je(o);if(a&&t.y.max)return Je(mr(o));if(a&&t.y.min)return Je(o);let s=i===15||i===13||i===9||i===11;if(s&&t.x.max&&t.y.max)return Je(mr(o));if(s&&t.x.min&&t.y.min)return Je(o)}return cd(o)},Jh=(e,t,o,r={})=>{let n=t.findIndex(i=>i.fx===e.fx&&i.fy===e.fy);if(!(n<-1))return dd(n,o,sd(e,t,r))},pd=e=>{switch(e){case 0:return[6,2];case 2:return[0,8];case 8:return[2,6];case 6:return[8,0];default:return[8,0]}},md=(e,t)=>{let{fx:o,fy:r}=e,n=t.findIndex(y=>y.fx===o&&y.fy===r),i=t[n];x(i,"handle must be defined",i,t);let[a,l]=pd(n),s=t[a],c=t[l];x(s&&c,"handle must be defined",a,l,t);let d=R.angleFromX(i,s),m=R.angleFromX(i,c),p=Math.abs(d-m),u=(p>180?360-p:p)/2,h=[t[0],t[4],t[2]];return($t.isClockwise(h)?d:m)+u-180},ud=e=>`url("data:image/svg+xml,<svg width='24px' height='24px' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='M10.25,20 C10.1119288,20 10,19.8880712 10,19.75 L10,12.6035534 C10,12.4654822 10.1119288,12.3535534 10.25,12.3535534 C10.3163041,12.3535534 10.3798926,12.3798926 10.4267767,12.4267767 L12.9218922,14.9225703 C13.5940823,14.1362843 14,13.1155457 14,12 C14,10.8844543 13.5940823,9.86371572 12.9218922,9.07742971 L10.4267767,11.5732233 C10.3798926,11.6201074 10.3163041,11.6464466 10.25,11.6464466 C10.1119288,11.6464466 10,11.5345178 10,11.3964466 L10,4.25 C10,4.11192881 10.1119288,4 10.25,4 L17.3964466,4 C17.4627507,4 17.5263392,4.02633921 17.5732233,4.0732233 C17.6708544,4.17085438 17.6708544,4.32914562 17.5732233,4.4267767 L15.7556302,6.24518726 C17.1490803,7.75912242 18,9.78018974 18,12 C18,14.2195857 17.1492525,16.2404687 15.7560531,17.7543533 L17.5732233,19.5732233 C17.6708544,19.6708544 17.6708544,19.8291456 17.5732233,19.9267767 C17.5263392,19.9736608 17.4627507,20 17.3964466,20 L10.25,20 Z' id='b'/><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='0.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='0.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='0.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 0.75) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b'/></g><g transform='translate(0, 1) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23c)' xlink:href='%23b'/></g><g transform='rotate(${e} 12 12)'><use fill='%23FFF' xlink:href='%23b'/><path d='M11,19 L11,14.5 L12.8568184,16.3571474 C14.160342,15.3514059 15,13.7737593 15,12 C15,10.2262407 14.160342,8.6485941 12.8568184,7.64285263 L11,9.5 L11,5 L12.193,4.99949654 L15.5,5 L14.2798125,6.22017067 C15.9414235,7.59584189 17,9.67429905 17,12 C17,14.3257233 15.9414031,16.4041981 14.2797646,17.779869 L15.5,19 L11,19 Z' fill='%23000'/></g></g></svg>") 12 12, pointer`,Qh=(e,t)=>ud(md(e,t));var fr=e=>Math.max(.5,4/e),hd=e=>Math.max(.5,16/e),hr=(e,t,o)=>{let r=new Set,n=new Set;return e.forEach(i=>{if(t!==void 0){let u=i.width*t,h=i.height*t;if(u<12&&h<12)return}let a=o?.5:1,{x:l,y:s}=co({x:i.x,y:i.y},a),{x:c,y:d}=co({x:i.x+i.width/2,y:i.y+i.height/2},a),{x:m,y:p}=co({x:i.x+i.width,y:i.y+i.height},a);r.add(l).add(c).add(m),n.add(s).add(d).add(p)}),{x:r,y:n}},ms=(e,t,o,r)=>{let n=new Map,i=t?o.x:o.y,a=null,l=null;if(typeof o.width=="number"&&typeof o.height=="number"){let{width:s,height:c}=o;a=t?o.x+s/2:o.y+c/2,l=t?o.x+s:o.y+c}return e.forEach(s=>{let c=Math.abs(i-s),d=Math.abs((a||0)-s),m=Math.abs((l||0)-s),p=null;if(c<r?p=s:a!==null&&d<r?p=s-Math.abs(a-i):l!==null&&m<r&&(p=s-Math.abs(l-i)),p!==null){let u=new Set,h=n.get(p)??u;n=n.set(p,h.add(s))}}),n},hs=(e,t,o)=>{let r=ms(e.x,!0,t,o),n=ms(e.y,!1,t,o);return{x:r,y:n}},us=(e,t)=>{let o=0,r;return e.forEach((n,i)=>{t!==void 0&&i===t||n.size>o&&(o=n.size,r=[i,n])}),r},gd=(e,t)=>{let o=us(e.x,t?t.x:void 0),r=us(e.y,t?t.y:void 0);return{x:o,y:r}},gs=(e,t)=>{if(!t)return e;let o=hr(t);return{x:new Set([...e.x,...o.x]),y:new Set([...e.y,...o.y])}},ys=(e,t,o,r,n)=>{e=gs(e,n);let i=fr(t),a=hs(e,o,i),l=gd(a,r),[s,c]=l.x?l.x:[void 0,new Set],[d,m]=l.y?l.y:[void 0,new Set];return{point:{x:s,y:d},snapLines:{x:c,y:m}}},fs=(e,t,o,r,n,i)=>{let a=null;return e.forEach(l=>{let s=i(l);if(a=D.intersection(s,r),a===null)return;if(n||R.distance(a,o)<=t)return!1;a=null}),a},Ss=(e,t,o,r,n,i=!1)=>{e=gs(e,n);let a=fr(t),l=hs(e,o,a),s=D.isOrthogonal(r)||i,c=hd(t),d=null,m=new Set,p=new Set;if(d=fs(Array.from(l.x.keys()),c,o,r,s,h=>D({x:h,y:0},{x:h,y:100})),d!==null)return{point:d,snapLines:{x:m.add(d.x),y:p}};if(d=fs(Array.from(l.y.keys()),c,o,r,s,h=>D({x:0,y:h},{x:100,y:h})),d!==null)return{point:d,snapLines:{x:m,y:p.add(d.y)}};let u=D.perpendicular(r,o);return d=D.intersection(r,u),d===null&&(d=o),{point:d,snapLines:{x:m,y:p}}},vs=(e,t,o,r)=>{let n={...t},i=[],a=[],l=[],s=[],c=fr(r),{x:d,y:m}=o,p="height"in o?o.height:0,u="width"in o?o.width:0,h=d+u,v=m+p,C={x:d,y:m,width:u,height:p};return e.siblingFrames.forEach(f=>{e.horizontalDistances.forEach((y,b)=>{let g=y.filter(S=>N.overlapVertically(C,S));if(g.length!==0&&N.overlapVertically(C,f)){if(Math.abs(f.x-b-h)<c){let S={x:f.x-b,y:f.y,width:b,height:f.height};if(g=g.filter(T=>!N.overlapHorizontally(T,S)),g.length===0)return;if(N.doesNotIntersect(S,e.siblingFrames)){let T=f.x-b-u;(n.x===void 0||n.x===T)&&(i.push(...g),l.push(S),n.x=T)}}else if(Math.abs(N.maxX(f)+b-d)<c){let S={x:N.maxX(f),y:f.y,width:b,height:f.height};if(g=g.filter(T=>!N.overlapHorizontally(T,S)),g.length===0)return;if(N.doesNotIntersect(S,e.siblingFrames)){let T=N.maxX(f)+b;(n.x===void 0||n.x===T)&&(i.push(...g),l.push(S),n.x=T)}}}}),e.verticalDistances.forEach((y,b)=>{let g=y.filter(S=>N.overlapHorizontally(C,S));if(g.length!==0&&N.overlapHorizontally(C,f)){if(Math.abs(f.y-b-v)<c){let S={y:f.y-b,x:f.x,height:b,width:f.width};if(g=g.filter(T=>!N.overlapVertically(T,S)),g.length===0)return;if(N.doesNotIntersect(S,e.siblingFrames)){let T=f.y-b-p;(n.y===void 0||n.y===T)&&(a.push(...g),s.push(S),n.y=T)}}else if(Math.abs(N.maxY(f)+b-m)<c){let S={y:N.maxY(f),x:f.x,height:b,width:f.width};if(g=g.filter(T=>!N.overlapVertically(T,S)),g.length===0)return;if(N.doesNotIntersect(S,e.siblingFrames)){let T=N.maxY(f)+b;(n.y===void 0||n.y===T)&&(a.push(...g),s.push(S),n.y=T)}}}})}),{distanceSnap:n,distanceFramesX:i,distanceFramesY:a,horizontalDistanceFrames:l,verticalDistanceFrames:s}};var ho=class{constructor(t,o){this.engine=t;this.excludedNodes=o;I(this,"snapX",null);I(this,"snapY",null);I(this,"snapConstraint",null);I(this,"distanceFramesX",[]);I(this,"distanceFramesY",[]);I(this,"snappingZoom",-1);I(this,"snappingFrame",{x:0,y:0,width:0,height:0});I(this,"linesCache",new Map);I(this,"distanceCache",new Map);I(this,"snapForShapes",!1)}start(){this.snapForShapes=this.engine.stores.toolStore.shapeToolActive||this.engine.stores.selectionStore.nodes.every(t=>ye(t))}stop(){this.engine.stores.snapLinesStore.clear()}validateCaches(){let{canvasStore:t}=this.engine.stores,o=t.getCanvasVisibleRect();(this.snappingZoom!==t.zoom||!N.equals(this.snappingFrame,o))&&(this.snappingZoom=t.zoom,this.snappingFrame=o,this.linesCache=new Map,this.distanceCache=new Map)}snap(t,o,r,n,i,a,l,s=!1){let{snapLinesStore:c,canvasStore:d}=this.engine.stores;if(o===!1)return this.snapX=null,this.snapY=null,this.snapConstraint=null,this.distanceFramesX=[],this.distanceFramesY=[],c.clear(),t;this.validateCaches();let m=this.getOrthogonalLines(r,s),p;i?p=Ss(m,d.zoom,t,i,l,this.snapForShapes):p=ys(m,d.zoom,t,a,l);let u=Array.from(p.snapLines.y),h=Array.from(p.snapLines.x),v=i!==void 0?i:null,C=null;if(n!==void 0&&i===void 0){let g=this.getSiblingDistances(n);C=vs(g,p.point,t,d.zoom)}C&&C.distanceSnap.x!==void 0&&(p.point.x=C.distanceSnap.x),C&&C.distanceSnap.y!==void 0&&(p.point.y=C.distanceSnap.y);let f={x:W(p.point.x)?p.point.x:t.x,y:W(p.point.y)?p.point.y:t.y};C!==null&&(C.horizontalDistanceFrames.forEach(g=>{let S="height"in t?t.height:0,T=Math.min(g.y,f.y),w=Math.max(N.maxY(g),f.y+S);C.distanceFramesX.push({...g,y:T,height:w-T})}),C.verticalDistanceFrames.forEach(g=>{let S="width"in t?t.width:0,T=Math.min(g.x,f.x),w=Math.max(N.maxX(g),f.x+S);C.distanceFramesY.push({...g,x:T,width:w-T})}));let y=C?C.distanceFramesX:[],b=C?C.distanceFramesY:[];return this.snapX=h,this.snapY=u,c.x=new Set(h),c.y=new Set(u),this.snapConstraint=v,this.distanceFramesX=y,this.distanceFramesY=b,f}getOrthogonalLines(t,o=!1){let{tree:r}=this.engine,{canvasStore:n,scopeStore:i,persistedUserDefaults:a,overlayStore:l}=this.engine.stores,{active:s}=i,c=n.getCanvasVisibleRect(),d=this.engine.tool.enum===35,m=this.snapForShapes||d,{displayRulers:p}=a,u=p&&oi(s)?{x:new Set(s.guidesX),y:new Set(s.guidesY)}:{x:new Set,y:new Set};return t.forEach(h=>{let v={x:new Set,y:new Set},C={x:new Set,y:new Set};if(!this.linesCache.has(h)){let y=[],b=[...this.excludedNodes],g=s.getGroundNodesOfType(Si,M=>!b.includes(M.id));if(!h)b.push(...g.map(M=>M.id)),y.push(...r.getSubtreeNodes(s.id,b)),y.push(...g);else{y.push(...r.getSubtreeNodes(h,b));let M=r.getNode(h);if(p&&M&&ri(M)){let P=M.guidesX.map(K=>ft(r,M,"x",K));v.x=new Set(P);let U=M.guidesY.map(K=>ft(r,M,"y",K));v.y=new Set(U)}if(a.displayGrids&&M&&(!Yt(M)||M.resolveValue("rotation")===0)&&ui(M)&&M.overlayGrid){let P=[],U=[],K=r.convertFrameToCanvas(M);if(!M.overlayGrid)return;let Y=fi(M.overlayGrid,K);M.overlayGrid?.type==="column"&&Y.forEach(X=>P.push(ft(r,M,"x",X))),M.overlayGrid?.type==="row"&&Y.forEach(X=>U.push(ft(r,M,"y",X))),C.x=new Set(P),C.y=new Set(U)}if(o&&M&&Bn(M)){let P=N.atOrigin(r.getRect(M));P.height=En(M,P);let K=N.cornerPoints(P).map(X=>r.convertPointToCanvas(M,X,!0)),Y=N.boundingRectFromPoints(K);v.y.add(Y.y+Y.height)}}y=y.filter(M=>{if(l.editModeActive){if(l.activeRelativeOverlayTriggers.has(M.id))return!0;if(!Ln(M,l.activeOverlays))return!1}return!M.isVisible()||jt(M)?!1:Ge(M)?!M.sizeToFit:!0});let S=y.map(M=>r.convertFrameToCanvas(M)).filter(M=>N.intersects(M,c)),T=hr(S,n.zoom,m),w={x:new Set([...T.x,...v.x,...C.x]),y:new Set([...T.y,...v.y,...C.y])};this.linesCache=this.linesCache.set(h,w)}let f=this.linesCache.get(h);f&&(u.x=new Set([...u.x,...f.x]),u.y=new Set([...u.y,...f.y]))}),u}getSiblingDistances(t){let{tree:o}=this.engine,r=this.engine.stores.canvasStore.getCanvasVisibleRect();if(!this.distanceCache.has(t)){let i=[];if(t)i=o.getNode(t).children;else{let p=this.engine.stores.scopeStore.active.getGroundNodes();p&&(i=p)}let a=[...this.excludedNodes],l=i.filter(p=>!a.includes(p.id)).map(p=>N.pixelAligned(o.convertFrameToCanvas(p))).filter(p=>N.intersects(r,p)),s=wi(l),c=new Map,d=new Map,m=(p,u,h)=>{let v=p.get(u)??[];return p.set(u,[...v,h])};s.forEach(([p,u])=>{let h=N.maxY(p),v=N.maxY(u),C=N.maxX(p),f=N.maxX(u);if(N.overlapHorizontally(p,u)){let y=Math.min(p.x,u.x),g=Math.max(C,f)-y;if(h<u.y){let S=u.y-h,T={y:h,x:y,width:g,height:S};N.doesNotIntersect(T,l)&&(c=m(c,S,T))}else if(v<p.y){let S=p.y-v,T={y:v,x:y,width:g,height:S};N.doesNotIntersect(T,l)&&(c=m(c,S,T))}}if(N.overlapVertically(p,u)){let y=Math.min(p.y,u.y),g=Math.max(h,v)-y;if(C<u.x){let S=u.x-C,T={x:C,y,width:S,height:g};N.doesNotIntersect(T,l)&&(d=m(d,S,T))}else if(f<p.x){let S=p.x-f,T={x:f,y,width:S,height:g};N.doesNotIntersect(T,l)&&(d=m(d,S,T))}}}),this.distanceCache=this.distanceCache.set(t,{verticalDistances:c,horizontalDistances:d,siblingFrames:l})}let n=this.distanceCache.get(t);return Hn(n,"cant read distances"),n}};function xs(e,t){if(t.length!==1)return!1;let o=e.get(t[0]);return!!(o&&_t(o))}function vy(e){return e instanceof gr}var gr=class extends Ot("MoveTool",uo){constructor(o,r){super(o);this.options=r;I(this,"enum",6);I(this,"wantsAutoscrolling",!0);I(this,"isCancelled",!1);I(this,"nodesBeginState");I(this,"startCanvasRect");I(this,"hasMoved",!1);I(this,"maxSize");I(this,"nodesInMoveToolBaseFontSize",{});I(this,"highlightedParents",new Set);I(this,"shouldHighLightParents",!0);I(this,"commonParentAfterLastUpdate");I(this,"topLevelFrameNodesAfterLastUpdate",[]);I(this,"snapper");I(this,"isSkewed");I(this,"cloneCache",new Map);I(this,"renamedIds",new Map);I(this,"canMoveToStackOrGrid",!1);I(this,"activeStackOrGrid",null);I(this,"commonStackOrGridParentAtStart",null);I(this,"activeStackOrGridInsertion");I(this,"stackOrGridInsertionLine",null);I(this,"displaySelectionBox",!0);I(this,"cmsBadge","visible");I(this,"displaySelectionHandles",!0);I(this,"stateToken");I(this,"scopeIdAtStart");I(this,"lastAltKeyDownTime",0);I(this,"updateNodesInMoveToolBaseFontSize",(o,r)=>{if(o===r)return;let n=this.nodesInMoveToolBaseFontSize[o];W(n)&&(this.nodesInMoveToolBaseFontSize={...this.nodesInMoveToolBaseFontSize,[r]:n})});this.displaySelectionHandles=!r?.reorderNode}selectionIds(){return this.options?.reorderNode?[this.options.reorderNode.id]:this.engine.stores.selectionStore.ids}start(){let{engine:o}=this,{tree:r}=o,{scopeStore:n,mouseStore:i,modulesStore:a}=o.stores,l=this.selectionIds();this.snapper=new ho(o,l);let s=r.withoutDescendants(r.getNodes(l));this.nodesBeginState=Xd(r,s,i.latest.canvasMousePosition),this.maxSize=Bd(this.nodesBeginState),this.startCanvasRect=N.merge(...s.map(d=>r.convertFrameToCanvas(d))),this.canMoveToStackOrGrid=Fd(s,r),this.commonStackOrGridParentAtStart=Dd(r,s),this.nodesInMoveToolBaseFontSize=s.reduce((d,m)=>{let p=vn(n.active,r,a,m.id);return W(p)&&(d[m.id]=p),d},{});let c=s[0];this.isSkewed=s.length===1&&!!c&&Wn(r.convertCornerPointsToCanvas(c)),o.beginUndoGroup(),o.stores.treeStore.setHighlight(null),this.scopeIdAtStart=o.stores.scopeStore.activeId,this.stateToken=o.getStateToken(),this.shouldHighLightParents=!s.every(ut)}cancel(){let{engine:o}=this;o.stores.toolStore.updateDragAndDropPlaceholder(null),go(this.activeStackOrGrid),this.activeStackOrGrid=null,o.discardUndoGroup(),this.isCancelled=!0}stop(){let{engine:o}=this;this.isCancelled||(this.toolUpdate(!0),o.endUndoGroup()),this.hasMoved||this.options?.moveToolDidExitWithoutMoving?.(),this.snapper.stop()}resetToBeginState(){this.engine.resetTreeAndSelectionWithToken(this.stateToken)}update(){let{engine:o}=this,{mouseStore:r,mouseCursorStore:n,scopeStore:i,toolStore:a}=o.stores,{canvasMouseDownPosition:l,canvasMiddleMouseButtonDownPosition:s}=r;if(!l||s){o.exitTool();return}if(this.scopeIdAtStart!==i.activeId){a.updateDragAndDropPlaceholder(null),go(this.activeStackOrGrid),r.setMouseDown(!1),o.exitTool();return}if(this.toolUpdate(),this.options?.reorderNode&&(n.current=ps),this.nodesBeginState.size===0){o.exitTool();return}}validateNodesBeginState(){let{engine:o}=this;this.nodesBeginState.forEach((r,n)=>{o.tree.has(n.id)||this.nodesBeginState.delete(n)})}validateNodesInMoveToolBaseFontSize(){let{engine:o}=this,r=Object.keys(this.nodesInMoveToolBaseFontSize);r.every(i=>{let a=this.nodesInMoveToolBaseFontSize[i];return o.tree.has(i)&&W(a)})||(this.nodesInMoveToolBaseFontSize=r.reduce((i,a)=>{let l=this.nodesInMoveToolBaseFontSize[a];return!o.tree.has(a)||!W(l)||(i[a]=l),i},{}))}noInputChange(){let{previous:o,latest:r}=this.engine.stores.mouseStore,{altKey:n,cmdKey:i,spacebar:a,canvasMousePosition:l}=r;return l.x===o.canvasMousePosition.x&&l.y===o.canvasMousePosition.y&&n===o.altKey&&i===o.cmdKey&&a===o.spacebar}shouldCopy(o){return this.engine.stores.mouseStore.latest.altKey?(this.lastAltKeyDownTime=performance.now(),!0):o?performance.now()-this.lastAltKeyDownTime<200:!1}addReorderOffsetIfNeeded(o){return this.options?.reorderOffset?R.add(o,this.options.reorderOffset):o}getMouseWithReorderOffset(){return this.addReorderOffsetIfNeeded(this.engine.stores.mouseStore.latest.canvasMousePosition)}getPreviousMouseWithReorderOffset(){return this.addReorderOffsetIfNeeded(this.engine.stores.mouseStore.previous.canvasMousePosition)}toolUpdate(o=!1){let{engine:r}=this,n=!!this.options?.reorderNode;if(o&&!this.hasMoved){this.options?.reorderNode&&r.stores.selectionStore.set(this.options.reorderNode);return}let{tree:i}=r,{scopeStore:a,effectStore:l,mouseStore:s,documentSettingsStore:c,toolStore:d,chromeStore:m,selectionStore:p,canvasStore:u}=r.stores,{previous:h,latest:v}=s,{altKey:C,cmdKey:f,spacebar:y,canvasMousePosition:b}=v;if(this.scopeIdAtStart!==a.activeId||Od(this.nodesBeginState)||Pi(r,"canDesign")||m.isPreviewingLocaleOnCanvas)return;let g=Sd(s,this.options?.directionLock);if(!g||!this.hasMoved&&g.x===0&&g.y===0||(this.hasMoved=!0,l.exitPreview(),!o&&this.noInputChange()))return;this.resetToBeginState(),this.validateNodesBeginState(),this.validateNodesInMoveToolBaseFontSize();let S=new Map,T=C&&f;this.displaySelectionHandles=!1,this.highlightedParents.clear(),go(this.activeStackOrGrid),Pd(r,this.nodesBeginState,S,this.shouldCopy(o)&&!T,this.cloneCache,this.renamedIds);let{ctrlKey:w}=s,M=w&&i.getNodes(this.selectionIds()).every($n),P=N.offset(this.startCanvasRect,g),{insertionIndex:U,insertionLine:K,activeStackOrGrid:Y,isLiveSorting:X,wrap:tt}=Ld(r,this.getMouseWithReorderOffset(),this.getPreviousMouseWithReorderOffset(),this.selectionIds(),this.nodesBeginState,this.canMoveToStackOrGrid&&!y&&!f,!!this.options?.reorderNode,this.commonStackOrGridParentAtStart,this.maxSize,this.activeStackOrGridInsertion,M);this.activeStackOrGridInsertion=U,this.stackOrGridInsertionLine=K,this.activeStackOrGrid=Y,X&&!o&&this.makeGroundNodes(S),d.updateDragAndDropPlaceholder(this.activeStackOrGrid);let{activeNodes:Ce,extraSnapRects:ke}=Wd(i,this.nodesBeginState,S,f),Pe=R.distance(h.canvasMousePosition,b)*u.zoom,be=!!(this.activeStackOrGrid&&!X),we=!this.isSkewed&&(Pe<10&&be?!0:!this.activeStackOrGrid);this.snapper.excludedNodes=this.selectionIds();let Fe=this.snapper.snap(P,we,this.topLevelFrameNodesAfterLastUpdate,this.commonParentAfterLastUpdate,void 0,void 0,ke,xs(i,this.selectionIds())),G=R.pixelAligned(R.subtract(this.startCanvasRect,Fe)),L=new Set(this.selectionIds()),Ie=this.activeStackOrGrid&&W(this.activeStackOrGridInsertion);if(o&&Ie||this.nodesBeginState.forEach((A,ee)=>{let{unableToMove:De,startFromStackOrGrid:jl,disableReparenting:$l}=A;if(De)return;let Ro=S.get(ee)??ee.id,ko=i.get(Ro);if(!ko)return;let Xl=Ro!==ee.id&&Ae(ee),Po=i.current(A.parent),Oe=A.rect,wo=po(yr(r.tree,Po),A.untransformedPointUnderMouse,R.subtract(A.canvasPointUnderMouse,G)),ot={...Oe,...R.pixelAligned(R.add(Oe,wo),Oe)},Kl=Kd(r.tree,Po).translate(wo.x,wo.y).multiply(A.matrix),rt=this.getNewParent(ko,Po,N.pointsAtOrigin(ot).map(Do=>Ke.convertPoint(Kl,Do)),ot,Xl,jl,$l||be),_l=ee.id!==Ro,Fo=this.reparentNode(ko,rt,L,_l,X,-1,!0);if(this.shouldHighLightParents&&(this.highlightedParents=Td(this.highlightedParents,rt,this.activeStackOrGrid)),rt?.id!==A.parent?.id){let Do=po(yr(r.tree,rt),A.untransformedPointUnderMouse,R.subtract(A.canvasPointUnderMouse,G));ot={...Oe,...R.pixelAligned(R.add(Oe,Do),Oe)}}let ql=this.getUpdatedNodeConstraints(i,Fo,ot,A,rt,M);Fo.set(ql),Md(r,Fo,A,ot)}),o){if(r.tree.beginAllowPartialScopeAccess(),Zd(r,this.nodesBeginState,S),Qd(r,this.nodesBeginState,S),ep(r,this.nodesBeginState,S),r.tree.endAllowPartialScopeAccess(),d.updateDragAndDropPlaceholder(null),go(this.activeStackOrGrid),Ie&&this.insertSelectionIntoStackOrGrid(S,L,X,tt),Jd(S,r.tree),n||p.set(L),S.size>0){let A=new Map;for(let[ee,De]of S.entries())A.set(ee.id,De);c.lastDuplicationMap=A}this.renamedIds.clear();return}n||p.set(L),this.commonParentAfterLastUpdate=xd(i,Ce),this.topLevelFrameNodesAfterLastUpdate=i.getTopLevelFrameNodes(Ce)}getUpdatedNodeConstraints(o,r,n,i,a,l){let s=i.parent?i.parent.id===a?.id:a===null,c=Yd(i,s),m=o.getParentSizeInfo(r,a,!0,!1),p=r.updateForRect({rect:n,parentSizeInfo:m,updateSize:!1,constraintsLocked:nr(r,c),shouldGuessPinToBottom:tr(o,r),shouldGuessPinToRight:or(o,r,a)});return!c&&He(r)&&(p.constraintsLocked=!1),l?p.position="absolute":Object.assign(p,Kn(r,a)),p}getNewParent(o,r,n,i,a,l,s){let{engine:c}=this;if(s)return r;if(this.activeStackOrGrid)return he;let{tree:d}=c,{mouseStore:m}=c.stores,{cmdKey:p,altKey:u,spacebar:h,canvasMousePosition:v}=m.latest,C=u&&p,f=r&&ye(r),y=o.originalid&&!Kr(o)&&!Xo(o),b=!h&&(!p||C)&&!f&&!y,g=r;if(b||a){if(g=bd(c,o,n,this.selectionIds(),v,u),u&&g&&d.isGroundNode(g)){let S=d.getRect(g.draftOrCurrent());(S.width<=i.width&&S.height<=i.height||g.id===o.duplicatedFrom?.[o.duplicatedFrom.length-1])&&(g=null)}!a&&Id(d,n,r,g,l)&&(g=r)}return g}reparentNode(o,r,n,i,a,l,s){let{engine:c}=this,d=c.tree.getParent(o.id);return rr(r,d)&&l===-1&&!i?o:Ae(o)&&r&&Lt(r)?this.reparentNodeInsideVariant(o,r,l):Ae(o)?this.moveNodeOutOfVariant(o,r,l,n,a,s):r&&Lt(r)?this.moveNodeIntoVariant(o,r,l,n):(c.moveNode(o.id,r?r.id:he,l),it(r)&&Jo(o)&&(o.gridItemFillCellWidth===void 0&&o.set({gridItemFillCellWidth:!0}),o.gridItemFillCellHeight===void 0&&o.set({gridItemFillCellHeight:!0})),o)}reparentNodeInsideVariant(o,r,n){let{engine:i}=this;return bi(i,o,r),i.moveNode(o.originalid,r.originalid,n),o}moveNodeOutOfVariant(o,r,n,i,a,l){let{engine:s}=this,c=s.tree.getNode(o.originalid);if(x(c,"original node must exist"),!An(s.tree,o)||a)this.updateNodesInMoveToolBaseFontSize(o.id,c.id),xi(s,o,c,i),s.moveNode(c.id,r?r.id:he,n);else if(l){let d=this.cloneCache.get(o.id)??s.cloneNode(o,!1,!1);this.cloneCache.set(o.id,d);let m=d.cloneWithIds();return s.stores.scopeStore.insertNode(m,r?r.id:he,n),this.updateNodesInMoveToolBaseFontSize(o.id,m.id),s.tree.current(o)?.set({visible:!1}),i.delete(o.id),i.add(m.id),m}return c}moveNodeIntoVariant(o,r,n,i){let{engine:a}=this,l=a.tree.getNode(r.originalid);x(l,"original node of the new parent should exist"),a.moveNode(o.id,l?.id??he,n);let s=Ci(a,o,r,l,i,this.renamedIds);return this.updateNodesInMoveToolBaseFontSize(o.id,s),o}insertSelectionIntoStackOrGrid(o,r,n,i){if(Ne(this.activeStackOrGrid)||!W(this.activeStackOrGridInsertion))return;let{engine:a}=this,l=Array.from(this.nodesBeginState.keys()).map(m=>o.get(m)??m.id),s=this.activeStackOrGrid,c=Ad(this.activeStackOrGridInsertion,s,l);if(i&&Uo(s)){let m=Ai(a,s,i);m&&(s=m)}let d=it(s);this.nodesBeginState.forEach((m,p)=>{let u=o.get(p)??p.id,h=a.tree.getNode(u);if(!h)return;x(!Ne(s),"stackOrGrid must be a valid node");let v=p.id!==u;if(n&&!v&&hn(s)&&er(h)){Jn(h.getPrimaryId(),s,c),c++;return}let C=this.reparentNode(h,s,r,v,n,c,!0);if(He(C)){let f={top:0,left:0,right:null,bottom:null,...m.startSizeProps};if(!m.parent||m.parent.id!==s.id){let b=f.widthType===3||f.widthType===1,g=f.heightType===3||f.heightType===1;b&&(d||s.widthType===2)&&(f.width=m.rect.width,f.widthType=0),g&&(d||s.heightType===2)&&(f.height=m.rect.height,f.heightType=0)}C.set(f)}else C.set(m.startSizeProps);c++})}makeGroundNodes(o){let{engine:r}=this;this.nodesBeginState.forEach((n,i)=>{let a=o.get(i)??i.id,l=r.tree.getNode(a);if(!l)return;let s=i.id!==a;this.reparentNode(l,null,new Set,s,!0,-1,!1)})}};function Sd(e,t){let{canvasMousePosition:o,shiftKey:r}=e.latest,n=e.previous;return n.canvasMouseDownPosition?vd(n.canvasMouseDownPosition,o,r,t):void 0}function vd(e,t,o,r){let n=R.pixelAligned(R.subtract(t,e));return r?r==="horizontal"?n.y=0:n.x=0:o&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),n}function xd(e,t){let o=t.map(i=>i?e.getParent(i.id):void 0);if(!(new Set(o).size===1))return;let n=o[0];return n?n.id:he}function Cd(e,t,o,r,n,i){let{tree:a}=e;if(!an(o)||_n(o)||Yr(o)||!jn(a,o,t,n,j))return!1;let l=a.getAncestors(o.id);return l.push(o.id),!(Bi(l,r)||l.some(d=>d===t.id)||i&&ca(t,o))}function bd(e,t,o,r,n,i){let{tree:a}=e,l=e.stores.scopeStore.active,s=a.getPotentialParents(l,e.stores.overlayStore.activeOverlays,o,n,j,t);return a.sortVisually(s).reverse().find(m=>Cd(e,t,m,r,l.id,i))||he}function Id(e,t,o,r,n){if(n||!o||!r||!!rr(r,o)||!(!r||e.getAncestors(o.id).find(s=>r!==null&&s===r.id)))return!1;let l=e.convertCornerPointsToCanvas(o);return $t.intersects(l,t)}function Td(e,t,o){let r=o||t;return!r||ye(r)||Ge(r)&&r.sizeToFit?e:e.add(r.id)}function Nd(e,t,o){let r={x:t.rect.x-o.x,y:t.rect.y-o.y};if(Yt(e)){let n=e.resolveValue("rotation"),i=new DOMMatrix().rotateSelf(0,0,-n);r=Ke.convertPoint(i,r)}return r}function Md(e,t,o,r){let{tree:n}=e,{cmdKey:i,altKey:a}=e.stores.mouseStore.latest;!i||a||o.children.forEach((l,s)=>{if(o.startFromStackOrGrid)return;let c=n.getNode(s);if(!c)return;let d=Nd(t,o,r),m=N.offset(l.frame,d),p=c.updateForRect({rect:m,parentSizeInfo:n.getParentSizeInfo(c,t),constraintsLocked:nr(c),shouldGuessPinToBottom:tr(n,c),shouldGuessPinToRight:or(n,c,n.getParent(c.id))});Rd(c,p),e.tree.get(s)?.set(p)})}function Rd(e,t){return He(e)&&((e.widthType===2||e.widthType===3)&&(delete t.width,delete t.widthType),(e.heightType===2||e.heightType===3)&&(delete t.height,delete t.heightType)),t}function kd(e){let t=1/0,o=0;for(let r=0,n=e.length;r<n;r++){let i=e[r];i>=t||(t=i,o=r)}return o}function Pd(e,t,o,r,n,i=new Map){r&&wd(e,t,o,n,i)}function wd(e,t,o,r,n=new Map){t.forEach((a,l)=>{if(ut(l)||ye(l)&&Ae(l))return;let s=r.get(l.id)??e.cloneNode(l,!1,!1,n);r.set(l.id,s);let c=s.cloneWithIds();e.stores.scopeStore.insertNode(c,l.parentid),n.set(l.id,c.id),o=o.set(l,c.id),_r(l)&&Ii(e,l,n)});let i=Array.from(o.values());for(let a of i){let l=e.tree.getNode(a),s=e.tree.getParent(a),c=!!s&&(Ut(s)||Kt(s));l&&Fi(e.tree,l,n,c)}e.stores.selectionStore.set(i)}function Fd(e,t){return e.every(o=>!qd(o,t))}function Dd(e,t){let o=null;for(let r=0,n=t.length;r<n;r++){let i=t[r];if(!i||ut(i))return null;let a=e.getParent(i.id);if(!Uo(a)&&!it(a))return null;if(!o)o=a;else if(o.id!==a.id)return null}return o}function Od(e){for(let t of e.values())if(!t.unableToMove)return!1;return!0}function Bd(e){let t=0,o=0;return e.forEach(r=>{let{width:n,height:i}=r.rect;n>t&&(t=n),i>o&&(o=i)}),{width:t,height:o}}function Ed(e,t,o){let r=e.tree.get(o.id);if(!r)return!1;let n=e.tree.getGroundNodeFor(r),i=e.tree.convertFrameToCanvas(n);return N.containsPoint(i,t)}function Ld(e,t,o,r,n,i,a,l,s,c,d){let m=e.tree.getNodes(r);if(m.length===0)return{insertionIndex:null,insertionLine:null,activeStackOrGrid:null,isLiveSorting:!1};if(d||l&&m.every(h=>_t(h)||Xn(h)))return{insertionIndex:null,insertionLine:null,activeStackOrGrid:l,isLiveSorting:!1};let p=null;if(a?l&&(p=l):l&&Ed(e,t,l)?p=l:i&&(p=Li(e,t,m,l,j)),!p)return{insertionIndex:null,insertionLine:null,activeStackOrGrid:p,isLiveSorting:!1};let u=!!l&&l.id===p.id;if(u)return{insertionIndex:Hd(e.tree,e.stores.layoutCache,t,o,n,p,e.tree.convertPointToNode(p,t),c),insertionLine:null,activeStackOrGrid:p,isLiveSorting:u};{let{insertionIndex:h,insertionLine:v,wrap:C}=Ei(p,e,t,s);return{insertionIndex:h,insertionLine:v,activeStackOrGrid:p,isLiveSorting:u,wrap:C}}}function Ad(e,t,o){let r=0,n=0;for(let i of t.getChildrenInVisualOrder()){if(n===e)break;o.includes(i.id)||(i.isVisible()&&n++,r++)}return r}function Vd(e){let t=[];for(let o of e.values())o.placeholderItem&&t.push(o.placeholderItem);return t}function zd(e,t,o,r,n,i,a){let l=t-o;if(l===0)return!0;if(!a)return e?i==="ltr"?Math.sign(n.x)===Math.sign(l):Math.sign(n.x)!==Math.sign(l):Math.sign(n.y)===Math.sign(l);let s=r[o],c=r[t];if(!s||!c)return!0;let d=e?{a:s.y,b:N.maxY(s)}:{a:s.x,b:N.maxX(s)},m=e?{a:c.y,b:N.maxY(c)}:{a:c.x,b:N.maxX(c)};if(d.b-m.a>=0&&m.b-d.a>=0)return!0;let u=m.a>=d.b?1:-1;return e?Math.sign(n.y)===u:Math.sign(n.x)===u}function Gd(e,t){let o=Cs(t),r=0;for(let n=0;n<=e;n++){let i=o[n];i&&!qt(i,t)&&r++}return r}function Hd(e,t,o,r,n,i,a,l){let s=Oi(i,t);if(!s)return 0;let c=s.map(y=>R.distance(N.center(y),a)),d=kd(c);d=d+Gd(d,i);let m=d,p=qr(i),u=p||i.stackDirection==="horizontal",h=p||!!i.stackWrapEnabled,v=R.subtract(o,r),C=l!==void 0,f=l===null;if(C&&!f){let y=l,b=e.root.getHorizontalLayoutDirection();m=zd(u,d,y,s,v,b,h)?d:y}else if(f){let y=i.children.filter(b=>b.isVisible()).length;(u&&v.x<0||!u&&v.y<0)&&(m=y)}return i.cache.placeholders={index:m,sizes:Vd(n)},m}function go(e){e&&(e.cache.placeholders=null)}function Wd(e,t,o,r){let n=[],i=Array.from(t.keys());if(o.size>0){n.push(...i.map(a=>e.convertFrameToCanvas(a))),i.length=0;for(let[a,l]of o){let s=e.getNode(l);s&&i.push(s)}}if(r){let a=Ud(t);n.push(...a)}return{activeNodes:i,extraSnapRects:n}}function Ud(e){let t=[];return e.forEach(o=>{o.children.forEach(r=>{t.push(r.canvasFrame)})}),t}function Cs(e){return zn(e)?e.getChildrenInVisualOrder():Un(e)}function jd(e,t){let o=new Map;if(ye(t))return o;let r=Cs(t),n=Wo(t);return r.forEach(i=>{if(n&&!qt(i,t))return;let a=e.getRect(i),l=e.convertFrameToCanvas(i);o.set(i.id,{frame:a,canvasFrame:l})}),o}function $d(e){let t={};return un(e)&&(t.width=e.width,t.height=e.height),He(e)&&(t.widthType=e.widthType,t.heightType=e.heightType),t}function Xd(e,t,o){let r=e.sortVisually(t),n=new Map;return r.forEach(i=>{let a=_d(e,i,o);n.set(i,a)}),n}function yr(e,t){return t?e.transformMatrixToNode(t):Ke.identity()}function Kd(e,t){if(t){let o=e.transformMatrixToNode(t);return di(t)?o:Ke.flatProjectionMatrix(o)}return Ke.identity()}function _d(e,t,o){let r=e.getParent(t.id),n=!!(r&&Wo(r)),i=n&&Ae(t)&&!Xo(t)||rn(t)||!er(t),a=e.getRect(t),l;if(qt(t,r)&&(l={width:a.width,height:a.height},it(r))){let p={};mi(t,p),Jo(t)&&(t.gridItemFillCellWidth&&(p.width="100%"),t.gridItemFillCellHeight&&r.gridRowHeightType!=="fit"&&(p.height="100%")),l.style=p}let s=po(yr(e,r),{x:0,y:0},o),d=li(e,t)?si(e,t):void 0,m=d&&!Lt(d)?d.id:void 0;return{parent:r,rect:a,matrix:t.originAdjustedMatrix(null,a),untransformedPointUnderMouse:s,canvasPointUnderMouse:r?e.convertPointToCanvas(r,s):s,children:jd(e,t),startFromStackOrGrid:n,unableToMove:i,startSizeProps:$d(t),constraintsLocked:He(t)?t.constraintsLocked:!1,placeholderItem:l,disableReparenting:ut(t),repeaterId:m}}function qd(e,t){if(!ye(e))return!1;let o=t.getParent(e.id);return jt(o)||en(o)}function Yd(e,t){return t?e.constraintsLocked:!1}function Zd(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n,a=e.stores.scopeStore.active;ze(a)&&ra(e.tree,a,i)&&sa(e.tree,a)})}function Jd(e,t){if(!(e.size>0))return;let r=0;for(let n of e.values()){let i=t.getNode(n);if(i)for(let a of i.walk())Vt(a)&&r++}r>0&&qe("layout_frame",{source:"duplication",count:r})}function Qd(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n,a=e.tree.getParent(i.id);if(a&&(Kt(a)||Kt(i)||Ut(a)))for(let{node:l,skipChildren:s}of i.walkWithSkipChildren())Ut(l)&&(e.stores.overlayStore.cleanupOverlay(e.stores.selectionStore,l.id,l.parentid,!1),e.tree.removeNode(l),s())})}function ep(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n;if(!r.repeaterId||i.parentid===r.repeaterId)return;let a=e.tree.get(r.repeaterId);zt(a)&&ci(a)})}var Sr=new nn(async()=>{let e=await Promise.all([import("https://app.framerstatic.com/dist-QQ2LXD6V.mjs"),import("https://app.framerstatic.com/dist-EZVESS7Y.mjs"),import("https://app.framerstatic.com/dist-Z5YLEBXY.mjs"),import("https://app.framerstatic.com/dist-7WM25YWQ.mjs"),import("https://app.framerstatic.com/dist-Z2BXEQZM.mjs"),import("https://app.framerstatic.com/dist-GBVMIGFI.mjs"),import("https://app.framerstatic.com/dist-NBGG27WF.mjs"),import("https://app.framerstatic.com/dist-YL6PRWQE.mjs"),import("https://app.framerstatic.com/prosemirror-suggest-CHVOCZVK.mjs")]);return Object.assign({},...e)});function Iy(){Sr.preload()}async function Ty(){return Sr.readMaybeAsync()}function Ny(){return Sr.use()}var wy="appPointerEvents_arpwu8w",Fy="appDisablePointerEvents_a1pulxae";var tp={"3g2":"video/3gpp2","3gp":"video/3gpp","3gpp":"video/3gpp","3mf":"model/3mf",aac:"audio/aac",ac:"application/pkix-attr-cert",adp:"audio/adpcm",adts:"audio/aac",ai:"application/postscript",aml:"application/automationml-aml+xml",amlx:"application/automationml-amlx+zip",amr:"audio/amr",apng:"image/apng",appcache:"text/cache-manifest",appinstaller:"application/appinstaller",appx:"application/appx",appxbundle:"application/appxbundle",asc:"application/pgp-keys",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",au:"audio/basic",avci:"image/avci",avcs:"image/avcs",avif:"image/avif",aw:"application/applixware",bdoc:"application/bdoc",bin:"application/octet-stream",bmp:"image/bmp",bpk:"application/octet-stream",btf:"image/prs.btif",btif:"image/prs.btif",buffer:"application/octet-stream",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cer:"application/pkix-cert",cgm:"image/cgm",cjs:"application/node",class:"application/java-vm",coffee:"text/coffeescript",conf:"text/plain",cpl:"application/cpl+xml",cpt:"application/mac-compactpro",crl:"application/pkix-crl",css:"text/css",csv:"text/csv",cu:"application/cu-seeme",cwl:"application/cwl",cww:"application/prs.cww",davmount:"application/davmount+xml",dbk:"application/docbook+xml",deb:"application/octet-stream",def:"text/plain",deploy:"application/octet-stream",dib:"image/bmp","disposition-notification":"message/disposition-notification",dist:"application/octet-stream",distz:"application/octet-stream",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",dot:"application/msword",dpx:"image/dpx",drle:"image/dicom-rle",dsc:"text/prs.lines.tag",dssc:"application/dssc+der",dtd:"application/xml-dtd",dump:"application/octet-stream",dwd:"application/atsc-dwd+xml",ear:"application/java-archive",ecma:"application/ecmascript",elc:"application/octet-stream",emf:"image/emf",eml:"message/rfc822",emma:"application/emma+xml",emotionml:"application/emotionml+xml",eps:"application/postscript",epub:"application/epub+zip",exe:"application/octet-stream",exi:"application/exi",exp:"application/express",exr:"image/aces",ez:"application/andrew-inset",fdf:"application/fdf",fdt:"application/fdt+xml",fits:"image/fits",g3:"image/g3fax",gbr:"application/rpki-ghostbusters",geojson:"application/geo+json",gif:"image/gif",glb:"model/gltf-binary",gltf:"model/gltf+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gram:"application/srgs",grxml:"application/srgs+xml",gxf:"application/gxf",gz:"application/gzip",h261:"video/h261",h263:"video/h263",h264:"video/h264",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",held:"application/atsc-held+xml",hjson:"application/hjson",hlp:"application/winhlp",hqx:"application/mac-binhex40",hsj2:"image/hsj2",htm:"text/html",html:"text/html",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",img:"application/octet-stream",in:"text/plain",ini:"text/plain",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",iso:"application/octet-stream",its:"application/its+xml",jade:"text/jade",jar:"application/java-archive",jhc:"image/jphc",jls:"image/jls",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpf:"image/jpx",jpg:"image/jpeg",jpg2:"image/jp2",jpgm:"image/jpm",jpgv:"video/jpeg",jph:"image/jph",jpm:"image/jpm",jpx:"image/jpx",js:"text/javascript",json:"application/json",json5:"application/json5",jsonld:"application/ld+json",jsonml:"application/jsonml+json",jsx:"text/jsx",jt:"model/jt",jxl:"image/jxl",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",kar:"audio/midi",ktx:"image/ktx",ktx2:"image/ktx2",less:"text/less",lgr:"application/lgr+xml",list:"text/plain",litcoffee:"text/coffeescript",log:"text/plain",lostxml:"application/lost+xml",lrf:"application/octet-stream",m1v:"video/mpeg",m21:"application/mp21",m2a:"audio/mpeg",m2t:"video/mp2t",m2ts:"video/mp2t",m2v:"video/mpeg",m3a:"audio/mpeg",m4a:"audio/mp4",m4p:"application/mp4",m4s:"video/iso.segment",ma:"application/mathematica",mads:"application/mads+xml",maei:"application/mmt-aei+xml",man:"text/troff",manifest:"text/cache-manifest",map:"application/json",mar:"application/octet-stream",markdown:"text/markdown",mathml:"application/mathml+xml",mb:"application/mathematica",mbox:"application/mbox",md:"text/markdown",mdx:"text/mdx",me:"text/troff",mesh:"model/mesh",meta4:"application/metalink4+xml",metalink:"application/metalink+xml",mets:"application/mets+xml",mft:"application/rpki-manifest",mid:"audio/midi",midi:"audio/midi",mime:"message/rfc822",mj2:"video/mj2",mjp2:"video/mj2",mjs:"text/javascript",mml:"text/mathml",mods:"application/mods+xml",mov:"video/quicktime",mp2:"audio/mpeg",mp21:"application/mp21",mp2a:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mp4a:"audio/mp4",mp4s:"application/mp4",mp4v:"video/mp4",mpd:"application/dash+xml",mpe:"video/mpeg",mpeg:"video/mpeg",mpf:"application/media-policy-dataset+xml",mpg:"video/mpeg",mpg4:"video/mp4",mpga:"audio/mpeg",mpp:"application/dash-patch+xml",mrc:"application/marc",mrcx:"application/marcxml+xml",ms:"text/troff",mscml:"application/mediaservercontrol+xml",msh:"model/mesh",msi:"application/octet-stream",msix:"application/msix",msixbundle:"application/msixbundle",msm:"application/octet-stream",msp:"application/octet-stream",mtl:"model/mtl",mts:"video/mp2t",musd:"application/mmt-usd+xml",mxf:"application/mxf",mxmf:"audio/mobile-xmf",mxml:"application/xv+xml",n3:"text/n3",nb:"application/mathematica",nq:"application/n-quads",nt:"application/n-triples",obj:"model/obj",oda:"application/oda",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",omdoc:"application/omdoc+xml",onepkg:"application/onenote",onetmp:"application/onenote",onetoc:"application/onenote",onetoc2:"application/onenote",opf:"application/oebps-package+xml",opus:"audio/ogg",otf:"font/otf",owl:"application/rdf+xml",oxps:"application/oxps",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",pdf:"application/pdf",pfr:"application/font-tdpfr",pgp:"application/pgp-encrypted",pkg:"application/octet-stream",pki:"application/pkixcmp",pkipath:"application/pkix-pkipath",pls:"application/pls+xml",png:"image/png",prc:"model/prc",prf:"application/pics-rules",provx:"application/provenance+xml",ps:"application/postscript",pskcxml:"application/pskc+xml",pti:"image/prs.pti",qt:"video/quicktime",raml:"application/raml+yaml",rapd:"application/route-apd+xml",rdf:"application/rdf+xml",relo:"application/p2p-overlay+xml",rif:"application/reginfo+xml",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rmi:"audio/midi",rnc:"application/relax-ng-compact-syntax",rng:"application/xml",roa:"application/rpki-roa",roff:"text/troff",rq:"application/sparql-query",rs:"application/rls-services+xml",rsat:"application/atsc-rsat+xml",rsd:"application/rsd+xml",rsheet:"application/urc-ressheet+xml",rss:"application/rss+xml",rtf:"text/rtf",rtx:"text/richtext",rusd:"application/route-usd+xml",s3m:"audio/s3m",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",ser:"application/java-serialized-object",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",sgi:"image/sgi",sgm:"text/sgml",sgml:"text/sgml",shex:"text/shex",shf:"application/shf+xml",shtml:"text/html",sieve:"application/sieve",sig:"application/pgp-signature",sil:"audio/silk",silo:"model/mesh",siv:"application/sieve",slim:"text/slim",slm:"text/slim",sls:"application/route-s-tsid+xml",smi:"application/smil+xml",smil:"application/smil+xml",snd:"audio/basic",so:"application/octet-stream",spdx:"text/spdx",spp:"application/scvp-vp-response",spq:"application/scvp-vp-request",spx:"audio/ogg",sql:"application/sql",sru:"application/sru+xml",srx:"application/sparql-results+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",stk:"application/hyperstudio",stl:"model/stl",stpx:"model/step+xml",stpxz:"model/step-xml+zip",stpz:"model/step+zip",styl:"text/stylus",stylus:"text/stylus",svg:"image/svg+xml",svgz:"image/svg+xml",swidtag:"application/swid+xml",t:"text/troff",t38:"image/t38",td:"application/urc-targetdesc+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",text:"text/plain",tfi:"application/thraud+xml",tfx:"image/tiff-fx",tif:"image/tiff",tiff:"image/tiff",toml:"application/toml",tr:"text/troff",trig:"application/trig",ts:"video/mp2t",tsd:"application/timestamped-data",tsv:"text/tab-separated-values",ttc:"font/collection",ttf:"font/ttf",ttl:"text/turtle",ttml:"application/ttml+xml",txt:"text/plain",u3d:"model/u3d",u8dsn:"message/global-delivery-status",u8hdr:"message/global-headers",u8mdn:"message/global-disposition-notification",u8msg:"message/global",ubj:"application/ubjson",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vrml:"model/vrml",vtt:"text/vtt",vxml:"application/voicexml+xml",war:"application/java-archive",wasm:"application/wasm",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webmanifest:"application/manifest+json",webp:"image/webp",wgsl:"text/wgsl",wgt:"application/widget",wif:"application/watcherinfo+xml",wmf:"image/wmf",woff:"font/woff",woff2:"font/woff2",wrl:"model/vrml",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",x3d:"model/x3d+xml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3dz:"model/x3d+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xcs:"application/calendar+xml",xdf:"application/xcap-diff+xml",xdssc:"application/dssc+xml",xel:"application/xcap-el+xml",xenc:"application/xenc+xml",xer:"application/patch-ops-error+xml",xfdf:"application/xfdf",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xhvml:"application/xv+xml",xlf:"application/xliff+xml",xm:"audio/xm",xml:"text/xml",xns:"application/xcap-ns+xml",xop:"application/xop+xml",xpl:"application/xproc+xml",xsd:"application/xml",xsf:"application/prs.xsf+xml",xsl:"application/xml",xslt:"application/xml",xspf:"application/xspf+xml",xvm:"application/xv+xml",xvml:"application/xv+xml",yaml:"text/yaml",yang:"application/yang",yin:"application/yin+xml",yml:"text/yaml",zip:"application/zip"};function bs(e){let t=(""+e).trim().toLowerCase(),o=t.lastIndexOf(".");return tp[~o?t.substring(++o):t]}var Is=Pt(Zl());var vt=Pt(Hr());async function Ts(e,t,o=1/0,r){r??=new Ze(e,{silent:!0});let n=[],i=[],a=[];for(let s of t){if(a.length>=o){i.push(s);continue}if(!to.includes(s.type)){n.push(s);continue}let c=r.add(s);a.push(c)}return n.length>0&&Ye({type:"add",key:"importUploadImagesUnsupported",variant:"warning",text:(0,vt.jsxs)("span",{className:ht,children:["Skipped ",n.length," unsupported images"]}),duration:1e4}),i.length>0&&Ye({type:"add",key:"importUploadImagesSkipped",variant:"warning",text:(0,vt.jsxs)("span",{className:ht,children:["Skipped ",i.length," images over field limit"]}),duration:1e4}),vr(r,a).catch(()=>{}),(await Promise.all(a)).filter(gt)}async function vr(e,t){let o="uploadEmbeddedImagesByUrl",r={type:"add",key:o,variant:"progress",icon:"image",duration:1/0,showCloseButton:"never"};for await(let{completed:i,started:a}of e.statusUpdates())Ye({...r,text:(0,vt.jsxs)("span",{className:ht,children:["Adding ",i," of ",a," images\u2026"]})});await Promise.allSettled(t);let{failed:n}=e.status;n>0&&Ye({type:"add",key:"importUploadImagesFailed",variant:"warning",text:(0,vt.jsxs)("span",{className:ht,children:["Failed to upload ",n," ",(0,Is.default)("image",n)]}),duration:5e3}),Ye({type:"remove",key:o})}var As=Pt(Es());var Ls=me("ChooseFileService"),br=class{constructor(t,o,r){this.engine=t;this.assetService=o;this.filePickerRef=r;I(this,"assetUploader");this.assetUploader=new Ze(this.engine)}async pickFile({allowedFileTypes:t,multiple:o}={}){let r=this.filePickerRef.current;if(!r)return null;let i=!t||t.includes("*")||t.includes("*/*")?void 0:t?.flatMap(l=>{let s=As.default.parse(l)?.essence,c=bs(l),d=l.startsWith(".")?l:`.${l}`;return s?[s]:c?[c,d]:[d]}),a=await r.show(i,o);return a.isFiles()?a.value:null}async pickImage({allowedFileTypes:t=eo,multiple:o}={}){return this.pickFile({allowedFileTypes:t,multiple:o})}async pickAndUploadImage(t={}){try{let o=await this.pickImage(t);if(!o)return[];if(o.length===1){let r=await this.assetUploader.add(o[0]);if(!r)return[];if(await this.assetService.refresh().catch(E),gt(r))return[r]}else return await Ts(this.engine,o,t.maxUploads)}catch(o){Ls.warn("Failed to upload file:",o)}return[]}async pickAndUploadFile(t){try{let o=await this.pickFile(t);if(!o)return;let r=o[0];return r?await this.assetUploader.add(r):void 0}catch(o){Ls.warn("Failed to upload file:",o)}}async addImages(t){if(!t?.length)return[];let r=(await Promise.all(Array.from(t,n=>this.assetUploader.add(n)))).filter(gt);return r.length===0||await this.engine.stores.assetStore.assetService?.refresh().catch(E),r}},{service:Vs,resolve:up}=Gi();function Qy(e,t,o){up(new br(e,t,o))}var zs=class{constructor(){I(this,"nodeIdToRenderIdToRect",new Map);I(this,"nodeIdToLayoutTemplateSelectorToRect",new Map);I(this,"nodeIdToRenderIdToChildrenRects",new Map)}processLayoutMeasurements(t){let o=new Set,r=new Set;for(let{nodeId:n,renderId:i,layoutMetrics:a,layoutTemplateSelector:l}of t){let{childrenRects:s,...c}=a;r.has(n)||this.nodeIdToLayoutTemplateSelectorToRect.delete(n),r.add(n);let d=l?this.nodeIdToLayoutTemplateSelectorToRect.get(n)?.get(l):this.nodeIdToRenderIdToRect.get(n)?.get(i),m=this.nodeIdToRenderIdToChildrenRects.get(n)?.get(i);if(!(le(d,c,!0)&&fp(m,s))){if(l){let p=this.nodeIdToLayoutTemplateSelectorToRect.get(n)??new Map,u=c.matrix?DOMMatrixReadOnly.fromMatrix(c.matrix):void 0;p.set(l,{...c,matrix:u}),this.nodeIdToLayoutTemplateSelectorToRect.set(n,p)}else{let p=this.nodeIdToRenderIdToRect.get(n)??new Map;p.set(i,N.from(c)),this.nodeIdToRenderIdToRect.set(n,p)}if(s){let p=this.nodeIdToRenderIdToChildrenRects.get(n)??new Map;p.set(i,s),this.nodeIdToRenderIdToChildrenRects.set(n,p)}o.add(n)}}return o}getContentSize(t){let o=this.getRect(t),r=this.getChildrenRects(t);if(!o||!r)return;let{width:n,height:i}=N.merge(...r);return{width:n,height:i}}getRect(t){let o=ar(t);return this.nodeIdToRenderIdToRect.get(o)?.get(t)}getRects(t){return this.nodeIdToRenderIdToRect.get(t)}getLayoutTemplateRects(t){return this.nodeIdToLayoutTemplateSelectorToRect.get(t)}getChildrenRects(t){let o=ar(t);return this.nodeIdToRenderIdToChildrenRects.get(o)?.get(t)}pruneAfterTreeChanges(t){for(let o of t){let r=o.to.parentid&&o.from?.parentid&&o.to.parentid!==o.from.parentid;o.removed?(this.nodeIdToRenderIdToRect.delete(o.id),this.nodeIdToRenderIdToChildrenRects.delete(o.id),this.nodeIdToLayoutTemplateSelectorToRect.delete(o.id)):r&&this.nodeIdToRenderIdToRect.delete(o.id)}}};function fp(e,t){return e===t?!0:e===void 0||t===void 0||e.length!==t.length?!1:t.every((o,r)=>N.equals(o,e[r]??null))}async function Gs(e,t){await t.updateComponent(e.id,1)}async function Hs(e,{codeGenerationStore:t,modulesStore:o,treeStore:r},n,i={}){let{waitForAll:a=!0,persist:l=!0}=i,s=mo(r.tree,e,n),c=[],d=[];for(let p of s)d.push(Ee("screen",p.id,"default").value),p!==e&&c.push(Gs(p,t));let m=Gs(e,t);return c.push(m),await Promise.all(a?c:[m]),l&&await t.persistence.process(),Di(n,d,o)}function Ws(e,t){if(ge(e)&&Ni(t,e)){let o=Mi(t,e);return x(Z(o),"PreviewRenderer: WebPage Scope node must exist and be a WebPageNode"),x(o.isLoaded(),"PreviewRenderer: WebPage Scope node must fully loaded"),{entryNode:o.getPrimaryVariant(),entryScopeNode:o}}if(Z(e)&&e.isLoaded())return{entryNode:e.getPrimaryVariant(),entryScopeNode:e};if(Vt(e)){let o=t.getGroundNodeFor(e),r=t.getScopeNodeFor(o);if(Ve(r))return{entryNode:o,entryScopeNode:r}}if(Ko(e)){let o=t.getScopeNodeFor(e);return x(yn(o),"PreviewRenderer: Scope node must exist and be a node supports breakpoint variants"),x(o.isLoaded(),"PreviewRenderer: Scope node with breakpoint variants must be fully loaded"),{entryNode:o.getPrimaryVariant(),entryScopeNode:o}}if(fn(e)&&!Ko(e)){let o=t.getScopeNodeFor(e);return x(Gt(o),"PreviewRenderer: Smart Component Scope node must exist and be a SmartComponentNode"),{entryNode:e,entryScopeNode:o}}if(Qn(e)&&e.isVectorSetItem){let o=t.getScopeNodeFor(e);return x(Wt(o),"PreviewRenderer: Scope node must exist and be a VectorSetNode"),{entryNode:e,entryScopeNode:o}}return{entryNode:e}}function Us(e,t){let o=e.getGroundNodeFor(t),r=e.getScopeNodeFor(o);return ze(r)&&!ge(o)}var js=me("renderInfoForPreviewItem");function Qe(e){let t=e.root.getDefaultLocale(),o=e.root.locales,r=[t];return o&&r.push(...o),r}function $s(e,t,o,r,n,i){let a=[],l=[],s={global:i.root.globalPageEffect,routes:{}},c=new Set,d=Qe(i),p=kn.vekterLocalesToRouterLocales(d,{includeDrafts:!0}).find(f=>f.id===n);for(let f of i.root.children){if(!Ht(f)&&!Z(f))continue;if(Ht(f)&&a.push({id:f.id,moduleIdentifier:Qi(),layoutTemplate:{moduleIdentifier:f.instanceIdentifier}}),Z(f)){let g=f.isLoaded()?lr(Rn(f)):[],S=ai(i,f),T=qi(e,f);T&&l.push(T),a.push({id:f.id,moduleIdentifier:f.instanceIdentifier,collectionId:T?.collectionId,path:S,elements:g,layoutTemplate:gp(f,p)}),f.isLoaded()&&Yi(s,f)}let b=j.componentForIdentifier(f.instanceIdentifier)?.fonts;if(!b){js.debug("Did not find fonts for component:",f.instanceIdentifier);continue}for(let g of Zi(b))c.add(g)}let u=r?t.getPathSlugs(o.id,r,p):void 0,h=[],v=u?.unresolvedSlugs;for(let f in v){let y=v[f];x(y),h.push({variableId:f,collectionId:y.collectionId,collectionItemId:y.collectionItemId})}let C=u?.pathVariables?lr(u.pathVariables):[];return js.debug("renderInfoFor",{webPageNode:o,collectionItemNodeId:r,initialUnresolvedPathSlugs:h}),{kind:"webpage",routes:a,collectionUtils:l,locales:d,initialPathVariables:C,pageEffects:s,preloadFonts:Array.from(c),initialRoute:o.id,initialUnresolvedPathSlugs:h,initialLocaleId:n,adaptLayoutToTextDirection:i.root.adaptLayoutToTextDirection}}function gp(e,t){if(!Sn(e))return;let o=e.getResolvedControlPropValues(j,ea(),void 0,t);return{moduleIdentifier:e.layoutTemplateIdentifier,props:Fr(o)?void 0:o,richTextControlKeys:e.getRichTextControlKeys(j),vectorSetItemControls:e.getComponentVectorSetChildren(j)}}function Xs({treeStore:e,chromeStore:t,previewStore:o,modulesStore:r},n){if(!n)return{kind:"empty"};switch(n.type){case"component":return x(Be(n.componentId),"Previewing component should provide module identifier",n.componentId),{kind:"module",layout:"component",moduleIdentifier:n.componentId,locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection};case"node":{let i=e.tree.get(n.nodeId);x(i,"Previewing node should provide correct node id",n.nodeId);let a=Ws(i,e.tree),l=a.entryScopeNode;if(Ht(l))return $s(r,o,l,n.collectionItemNodeId,t.canvasLocaleId,e.tree);if(Ve(l))return{kind:"module",moduleIdentifier:Ee("design",i.id,"default").value,layout:"design-screen",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection};if(Z(a.entryScopeNode))return $s(r,o,a.entryScopeNode,n.collectionItemNodeId,t.canvasLocaleId,e.tree);if(Gt(a.entryScopeNode)){let s={variant:a.entryNode.id};return{kind:"module",moduleIdentifier:a.entryScopeNode.instanceIdentifier,props:s,layout:"component",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection}}if(Wt(a.entryScopeNode))return{kind:"module",moduleIdentifier:Ee("vector",a.entryNode.id,"default").value,layout:"component",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection};if(ge(a.entryNode)){let s=a.entryNode.getCodeComponentProps(j);return{kind:"module",moduleIdentifier:a.entryNode.codeComponentIdentifier,props:s,layout:"component",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection}}if(Us(e.tree,a.entryNode)){let s=e.tree.getGroundNodeFor(a.entryNode),c=mo(e.tree,a.entryNode,j),d=[];for(let m of c){let p=e.tree.getGroundNodeFor(m),u=Ee("screen",p.id,"default").value;d.push({id:p.id,moduleIdentifier:u})}return{kind:"prototype",routeId:s.id,routes:d}}throw new Error(`Unsupported node for preview: ${i.id}`)}default:Te(n)}}var yp="getVectorSetItems";function Ks(e){return yp in e}function _s(e,t){return e.getNodesWithTrait(t,r=>ti(r,e)).flatMap(r=>{if(r.moduleSourceRevision===void 0)return[];let n=_i(r,e).filter(a=>!a.includes("draftCollection")),i=r.moduleSourceRevision;return n.map(a=>({moduleIdentifier:Dr(a,"default").value,moduleRevision:i}))})}function Sp(e){return e.mainView===1?e.codeEditorPreviewVisible:e.mainView===3}function ov(e,t,o={}){let{previewStore:r,fullsizePreviewStore:n,loadingStore:i,chromeStore:a,treeStore:l,modulesStore:s}=e;if(!i.hasMinimalEditableData)return;let{visible:c,shownOnLaunch:d,source:m="unknown"}=o,p=Sp(a),u=typeof c=="boolean"?c:!p;if(a.setPreviewVisible(u),!p&&u){r.addActiveSession();let h=r.computePreviewItem();if(!vp({treeStore:l,previewStore:r,chromeStore:a,modulesStore:s},h))r.item=h;else if(h?.type==="node"){let v=l.tree.get(h.nodeId);x(v,"Did not find previewNode",h.nodeId),n.updatePreviewSize(v)}xp(t,h).then(v=>{r.targetModuleRevisions=_s(l.tree,v)}).catch(E).finally(()=>{r.item=h}),la({shown_on_launch:d,source:m})}else p&&!u&&(r.removeActiveSession(),r.stickyPreviewItem=!1,r.item=void 0)}function vp(e,t){if(!t||t.type!=="node")return!1;let{modulesStore:o}=e,r=Xs(e,t);switch(r.kind){case"module":{let n=ue(r.moduleIdentifier);return Ft(n)?!o.getModuleEntryByLocalId(n.localId):!1}case"webpage":{let n=Eo("screen",r.initialRoute);return!o.getModuleEntryByLocalId(n)}case"prototype":{let n=Eo("prototype",r.routeId);return!o.getModuleEntryByLocalId(n)}case"empty":return!1;default:Te(r)}}async function xp(e,t){if(!t)return[];let o=await Cp(t,e.stores),{codeGenerationStore:r}=e.stores,n=await r.generateAndUpdateQueuedComponents();return await r.serialization.idle(),[o,...n]}async function Cp(e,t){let{codeGenerationStore:o,treeStore:r,modulesStore:n}=t;if(e.type==="component"){if(!o.canSerialize(e.componentId))return;await o.updateComponent(e.componentId,1);return}else if(e.collectionItemNodeId){let i=r.tree.getParent(e.collectionItemNodeId);return!i||!o.canSerialize(i.id)?void 0:(await o.updateComponent(i.id,1),i.id)}else{let i=r.tree,a=i.get(e.nodeId);x(a,"Did not find previewNode",e.nodeId);let l=i.getCanvasScopeNodeFor(a);if(x(l,"Tried triggering code generation for non canvas scope node:",a.id),Ks(l))return!ei(a)||!o.canSerialize(a.id)?void 0:(await o.updateComponent(a.id,1),a.id);if(On(l))return o.canSerialize(l.id)?(await o.updateComponent(l.id,1),l.id):void 0;if(ze(l))return o.canSerialize(a.id)?(await Hs(a,{codeGenerationStore:o,treeStore:r,modulesStore:n},j),a.id):void 0;if(Ve(l))return o.canSerialize(a.id)?(await o.updateComponent(a.id,1),a.id):void 0;Te(l)}}function av(e){let{newContentAsDraft:t}=e.stores.persistedUserDefaults;return!(!t||e.stores.publishStore.publishStatus===1)}var vo={importFigma:"CommandOrControl+Shift+I",newProject:"Option+CommandOrControl+N",publishSite:"CommandOrControl+Shift+P",openPublishedSite:"CommandOrControl+Shift+O",uploadImage:"Option+CommandOrControl+I",quickActions:"CommandOrControl+K",toggleLocalization:"CommandOrControl+Shift+L",toggleContentManagement:"Option+C",toggleVersionHistory:"Shift+CommandOrControl+H",generateWebPage:te.isOn("wireframerKits")?"A":"W",undo:"CommandOrControl+Z",redo:"CommandOrControl+Shift+Z",goBack:"CommandOrControl+[",goForward:"CommandOrControl+]",cut:"CommandOrControl+X",copy:"CommandOrControl+C",copyFill:"CommandOrControl+Shift+C",paste:"CommandOrControl+V",delete:"Delete",selectMostRecentPage:"Option+Escape",selectAll:"CommandOrControl+A",selectGroundNode:"CommandOrControl+Escape",selectParent:"Escape",copyStyle:"CommandOrControl+Option+C",pasteStyle:"CommandOrControl+Option+V",pasteInPlace:"CommandOrControl+Shift+V",duplicate:"CommandOrControl+D",toggleLayerLock:"CommandOrControl+L",toggleLayerVisible:"CommandOrControl+;",rename:"CommandOrControl+R",renameLayers:"Option+R",selectSiblings:"CommandOrControl+Shift+A",cycleSelection:"Tab",decycleSelection:"Shift+Tab",fakeSelectChildren:"Enter",zoomIn:"CommandOrControl+Plus",zoomOut:"CommandOrControl+-",resetZoom:"CommandOrControl+0",zoomToFitAll:"CommandOrControl+1",zoomToFitSelection:"CommandOrControl+2",openPanelSearch:"CommandOrControl+F",toggleInterface:"CommandOrControl+.",toggleRulers:"Control+R",toggleGrids:"Control+G",toggleAppearance:"Control+Command+N",showPages:"Option+1",showLayers:"Option+2",showAssets:"Option+3",collapseLayers:"Option+L",startLinkTool:"L",sampleColor:"Control+C",toggleInsert:"I",toggleLibraryModal:"CommandOrControl+/",toolCreateStack:"S",toolCreateFrame:"F",toolCreateRounded:"U",toolCreateImage:"Shift+I",toolCreateVideo:"Shift+V",toolCreateText:"T",toolComment:"C",toolChat:"/",toolZoom:"Z",toolPath:"P",toolScale:"K",toolCreateRectangleShape:"R",toolCreateOvalShape:"O",toolCreateRows:"Shift+R",toolCreateColumns:"Shift+C",toolCreateGrid:"Shift+G",addEnclosingFrame:"CommandOrControl+Return",addEnclosingStack:"CommandOrControl+Option+Return",autoSizeLayout:"Shift+A",removeFramePreservingChildren:"CommandOrControl+Delete",sizeToFitContent:"Control+Option+R",moveForward:"CommandOrControl+Option+Up",moveBackward:"CommandOrControl+Option+Down",moveToFront:"]",moveToBack:"[",alignLeft:"Option+A",alignCenter:"Option+H",alignRight:"Option+D",alignTop:"Option+W",alignMiddle:"Option+V",alignBottom:"Option+S",distributeHorizontal:"Control+Option+H",distributeVertical:"Control+Option+V",unite:"Option+Shift+U",subtract:"Option+Shift+S",intersect:"Option+Shift+I",exclude:"Option+Shift+E",join:"Option+Shift+J",saveCodeFile:"CommandOrControl+S",makeBold:"CommandOrControl+B",makeItalic:"CommandOrControl+I",makeUnderlined:"CommandOrControl+U",chooseFontFamily:"CommandOrControl+T",group:"CommandOrControl+G",ungroup:"CommandOrControl+Shift+G",makeComponent:"CommandOrControl+Option+K",makeCodeComponent:"CommandOrControl+Shift+K",showPreview:"CommandOrControl+P",openFullScreen:"CommandOrControl+Shift+F",toggleHighlightsInLivePreview:"CommandOrControl+Shift+H",reload:"CommandOrControl+R",toggleConsole:"CommandOrControl+I",handleResponsive:"Z",togglePreviewInterface:"CommandOrControl+Shift+F",previewNextBreakpoint:"CommandOrControl+.",previewPreviousBreakpoint:"CommandOrControl+,",runRecentPlugin:"CommandOrControl+Option+P",openDevelopmentPlugin:"CommandOrControl+Option+L",openTextSearchPlugin:"CommandOrControl+Shift+F",openSiteSettings:"Shift+,",saveSiteSettings:"CommandOrControl+S",previousCollectionItem:"CommandOrControl+Up",nextCollectionItem:"CommandOrControl+Down",newCollectionItem:"N",pasteCollection:"CommandOrControl+V"},Ir={sampleColor:"",selectGroundNode:"",openFullScreen:"Control+Alt+F",resetZoom:"Shift+0",zoomToFitAll:"Shift+1",zoomToFitSelection:"Shift+2",toggleInterface:"Alt+.",toggleRulers:"Control+Shift+R",toggleGrids:"Alt+G",toggleAppearance:"Alt+N",distributeHorizontal:"Alt+Shift+H",distributeVertical:"Alt+Shift+V"},dv=e=>ni?vo[e]:Ir[e]??vo[e];var qs=class extends Jt{constructor(){super(...arguments);I(this,"menu",null)}show(o,r){let n=ta(o,{validateAction:Ji,appAccelerators:vo,appAcceleratorsWindows:Ir});this.menu={items:n,config:r,startTime:performance.now()}}close(){this.scheduler.processWhenReady(()=>{this.menu&&(this.menu.config.onDone?.(),this.menu.config.onCancel?.(),this.menu=null)})}};var et,xe,Ys=class extends Jt{constructor(o){super();this.modulesStore=o;Oo(this,et,new Map);Oo(this,xe,new Map);I(this,"_forceUpdate",0)}rerender(){this._forceUpdate++}queue(o){if(se(this,xe).has(o))return;let r=Or();se(this,xe).set(o,r),this.rerender()}cache(o,r){let n=se(this,xe).get(o);n&&n.resolve(r),se(this,xe).delete(o),se(this,et).set(o,r),this.rerender()}getByGlobalId(o){let r=this.modulesStore.getPersistedModuleByGlobalId(o);if(!r)return;let n=ii(r.localId)[1],i=se(this,xe).get(n);if(i)return i;let a=se(this,et).get(n);if(a)return a;let l=this.modulesStore.forType("vector").getByStableName(n)?.transientSVGIcon;if(l)return{svg:l}}delete(o){se(this,et).delete(o),this.rerender()}};et=new WeakMap,xe=new WeakMap;function wv(e,t){if(!vi(e)){t.onlyNodesWithFormInputFontStyles=!1;return}oe("formInputFontFamily",t,e),bp(t,e),oe("formInputFontColor",t,e),oe("formInputFontWeight",t,e),oe("formInputFontStyle",t,e),oe("formInputFontLineHeight",t,e),oe("formInputFontLineHeightUnit",t,e),oe("formInputFontTextAlignment",t,e),oe("formInputFontLetterSpacing",t,e),oe("formInputFontLetterSpacingUnit",t,e),V(t.formInputFontSelector)&&(t.formInputFontSelector=new Set),Ur(e.formInputFontSelector)&&t.formInputFontSelector.add(e.formInputFontSelector),t.formInputOpenTypeFontFeatures=Tr(t.formInputOpenTypeFontFeatures,e.formInputOpenTypeFontFeatures)}function bp(e,t){let o=e.formInputFontSize,r=e.formInputFontSizeUnit;if(H(o)&&H(r)||ce(t.formInputFontSize))return;let[n,i]=W(t.formInputFontSize)?[t.formInputFontSize,"px"]:st(t.formInputFontSize);if(V(r))e.formInputFontSizeUnit=i;else if(Se(i,r)){e.formInputFontSizeUnit=k,e.formInputFontSize=k;return}V(o)?e.formInputFontSize=n:Se(n,o)&&(e.formInputFontSize=k)}function Tr(e,t){let o=new Set(Le(e)?Object.keys(e):void 0),r=t??[],n=Le(e)?e:{};for(let i of r){if(!lt(i))continue;let a=n[i];ce(a)&&(n[i]=Le(e)?k:!0),o.delete(i)}for(let i of o)lt(i)&&(n[i]=k);return n}var Np={borderBottom:k,borderLeft:k,borderRight:k,borderTop:k,borderWidth:k,borderColor:k,borderStyle:k,borderPerSide:k};function F(e,t){return H(t)?k:V(t)?e:Se(e,t)?k:e}function Mp(e,t){return H(t)?k:V(t)||le(e,t)?e:k}function Rp(e,t,o){return x(Le(e)),H(e)?k:e.length!==t.length?k:(e.forEach((r,n)=>{let i=t[n];x(i);let a=r.type;switch(a){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"number":case"object":case"richtext":case"string":case"transition":case"image":case"responsiveimage":case"scrollsectionref":case"customcursor":case"border":case"cursor":Ct(r,i,o);break;default:Te(a)}}),e)}function Ct(e,t,o){switch(e.type){case"array":{if(x(t.type==="array"),x(o.type==="array"),H(e.value))break;if(V(e.value)){if(Bt(t.value)){e.value=t.value;break}e.value=t.value.map(r=>Dp(o.control,r.id))}if(Bt(t.value)){e.value=F(t.value,e.value);break}if(Bt(e.value)){e.value=k;break}e.value=Rp(e.value,t.value,o.control);break}case"slot":{if(x(t.type===e.type),H(e.value))break;x(o.type==="slot"),x(!_(t.value),"Slots don't support dynamic values"),V(e.value)?e.value=t.value:e.value=k;break}case"object":if(x(t.type===e.type),H(e.value))break;if(x(o.type==="object"),V(e.value))if(t.value===null)e.value=null;else{e.value={};for(let r in o.controls){let n=o.controls[r];x(n);let i=Fp(n);i&&(e.value[r]=i)}}if(e.value===null||t.value===null){e.value!==t.value&&(e.value=k);break}for(let r in e.value){let n=o.controls[r];x(n);let i=e.value[r];x(i);let a=t.value[r];x(a,"getControlProps(), should have added these if they were missing from the document data"),Ct(i,a,n)}break;case"transition":if(x(t.type===e.type),H(e.value))break;if(V(e.value)){e.value=t.value;break}if(_(e.value)||_(t.value)||!e.value||!t.value){e.value=F(t.value,e.value);break}le(e.value,t.value)||(e.value=k);break;case"responsiveimage":if(x(t.type==="image"),e.value=F(t.value,e.value),e.type==="responsiveimage"){let r=fe(t.alt)?t.alt:"";e.alt=F(r,e.alt);let{positionX:n,positionY:i}=t;e.positionX=F(n,e.positionX),e.positionY=F(i,e.positionY)}break;case"fusednumber":x(t.type===e.type),e.single=F(t.value.single,e.single),e.isFused=F(t.isFused,e.isFused),e.fused[0]=F(t.value.fused[0],e.fused[0]),e.fused[1]=F(t.value.fused[1],e.fused[1]),e.fused[2]=F(t.value.fused[2],e.fused[2]),e.fused[3]=F(t.value.fused[3],e.fused[3]);break;case"link":{if(x(t.type===e.type),H(e.value))break;if(V(e.value)){e.value=t.value;break}if(_(e.value)||_(t.value)||!e.value||!t.value){e.value=F(t.value,e.value);break}if(!Ho(e.value,t.value)){e.value=k;break}break}case"linkrelvalues":{if(x(t.type===e.type),H(e.value))break;if(V(e.value)){e.value=t.value;break}if(_(e.value)||_(t.value)||!e.value||!t.value){e.value=F(t.value,e.value);break}le(e.value,t.value)||(e.value=k);break}case"pagescope":if(x(t.type===e.type),H(e.value))break;if(V(e.value)){e.value=t.value;break}if(!e.value||!t.value){e.value=F(t.value,e.value);break}if(!Ho(e.value,t.value)){e.value=k;break}break;case"font":{if(x(o.type==="font"),x(t.type===e.type),H(e.value))break;if(V(e.value)){if(ce(t.value)){e.value=t.value;break}let h=new Set([t.value.fontSelector]),v=O,C=new Set,f=new Set,y=O,b=O,g=O,S=new Set,T={};if(o.displayFontSize){let[w,M]=$o(t.value.fontSize)?st(t.value.fontSize):[];v=w,M&&C.add(M)}if(o.displayTextAlignment&&(b=t.value.textAlignment),o.controls==="extended"){let[w,M]=t.value.lineHeight??[];y=w,M&&f.add(M);let[P,U]=t.value.letterSpacing??[];g=P,U&&S.add(U)}t.value.openTypeFontFeatures&&(T=(t.value.openTypeFontFeatures??[]).reduce((w,M)=>(lt(M)&&(w[M]=!0),w),{})),e.value={fontSelector:h,lineHeightValue:y,lineHeightUnits:f,fontSizeValue:v,fontSizeUnits:C,textAlignment:b,letterSpacingValue:g,letterSpacingUnits:S,openTypeFontFeatures:T};break}if(ce(e.value)){ce(t.value)||(e.value=k);break}if(ce(t.value)){e.value=k;break}let{fontSelector:r,lineHeight:[n,i]=[],fontSize:a,textAlignment:l,letterSpacing:[s,c]=[],openTypeFontFeatures:d}=t.value;e.value.fontSelector.add(r);let[m,p]=$o(a)?st(a):[],u=e.value.fontSizeValue!==m||!ce(p)&&!e.value.fontSizeUnits.has(p);o.displayFontSize&&u&&(e.value.fontSizeValue=k,p&&e.value.fontSizeUnits.add(p)),o.displayTextAlignment&&e.value.textAlignment!==l&&(e.value.textAlignment=k),o.controls==="extended"&&(e.value.lineHeightValue!==n&&(e.value.lineHeightValue=k),i&&e.value.lineHeightUnits.add(i),e.value.letterSpacingValue!==s&&(e.value.letterSpacingValue=k),c&&e.value.letterSpacingUnits.add(c)),e.value.openTypeFontFeatures=Tr(e.value.openTypeFontFeatures,d);break}case"customcursor":case"scrollsectionref":{x(t.type===e.type);let r=le(t.value,e.value)?e.value:t.value;e.value=F(r,e.value);break}case"border":{if(x(t.type===e.type),V(e.value)){_(t.value)?e.value=t.value:Ne(t.value)?e.value=null:e.value={...t.value};break}if(_(t.value)||_(e.value)||Ne(t.value)||Ne(e.value)){Se(t.value,e.value)&&(e.value=Np);break}let r=e.value;r.borderTop=F(t.value.borderTop,r.borderTop),r.borderRight=F(t.value.borderRight,r.borderRight),r.borderBottom=F(t.value.borderBottom,r.borderBottom),r.borderLeft=F(t.value.borderLeft,r.borderLeft),r.borderWidth=F(t.value.borderWidth,r.borderWidth),r.borderColor=F(t.value.borderColor,r.borderColor),r.borderStyle=F(t.value.borderStyle,r.borderStyle);break}case"boxshadow":x(t.type===e.type),e.value=gn(t.value,e.value);break;case"multicollectionreference":x(t.type===e.type),e.value=Mp(t.value,e.value);break;case"gap":{if(x(t.type===e.type),e.value=F(t.value,e.value),!H(e.columnGap)){let r=_(t.value)?k:gi(t.value);V(e.columnGap)?e.columnGap=r:Se(r,e.columnGap)&&(e.columnGap=k)}if(!H(e.rowGap)){let r=_(t.value)?k:yi(t.value);V(e.rowGap)?e.rowGap=r:Se(r,e.rowGap)&&(e.rowGap=k)}break}case"boolean":case"color":case"date":case"enum":case"file":case"number":case"richtext":case"string":case"image":case"cursor":case"padding":case"borderradius":case"collectionreference":case"trackingid":case"vectorsetitem":x(t.type===e.type),e.value=F(t.value,e.value);break;default:}}function bt(e){switch(e.type){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"linkrelvalues":case"number":case"richtext":case"string":case"transition":case"boxshadow":case"image":case"object":return{type:e.type,value:O};case"array":case"slot":case"font":case"pagescope":case"scrollsectionref":case"customcursor":case"border":case"cursor":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"vectorsetitem":return{type:e.type,value:O};case"gap":return{type:e.type,value:O,columnGap:O,rowGap:O};case"trackingid":return{type:e.type,value:O,trackingIdAIPrompt:O};case"fusednumber":return{type:"fusednumber",isFused:O,single:O,fused:[O,O,O,O]};case"responsiveimage":return{type:"responsiveimage",value:O,alt:O,positionX:O,positionY:O};case"eventhandler":return null;default:return null}}var kp={number:!0,enum:!0,boolean:!0,string:!0,richtext:!0,color:!0,image:!0,responsiveimage:!0,file:!0,transition:!0,link:!0,date:!0,object:!0,array:!0,fusednumber:!0,font:!0,pagescope:!0,scrollsectionref:!0,customcursor:!0,border:!0,cursor:!0,boxshadow:!0,gap:!0,padding:!0,borderradius:!0,collectionreference:!0,multicollectionreference:!0,trackingid:!0};function Pp(e){return Object.hasOwn(kp,e)}function wp(e){return Pp(e.type)}function Fp(e){let t=bt(e);return t?(x(wp(t)),t):null}function Dp(e,t){let o=bt(e);x(o);let r=o;return r.id=t,r}function Kv(e,t){let o={};for(let r in e){let n=e[r];if(!n)continue;let i=bt(n);i&&(o[r]=i)}for(let r of t)for(let n in r){let i=e[n];if(x(i),i.type==="eventhandler")continue;let a=o[n];x(a,"Each control prop should have a corresponding reduced control prop");let l=r[n];x(l),Ct(a,l,i)}return o}function nx(e,t,o,r,n){let i=o.id;if(!i)return;let a=e.getNodeWithTrait(o.providerId,At);if(!a)return;let l=a.dataIdentifier;if(!Ft(l))return;let s=pt(e,l);if(!s)return;n??=yt(a,t);let c=e.getNodeWithTrait(n,at);if(!c)return;let d=Xt(e,t,i,c,s);d&&(c=d.collectionItemNode,s=d.collectionNode,i=d.variableId);let p=s.getPropertyControls(e)[i];if(!p)return;let u=s.getVariable(i);if(!u)return;let h=c.getControlProp(i),{controlProp:v,reducedControlProp:C}=Op(p,h);if(Wi(v)&&(x(C,"Reduced control prop should not be null when a collection control prop is present"),s.id===c.parentid&&!(s.managedByPlugin&&!u.userEditable)&&u.type===r&&v.type===r))return{collectionNode:s,collectionItemNode:c,variableDefinition:u,controlDescription:p,rawControlProp:h,controlProp:v,reducedControlProp:C,variableId:i}}var Zs=new WeakMap;function Op(e,t){let o=Zs.get(e);if(o&&o.rawControlProp===t){let{controlProp:i,reducedControlProp:a}=o;return{controlProp:i,reducedControlProp:a}}let r=xn(e,t),n=bt(e);return n&&r&&Ct(n,r,e),Zs.set(e,{rawControlProp:t,controlProp:r,reducedControlProp:n}),{controlProp:r,reducedControlProp:n}}function Js(e){return e!=null&&typeof e=="object"&&e.nodeType===1}function Qs(e,t){return t&&e==="hidden"?!1:e!=="visible"&&e!=="clip"}function Nr(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let o=getComputedStyle(e,null);return Qs(o.overflowY,t)||Qs(o.overflowX,t)}return!1}function xo(e,t,o,r,n,i,a,l){return i<e&&a>t||i>e&&a<t?0:i<=e&&l<=o||a>=t&&l>=o?i-e-r:a>t&&l<o||i<e&&l>o?a-t+n:0}function Mr(e,t){let{scrollMode:o,block:r,inline:n,boundary:i,skipOverflowHiddenElements:a}=t,l=typeof i=="function"?i:P=>P!==i;if(!Js(e))throw new TypeError("Invalid target");let s=document.scrollingElement||document.documentElement,c=[],d=e;for(;Js(d)&&l(d);){if(d=d.parentNode,d===s){c.push(d);break}d===document.body&&Nr(d)&&!Nr(document.documentElement)||Nr(d,a)&&c.push(d)}let m=window.visualViewport,p=m?.width??innerWidth,u=m?.height??innerHeight,h=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,{height:C,width:f,top:y,right:b,bottom:g,left:S}=e.getBoundingClientRect(),T=r==="start"||r==="nearest"?y:r==="end"?g:y+C/2,w=n==="center"?S+f/2:n==="end"?b:S,M=[];for(let P of c){let{height:U,width:K,top:Y,right:X,bottom:tt,left:Ce}=P.getBoundingClientRect();if(o==="if-needed"&&y>=0&&S>=0&&g<=u&&b<=p&&y>=Y&&g<=tt&&S>=Ce&&b<=X)return M;let ke=getComputedStyle(P),Pe=parseInt(ke.borderLeftWidth,10),be=parseInt(ke.borderTopWidth,10),we=parseInt(ke.borderRightWidth,10),Fe=parseInt(ke.borderBottomWidth,10),G=0,L=0,Ie="offsetWidth"in P?P.offsetWidth-P.clientWidth-Pe-we:0,A="offsetHeight"in P?P.offsetHeight-P.clientHeight-be-Fe:0;if(s===P)r==="start"?G=T:r==="end"?G=T-u:r==="nearest"?G=xo(v,v+u,u,be,Fe,v+T,v+T+C,C):G=T-u/2,n==="start"?L=w:n==="center"?L=w-p/2:n==="end"?L=w-p:L=xo(h,h+p,p,Pe,we,h+w,h+w+f,f),G=Math.max(0,G+v),L=Math.max(0,L+h);else{r==="start"?G=T-Y-be:r==="end"?G=T-tt+Fe+A:r==="nearest"?G=xo(Y,tt,U,be,Fe+A,T,T+C,C):G=T-(Y+U/2)+A/2,n==="start"?L=w-Ce-Pe:n==="center"?L=w-(Ce+K/2)+Ie/2:n==="end"?L=w-X+we+Ie:L=xo(Ce,X,K,Pe,we+Ie,w,w+f,f);let{scrollLeft:ee,scrollTop:De}=P;G=Math.max(0,Math.min(De+G,P.scrollHeight-U+A)),L=Math.max(0,Math.min(ee+L,P.scrollWidth-K+Ie)),T+=De-G,w+=ee-L}M.push({el:P,top:G,left:L})}return M}function el(e){return e===Object(e)&&Object.keys(e).length!==0}function Bp(e,t="auto"){let o="scrollBehavior"in document.body.style;e.forEach(({el:r,top:n,left:i})=>{r!==document.body&&(r.scroll&&o?r.scroll({top:n,left:i,behavior:t}):(r.scrollTop=n,r.scrollLeft=i))})}function Ep(e){return e===!1?{block:"end",inline:"nearest"}:el(e)?e:{block:"start",inline:"nearest"}}function tl(e,t){let o=!e.ownerDocument.documentElement.contains(e);if(el(t)&&typeof t.behavior=="function")return t.behavior(o?[]:Mr(e,t));if(o)return;let r=Ep(t);return Bp(Mr(e,r),r.behavior)}var Lp="codemark",It=100,ol=new In(Lp);function ie(e,t){var o,r;return"schema"in e?(o=t?.markType)!==null&&o!==void 0?o:e.schema.marks.code:(r=t?.markType)!==null&&r!==void 0?r:e.state.schema.marks.code}function de(e,t){return e.resolve(Math.min(Math.max(1,t),e.nodeSize-2))}function il(e,t,o,r){var n;let i=e.isInSet((n=t.state.storedMarks)!==null&&n!==void 0?n:t.state.doc.resolve(o).marks()),a=t.state.doc.rangeHasMark(o,r,e);return!!(i||a)}var rl={match:/`((?:[^`\w]|[\w])+)`$/,handler:(e,t,o,r,n,i,a,l)=>{if(il(e,t,n,i))return!1;let s=r[1],c=e.create(l),d=n+s.length,m=t.state.tr.delete(n,i).insertText(s).addMark(n,d,c),p=m.setSelection(q.create(m.doc,d)).removeStoredMark(e),u=p.setMeta(a.input,{transform:p,from:n,to:i,text:`\`${s}${o}`});return t.dispatch(u),!0}},nl={match:/^`((?:[^`\w]|[\w])+)`/,handler:(e,t,o,r,n,i,a,l)=>{if(il(e,t,n,i))return!1;let s=e.create(l),c=r[1],d=n,m=t.state.tr.delete(n,i).insertText(c).addMark(n,n+c.length,s),p=m.setSelection(q.create(m.doc,d)).addStoredMark(s),u=p.setMeta(a.input,{transform:p,from:n,to:i,text:`\`${c}${o}`});return t.dispatch(u),!0}};function Ap(e,t,o,r,n,i,a){if(t.composing)return!1;let{state:l}=t,s=l.doc.resolve(o);if(s.parent.type.spec.code)return!1;let c="\uFFFC",d=s.parent.textBetween(Math.max(0,s.parentOffset-It),s.parentOffset,void 0,c)+n,m=n+s.parent.textBetween(s.parentOffset,Math.min(s.parent.nodeSize-2,s.parentOffset+It),void 0,c),p=rl.match.exec(d),u=nl.match.exec(m);if(p){let h=rl.handler(e,t,n,p,o-p[0].length+n.length,r,i,a);if(h)return h}return u?nl.handler(e,t,n,u,o,r+u[0].length-n.length,i,a):!1}function al(e,t){t||(t={});let o=new Q({isInputRules:!0,state:{init:()=>null,apply(r,n){let i=r.getMeta(o);return i||(r.selectionSet||r.docChanged?null:n)}},props:{handleTextInput(r,n,i,a){let l=ie(r,t);return Ap(l,r,n,i,a,{input:o,cursor:e},t.attrs)}}});return o}function ae(e,t,o="next"){let r={action:o};return e.dispatch(e.state.tr.setMeta(t,r)),!1}function sl(e,t,o,r,n){if(e.state.selection.empty||o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{from:i,to:a}=e.state.selection;if(a-i>=It||e.state.doc.rangeHasMark(i,a,r))return!1;let l=e.state.tr.addMark(i,a,r.create(n)),s=l.setSelection(q.create(l.doc,a)).removeStoredMark(r);return e.dispatch(s),!0}function Vp(e,t,o,r,n){var i;if(o.metaKey)return ae(e,t);if(o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:a,doc:l}=e.state;if(!a.empty)return!1;let s=t.getState(e.state),c=a.$from,d=!!r.isInSet(c.marks()),m=!!r.isInSet((i=c.marksAcross(de(l,a.from+1)))!==null&&i!==void 0?i:[]);return c.pos===e.state.doc.nodeSize-3&&c.parentOffset===c.parent.nodeSize-2&&s?.active?(e.dispatch(e.state.tr.removeStoredMark(r)),!0):d===m&&c.parentOffset!==0?!1:d&&(!s?.active||s.side===-1)&&c.parentOffset!==0?(e.dispatch(e.state.tr.removeStoredMark(r)),!0):m&&s?.side===-1?(e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0):!1}function ll(e,t,o,r,n){if(Vp(e,t,o,r,n))return!0;let{selection:a}=e.state,l=a.$from;return a.empty&&l.parentOffset===l.parent.nodeSize-2?ae(e,t):!1}function zp(e,t,o,r,n){var i;if(o.metaKey)return ae(e,t);if(o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:a,doc:l}=e.state,s=t.getState(e.state),c=!!r.isInSet(a.$from.marks()),d=!!r.isInSet((i=de(l,a.empty?a.from-1:a.from+1).marks())!==null&&i!==void 0?i:[]);if(c&&s?.side===-1&&a.$from.parentOffset===0)return!1;if(s?.side===0&&a.$from.parentOffset===0)return e.dispatch(e.state.tr.removeStoredMark(r)),!0;if(c&&d&&s?.side===0)return e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0;if(c&&!d&&s?.active&&a.$from.parentOffset===0||!c&&s?.active&&s?.side===0)return e.dispatch(e.state.tr.removeStoredMark(r)),!0;if(c===d)return!1;if(d||!a.empty&&c){let m=a.empty?a.from-1:a.from,p=e.state.tr.setSelection(q.create(l,m));return!a.empty&&d?e.dispatch(p.addStoredMark(r.create(n))):e.dispatch(p.removeStoredMark(r)),!0}if((d||!a.empty&&c)&&!s?.active){let m=a.empty?a.from-1:a.from;return e.dispatch(e.state.tr.setSelection(q.create(l,m)).removeStoredMark(r)),!0}if(c&&!s?.active&&a.$from.parentOffset>0)return e.dispatch(e.state.tr.setSelection(q.create(l,a.from-1)).addStoredMark(r.create(n))),!0;if(c&&!d&&s?.active&&s.side!==-1)return e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0;if(c&&!d&&s?.active){let m=a.from-1;return e.dispatch(e.state.tr.setSelection(q.create(l,m)).addStoredMark(r.create(n))),!0}return!1}function cl(e,t,o,r,n){if(zp(e,t,o,r,n))return!0;let{selection:a}=e.state,l=a.$from,s=t.getState(e.state);return l.pos===1&&l.parentOffset===0&&s?.side===-1?!0:a.empty&&l.parentOffset===0?ae(e,t):!1}function dl(e,t,o,r){if(o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=de(i,n.from-1),l=!!r.isInSet(a.marks()),s=a.parentOffset===0,c=!!r.isInSet(de(i,n.to+1).marks());if((!l||s)&&!c)return ae(e,t);let d=t.getState(e.state);if(n.empty&&d?.side===-1){let m=e.state.tr.delete(n.from-1,n.from);return e.dispatch(m),!0}return!1}function pl(e,t,o,r){if(o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=!!r.isInSet(n.$from.marks()),l=n.$from.parentOffset===0,s=!!r.isInSet(de(i,n.to+2).marks());return(!a||l)&&!s?ae(e,t):!1}function ml(e,t){var o,r;if(!e)return null;let{selection:n,doc:i}=e;if(!n.empty)return null;let a=!!t.isInSet((o=e.storedMarks)!==null&&o!==void 0?o:[]),l=!!t.isInSet(n.$from.marks()),s=!!t.isInSet((r=de(i,n.from+1).marks())!==null&&r!==void 0?r:[]),c=n.$from.parentOffset===0;return l!==s||!l&&a!==l||l&&c?e.tr.removeStoredMark(t):null}function Gp(){let e=document.createElement("span");return e.classList.add("fake-cursor"),e}function Hp(e){e||(e={});let t=new Q({key:ol,appendTransaction:(o,r,n)=>{var i;let a=t.getState(r),l=(i=o[0])===null||i===void 0?void 0:i.getMeta(t);return a?.next||l?.action==="click"?ml(n,ie(n,e)):null},state:{init:()=>null,apply(o,r,n,i){var a;let l=o.getMeta(t);if(l?.action==="next")return{next:!0};let s=ie(i,e),c=s.isInSet((a=i.storedMarks)!==null&&a!==void 0?a:i.doc.resolve(o.selection.from).marks()),d=s.isInSet(i.doc.resolve(o.selection.from).marks()),m=s.isInSet(de(i.doc,o.selection.from+1).marks()),p=o.selection.$from.parentOffset===0;return o.selection.empty?!c&&m&&(!d||p)?{active:!0,side:-1}:c&&(!d||p)?{active:!0,side:0}:!c&&d&&!m?{active:!0,side:0}:c&&d&&!m?{active:!0,side:-1}:null:null}},props:{attributes:o=>{var r;let{active:n=!1}=(r=t.getState(o))!==null&&r!==void 0?r:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:o=>{var r;let{active:n,side:i}=(r=t.getState(o))!==null&&r!==void 0?r:{};if(!n)return qo.empty;let a=wn.widget(o.selection.from,Gp,{side:i});return qo.create(o.doc,[a])},handleKeyDown(o,r){switch(r.key){case"`":return sl(o,t,r,ie(o,e),e.attrs);case"ArrowRight":return ll(o,t,r,ie(o,e),e.attrs);case"ArrowLeft":return cl(o,t,r,ie(o,e),e.attrs);case"Backspace":return dl(o,t,r,ie(o,e));case"Delete":return pl(o,t,r,ie(o,e));case"ArrowUp":case"ArrowDown":case"Home":case"End":return ae(o,t);case"e":case"a":return r.ctrlKey?ae(o,t):!1;default:return!1}},handleClick(o){return ae(o,t,"click")}}});return t}function ul(e){let t=Hp(e),o=al(t,e);return[t,o]}var Tx=ul;var Dx=e=>(t,o)=>{if(!o)return!1;let r=t.selection,n=r.$from.node(1);if(!z(n)||!ct(n)||r.$to.parentOffset===r.$to.parent.content.size)return!1;let a=n.attrs.tag;return a==="p"||a==="div"?!1:fl(e)(t,o)},Ox=e=>(t,o)=>{if(!o)return!1;let n=t.selection.$from.node(1);if(!z(n)||ct(n))return!1;let i=n.attrs.tag;return i==="p"||i==="div"?!1:fl(e)(t,o)},fl=e=>(t,o)=>{if(!o)return!1;let r=e.nodes.lineBreak.create(),n=t.tr.replaceSelectionWith(r).scrollIntoView();return o(n),!0},Bx=e=>(t,o)=>{let r=t.selection;if(r.from!==r.to)return!1;let n=r.$from.node(-1);return!Tn(n)||Mn(r.$from.node(-3))||r.$from.parentOffset!==0||r.$from.index(-1)!==0||r.$from.index(-2)!==0?!1:Ui(e.nodes.listItem)(t,o&&(i=>{if(r.$from.depth>3){let a=r.$from.before(-1);i.join(a)}o(i)}))};function Ax(e){return sr(/^([ai]|\d+)\.\s$/iu,e.nodes.numberedList,t=>{let o=t[1];switch(o){case"a":return{listStyleType:"lower-alpha"};case"A":return{listStyleType:"upper-alpha"};case"i":return{listStyleType:"lower-roman"};case"I":return{listStyleType:"upper-roman"};default:return{start:Number(o)}}},(t,o)=>o.childCount+o.attrs.start===Number(t[1]))}function Vx(e){return sr(/^\s*([-+*])\s$/u,e.nodes.bulletedList)}function Xx(){return new Q({appendTransaction(e,t,o){let r,n=o.selection.$from.parent;if(t.selection instanceof re&&e.find(a=>a.steps.find(l=>l instanceof Cn))){let a=t.doc.firstChild,l=z(n)&&!ct(n);if(a&&z(a)&&l){let s=Wp(a);if(r??=o.tr,s){let c=s.marks.find($e);r.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c?.attrs.inlineStyles??{}});for(let d of s.marks)r.addMark(0,o.doc.content.size,d),r.addStoredMark(d)}else{let c=a.attrs.inlineStyles;r.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c})}}}return r}})}function Wp(e){for(let t=0;t<e.childCount;t++){let o=e.child(t);if(Nn(o))return o}}function Zx(e,t){let o=t.getFontsForLoading().filter(i=>!Vo.isSelectorLoaded(i)),r=t.getTextStylePresets(!1).filter(Xr),n=e.getNodesWithTrait(r,on).filter(i=>!Vo.isSelectorLoaded(i.font)).map(i=>i.font);return o.push(...n),o}var hl=[ne.youtube,ne.vimeo,ne.codeblock,ne.twitter];async function gl(e,t){let o=ue(t);wt(o)&&await e.stores.modulesStore.addExternalModulesToProject([o],{onTreeUpdate(){}})}var yl=new WeakMap;async function nC(e){let{modules:t}=await e.stores.modulesStore.lookUpModules(hl.map(Pn)),o=[];for(let r=0;r<t.length;r++){let n=t[r];x(n,"Module must exist");let i=hl[r];x(i,"Module component must exist"),yl.set(i,n),x(n.files.module,"Module must have a module file"),o.push(Bo(n.id,n.saveId,n.files.module,i.exportSpecifier??"default"))}await e.stores.modulesStore.preloadExternalModules(o)}function Tt(e,t){let o=yl.get(t);x(o,"Preloaded module must exist");let r=e.getNodeWithTrait(o.id,jo);return r?r.codeComponentIdentifier:(x(o.files.module,"Module must have a module file"),Bo(o.id,o.saveId,o.files.module,t.exportSpecifier??"default").value)}async function Sl(e,t){let{moduleIdentifier:o}=await $i(e,t);if(o.kind==="externalModuleExport"){let r=e.tree.getNodeWithTrait(o.moduleId,jo);if(r)return r.codeComponentIdentifier}return o.value}async function pe(e,t,o,r,n={}){await gl(e,r);let i=o.state,a=i.tr;a.replaceRangeWith(i.selection.from,i.selection.to,t.nodes.module.create({identifier:r,props:n}));let l=i.selection.from===0?0:i.selection.from-1;a.setSelection(bn.create(a.doc,l)),o.dispatch(a)}async function Co(e,t,o,r,n){let i=await Sl(e,r);await pe(e,t,o,i,n)}async function bo(e,t,o,r,n){qe("collection_record_youtube_add",{source:"cms"});let i=n?{url:{type:"string",value:n}}:void 0;try{let a=Tt(e.tree,ne.youtube);await pe(e,t,o,a,i),r?.()}catch(a){E(a)}}async function fC(e,t,o,r,n){let i=n?{url:{type:"string",value:n}}:void 0;try{let a=Tt(e.tree,ne.twitter);await pe(e,t,o,a,i),r?.()}catch(a){E(a)}}async function Io(e,t,o,r,n){qe("collection_record_vimeo_add",{source:"cms"});let i=n?{video:{type:"string",value:n}}:void 0;try{let a=Tt(e.tree,ne.vimeo);await pe(e,t,o,a,i),r?.()}catch(a){E(a)}}async function hC(e,t,o,r="",n){let i={code:{type:"string",value:r}};qe("collection_record_codeblock_add",{source:"cms"});try{let a=Tt(e.tree,ne.codeblock);await pe(e,t,o,a,i),n?.()}catch(a){E(a)}}function Nt(e,t,o,r,n){return r.content.size===0?!1:(e.scheduler.processWhenReady(()=>{let i=t.state,a=i.tr,l=n(r),s=Up(l),c=i.selection.$from.node(1),d=i.selection.$from.before(1),m=!l.content.child(0).isInline,p=i.selection instanceof re||c?.content.size===0;if(s)a.replaceSelectionWith(s,!0);else if(m&&p){let u=c?d+c.nodeSize:i.selection.to;a.replaceRange(d,u,l)}else a.replaceSelection(l);a.scrollIntoView(),a.setMeta("paste",!0),a.setMeta("uiEvent","paste"),t.dispatch(a)}),!0)}function Up(e){return e.openStart===0&&e.openEnd===0&&e.content.childCount===1?e.content.firstChild:null}var jp=me("prosemirror:addMedia"),xl=[{extension:"mp4",mimeType:"video/mp4"}];function vl(e){return e=e.toLowerCase(),xl.some(({extension:t})=>e.endsWith(`.${t}`))}function $p(e){return e.startsWith("video/")}var Cl=[...eo],bl=new Set(to);for(let{extension:e,mimeType:t}of xl)Cl.push(e),bl.add(t);var Xp="failed-asset-upload-placeholder",Il="updateAssetReferences";function MC(e){return e.getMeta(Il)}function Kp(e){return e.setMeta(Il,!0)}async function Re(e,t,o,r,{type:n,insertPosition:i,mediaExtractedFromHTML:a}){let l=o.state,s=l.tr,c=new Ze(e,{silent:a}),d=[],m=[],p=[];for(let y of r)if(y instanceof File){let b=$p(y.type);if(x(!a,"we should not receive files if the media is already in a document"),!bl.has(y.type))continue;let g=URL.createObjectURL(y);d.push({uploadResultTask:c.createTask(y,S=>S),temporaryURL:g,type:b?"video":"image"}),m.push({src:g,isVideo:b}),p.push(g)}else{let b=Gr(y.src);if(b){m.push({src:y.src,isVideo:vl(b.originalFilename??b.identifier)});continue}m.push({src:y.src,isVideo:vl(y.src)}),d.push({uploadResultTask:c.createTask(y.src,g=>g),temporaryURL:y.src,type:y.type})}if(!d.length)return Promise.resolve();if(!a)for(let{src:y,isVideo:b}of m){let g=t.nodes.image.create({src:y,type:b?"video":"image"});i?s.insert(i,g):l.selection.replaceWith(s,g)}s.scrollIntoView(),(n==="drop"||n==="paste")&&(s.setMeta(n,!0),s.setMeta("uiEvent",n)),o.dispatch(s);let u=d.map(y=>y.uploadResultTask());a&&vr(c,u).catch(()=>{});let v=(await Promise.allSettled(u)).map((y,b)=>_p(y,b,d)),C=[];v.forEach(y=>{if(y.type==="asset")return C.push(y.asset)});let f=new Map;d.forEach((y,b)=>{let g=v[b];x(g,"Asset upload result must be defined"),f.set(y.temporaryURL,g)}),qp(o,f),p.forEach(y=>URL.revokeObjectURL(y))}function _p(e,t,o){switch(e.status){case"fulfilled":{let{value:r}=e,{asset:n}=r;return r.type==="image"?{type:"asset",asset:n,imageSize:r.imageSize}:{type:"asset",asset:n}}case"rejected":{let r=o[t];return x(r,"Upload must be defined"),jp.reportError(new Error(e.reason)),{type:"failed upload"}}}}async function RC(e,t,o,r){let n=await Vs.pickFile({allowedFileTypes:Cl});if(!n)return;let i=n[0];return Re(e,t,o,[i],r)}function qp(e,t){let o=e.state,r=o.tr;o.doc.descendants((n,i)=>{if(!Xe(n))return;let a=t.get(n.attrs.src);if(a===void 0)return;let l={...n.attrs};if(a.type==="failed upload")l.src=Xp;else if(a.imageSize){l.src=zr({identifier:Ao(a.asset),intrinsicSize:{width:a.imageSize.naturalWidth,height:a.imageSize.naturalHeight}});let s=zi(a.imageSize);l.pixelWidth=s.nonZeroNaturalWidth,l.pixelHeight=s.nonZeroNaturalHeight}else l.src=Vr(Ao(a.asset));r.setNodeMarkup(i,n.type,l),Kp(r)}),e.dispatch(r)}function To(e){let t=e.querySelector("b[id^='docs-internal-guid']")??e.querySelector("*[id^='docs-internal-guid']")?.parentElement;if(t)for(let o=t.children.length-1;o>=0;o--){let r=t.children[o];if(r){for(r instanceof HTMLParagraphElement&&!te.isOn("pasteMarkdown")&&Yp(r),r instanceof HTMLDivElement&&Zp(r);Tl(r.firstChild);)r.removeChild(r.firstChild);for(;Tl(r.lastChild);)r.removeChild(r.lastChild);(r.tagName==="BR"||r.childNodes.length===0)&&r.remove()}}}function Tl(e){return e instanceof Element&&e.textContent===""&&e.querySelectorAll("img").length===0}function Yp(e){if(e.textContent!=="")return;let t=e.querySelectorAll("img");t.length!==0&&e.replaceWith(...t)}function Zp(e){let t=e.querySelector("table");t===null||t.querySelectorAll("tr").length===0||t.querySelectorAll("th, td").length===0||e.replaceWith(t)}var No=class extends Ue{constructor(o,r,n){let i=Ue.nodesFromSchema(r),a=Ue.marksFromSchema(r),l={},s={};for(let[c,d]of Object.entries(i))l[c]=(...m)=>d(...m,o);for(let[c,d]of Object.entries(a))s[c]=(...m)=>d(...m,o);super(l,s);this.onAfterSerializeFragment=n}serializeFragment(o,r,n=document.createDocumentFragment()){return super.serializeFragment(o,r,n),this.onAfterSerializeFragment?.(n),n}};var Jp=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,Qp=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function Nl({engine:e,schema:t,stylePresetGetters:o,supportedTags:r,saveChanges:n}){return new Q({props:{clipboardSerializer:new No(e,t,o?om:void 0),transformPastedHTML(i){let a=oo(i);return To(a),a.innerHTML},handlePaste(i,a,l){let s=a.clipboardData?.getData("text/plain"),c=a.clipboardData?.getData("text/html");if(Yo(t)){let{clipboardData:d}=a;if(d&&d.files.length>0)return Re(e,t,i,d.files,{type:"paste"}).finally(n),!0}if(fe(s)){let m=["http:","https:","mailto:","www."].some(u=>s.startsWith(u)),p=i.state.selection;if(m&&p.from!==p.to&&Fn(t)){let u=_o(s,e)??Et({url:s}),h=i.state.tr;return h.addMark(p.from,p.to,t.marks.link.create({link:u,openInNewTab:ro(u),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),i.dispatch(h),!0}if(Zo(t)&&te.isOn("cmsPasteModules")){let u=ue(s);if(Be(u))return pe(e,t,i,u.value).catch(E),!0;if(Qt(s))return Co(e,t,i,s).catch(E),!0}if(Zo(t)){if(Qp.test(s))return bo(e,t,i,n,s).catch(E),!0;if(Jp.test(s))return Io(e,t,i,n,s).catch(E),!0}}return Nt(e,i,a,l,d=>{if(o&&c&&tm(c))return d;let m=Xi(s);s&&m&&!c&&(d=Ki(s,t));let p=t.nodes.document.create(void 0),u=new je(p);u.insert(0,d.content);let h=new Map,v=[];if(u.doc.descendants((f,y)=>{if(z(f)){let b=f.attrs.tag,g=r?.has(b)??!0,S=_e(b)&&g?b:"p";u.setNodeMarkup(y,t.nodes.textBlock,{...f.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:S})}Xe(f)&&v.push({src:f.attrs.src,type:f.attrs.type});for(let b of f.marks){if(!mt(b)||!$r(b.attrs.link))continue;let g=b.attrs.link.url,S;h.has(g)?S=h.get(g):(S=_o(g,e),h.set(g,S)),S&&u.addMark(y,y+f.nodeSize,b.type.create({...b.attrs,link:S}))}}),v.length&&Yo(t)&&Re(e,t,i,v,{type:"paste",mediaExtractedFromHTML:!0}).finally(n),Dn(t)&&o){let y=i.state.selection,g=y.$from.parent,S=g.textContent,T=z(g)&&S.length>0,w=y instanceof re,P=!c&&s&&s.length>0&&!m;!T&&!P&&!w?rm(e,t,o.getStylePresetForTag,o.getStylePresetForLink,u):nm(i,t,u)}let C=d.content.child(0).isInline?u.doc.content.child(0).content:u.doc.content;return new We(C,d.openStart,d.openEnd)})}}})}var Ml="framer-match-formatting",em=document.createComment(Ml);function tm(e){return e.endsWith(`<!--${Ml}-->`)}function om(e){e.appendChild(em)}function rm(e,t,o,r,n){n.doc.descendants((i,a)=>{if(z(i)){let l=i.attrs,s=fe(l.textStylePreset)?e.tree.getNodeWithTrait(l.textStylePreset,Me):void 0,c=_e(l.tag)?l.tag:"p",d=s??o(c)??so(e.tree,c)??Zt.createDefault(c);lo(e,d),n.setNodeMarkup(a,t.nodes.textBlock,{...i.attrs,blockStyles:s?i.attrs.blockStyles:{},inlineStyles:s?i.attrs.inlineStyles:{},textStylePreset:d.id}),s||n.removeMark(a,i.nodeSize,t.marks.inlineStyles)}if(i.type===t.nodes.text){let l=i.marks.find(mt);if(l){let s=r()??io(e.tree)??no.createDefault();ao(e,s),n.addMark(a,a+i.nodeSize,l.type.create({...l.attrs,linkStylePreset:s.id}))}}})}function nm(e,t,o){let r=e.state,n=r.selection;if(n instanceof re){let c=r.doc.resolve(1);n=new q(c)}let i=n.$from.parent,a=z(i),s=n.$from.marks().find($e);if(s)o.addMark(0,o.doc.content.size,s);else if(a){let c=t.marks.inlineStyles.create({inlineStyles:i.attrs.inlineStyles});o.addMark(0,o.doc.content.size,c)}else o.removeMark(0,o.doc.content.size,t.marks.inlineStyles);o.doc.descendants((c,d)=>{if(!z(c))return;let m=a?i.attrs:c.attrs;o.setNodeMarkup(d,t.nodes.textBlock,m)})}var Rl="framer-rich-text",im=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,am=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function kl(e,t){return new Q({props:{handlePaste(o,r,n){let i=r.clipboardData?.getData("text/plain"),a=r.clipboardData?.getData("text/html");return i===""&&a===""?!0:Nt(e,o,r,n,l=>{let s=!a&&i&&i.length>0;if(a?.endsWith(`<!--${Rl}-->`))return l;let m=o.state.selection,u=m.$from.parent,h=u.textContent,v=z(u)&&h.length>0,C=m instanceof re;return!v&&!s&&!C?lm(e,t,l):dm(o,l)})},clipboardSerializer:new Rr(B)}})}function Ob(e,t,o,r,n,i){return new Q({props:{transformPastedHTML(a){let l=oo(a);return To(l),l.innerHTML},handlePaste(a,l,s){if(t){let{clipboardData:d}=l;if(d&&d.files.length>0)return Re(e,B,a,d.files,{type:"paste"}).finally(i),!0}let c=l.clipboardData?.getData("text/plain");if(fe(c)){let m=["http:","https:","mailto:","www."].some(u=>c.startsWith(u)),p=a.state.selection;if(m&&p.from!==p.to&&r){let u=Et({url:c}),h=a.state.tr;return h.addMark(p.from,p.to,B.marks.link.create({link:u,openInNewTab:ro(u),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),a.dispatch(h),!0}if(o&&te.isOn("cmsPasteModules")){let u=ue(c);if(Be(u))return pe(e,B,a,u.value).catch(E),!0;if(Qt(c))return Co(e,B,a,c).catch(E),!0}if(o){if(am.test(c))return bo(e,B,a,i,c).catch(E),!0;if(im.test(c))return Io(e,B,a,i,c).catch(E),!0}}return Nt(e,a,l,s,d=>{let m=B.nodes.document.create(void 0),p=new je(m);p.insert(0,d.content);let u=[];p.doc.descendants((v,C)=>{if(z(v)){let f=v.attrs.tag,y=n?.has(f)??!0,b=_e(f)&&y?f:"p";p.setNodeMarkup(C,B.nodes.textBlock,{...v.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:b})}Xe(v)&&u.push({src:v.attrs.src,type:v.attrs.type})}),u.length&&Re(e,B,a,u,{type:"paste",mediaExtractedFromHTML:!0}).finally(i),p.removeMark(0,p.doc.content.size,B.marks.inlineStyles),r||p.removeMark(0,p.doc.content.size,B.marks.link);let h=d.content.child(0).isInline?p.doc.content.child(0).content:p.doc.content;return new We(h,d.openStart,d.openEnd)})}}})}var sm=document.createComment(Rl),Rr=class{constructor(t){I(this,"domSerializer");I(this,"nodes");I(this,"marks");this.domSerializer=Ue.fromSchema(t),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(t,o){return this.domSerializer.serializeNode(t,o)}serializeFragment(t,o){let r=this.domSerializer.serializeFragment(t,o);return r.appendChild(sm),r}};function lm(e,t,o){let r=B.nodes.document.create(void 0),n=new je(r);n.insert(0,o.content);let i=e.tree.getNodeWithTrait(t,Qr);x(i,"RichTextNode for pasting not found");let a=cm(e.tree,i);n.doc.descendants((s,c)=>{if(z(s)){let d=s.attrs,m=fe(d.textStylePreset)?e.tree.getNodeWithTrait(d.textStylePreset,Me):void 0,p=_e(d.tag)?d.tag:"p",u=m??a[p]??i.getNodeTextStylePreset(e.tree,p)??so(e.tree,p)??Zt.createDefault(p);lo(e,u),n.setNodeMarkup(c,B.nodes.textBlock,{...s.attrs,blockStyles:m?s.attrs.blockStyles:{},inlineStyles:m?s.attrs.inlineStyles:{},textStylePreset:u.id}),m||n.removeMark(c,s.nodeSize,B.marks.inlineStyles)}if(s.type===B.nodes.text){let d=s.marks.find(mt);if(d){let m=i.getNodeLinkStylePreset(e.tree)??io(e.tree)??no.createDefault();ao(e,m),n.addMark(c,c+s.nodeSize,B.marks.link.create({...d.attrs,linkStylePreset:m.id}))}}});let l=o.content.child(0).isInline?n.doc.content.child(0).content:n.doc.content;return new We(l,o.openStart,o.openEnd)}function cm(e,t){let o={};for(let r of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(r,Me);n&&(o[n.tag]??=n)}return o}function dm(e,t){let o=e.state,r=o.selection;if(r instanceof re){let m=o.doc.resolve(1);r=new q(m)}let n=B.nodes.document.create(void 0),i=new je(n);i.insert(0,t.content);let a=r.$from.parent,l=z(a),c=r.$from.marks().find($e);if(c)i.addMark(0,i.doc.content.size,c);else if(l){let m=B.marks.inlineStyles.create({inlineStyles:a.attrs.inlineStyles});i.addMark(0,i.doc.content.size,m)}else i.removeMark(0,i.doc.content.size,B.marks.inlineStyles);i.doc.descendants((m,p)=>{if(!z(m))return;let u=l?a.attrs:m.attrs;i.setNodeMarkup(p,B.nodes.textBlock,u)});let d=t.content.child(0).isInline?i.doc.content.child(0).content:i.doc.content;return new We(d,t.openStart,t.openEnd)}function Gb({engine:e,schema:t,nodeId:o,getRichTextNode:r}){return te.isOn("pasteMarkdown")?Nl({engine:e,schema:t,stylePresetGetters:{getStylePresetForTag:n=>{let i=r();if(i)return pm(e.tree,i,n)??i.getNodeTextStylePreset(e.tree,n)??void 0},getStylePresetForLink:()=>r()?.getNodeLinkStylePreset(e.tree)??void 0}}):kl(e,o)}function pm(e,t,o){for(let r of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(r,Me);if(n&&n.tag===o)return n}}var mm=["RGB","HSL","HEX","P3"];function Wb(e){return mm.some(t=>t===e)}function $b(e,t){let o=new Set,r=new Set;for(let n of t){if(r.has(n))continue;let i=e.get(n);if(i){if(Qo(i)){o.add(n);continue}for(let a of i.ancestors())if(!r.has(a.id)&&(r.add(a.id),a.cache.reset(),!!Qo(a))){o.add(a.id);break}}}return o}function um(e){let t=Go.isP3String(e)?Wr.fromString(e):Go(e);if(t)return t.r*.299+t.g*.587+t.b*.114+(1-t.a)*255}function qb(e){let t=um(e);if(W(t))return t>128?"light":"dark"}var Em={};Yl(Em,{amethyst:()=>hm,aquaBlue:()=>gm,atomDark:()=>ym,atomLight:()=>Sm,ayuDark:()=>vm,ayuLight:()=>xm,cmsTheme:()=>fm,cobalt2:()=>Cm,cyberpunk:()=>bm,dracula:()=>Im,framerDark:()=>Mt,framerLight:()=>Tm,freeCodeCamp:()=>Nm,githubDark:()=>Mm,githubLight:()=>Rm,levelUp:()=>km,magic:()=>wm,monokaiPro:()=>Pm,neoCyan:()=>Fm,nightOwl:()=>Dm,sandpackDark:()=>Om,sandpackLight:()=>Bm});var fm={colors:{surface1:$.cmsCodeBlockSurface1,surface3:$.cmsCodeBlockSurface3,disabled:$.cmsCodeBlockDisabled,accent:$.cmsCodeBlockAccent,errorSurface:$.cmsCodeBlockErrorSurface},syntax:{plain:$.cmsCodeBlockPlain,comment:$.cmsCodeBlockComment,keyword:$.cmsCodeBlockKeyword,tag:$.cmsCodeBlockTag,punctuation:$.cmsCodeBlockPunctuation,definition:$.cmsCodeBlockDefinition,property:$.cmsCodeBlockProperty,static:$.cmsCodeBlockStatic,string:$.cmsCodeBlockString},font:{mono:ki.family.monospace,lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},hm={colors:{surface1:"#000000",surface3:"#3b3b4f",disabled:"#858591",accent:"#a26cd6",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#a26cdd",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#57d1b7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},gm={colors:{surface1:"#f8f9fb",surface3:"#e4e7eb",disabled:"#C5C5C5",accent:"#2e7692"},syntax:{plain:"#1F2933",comment:"#A7B6C2",keyword:"#1A56DB",tag:"#1A56DB",punctuation:"#394b59",definition:"#A23DAD",property:"#2e7692",static:"#1A56DB",string:"#1992D4"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ym={colors:{surface1:"#282c34",surface3:"#2c313c",disabled:"#4d4d4d",accent:"#c678dd",errorSurface:"#ffeceb"},syntax:{plain:"#a8b1c2",comment:"#757575",keyword:"#c678dd",tag:"#e06c75",punctuation:"#a8b1c2",definition:"#62aeef",property:"#d19a66",static:"#a8b1c2",string:"#98c379"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Sm={colors:{surface1:"#fafafa"},syntax:{plain:"#383a42",comment:"#a0a1a7",keyword:"#a626a4",tag:"#e45649",punctuation:"#383a42",definition:"#c18401",property:"#4078f2",static:"#986801",string:"#50a14f"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},vm={colors:{surface1:"#0c1017"},syntax:{comment:"#646a72",definition:"#5ac2ff",keyword:"#ff9040",plain:"#bfbdb6",property:"#ffb454",punctuation:"#bfbdb6",static:"#d2a6ff",string:"#80d962",tag:"#3bbae7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},xm={colors:{surface1:"#fafafa"},syntax:{comment:"#aaaeb1",definition:"#3b9ee6",keyword:"#fa8e3e",plain:"#5c6166",property:"#f2ae49",punctuation:"#5c6167",static:"#a37acc",string:"#87b300",tag:"#56b4d5"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Cm={colors:{surface1:"#193549",surface3:"#1f4662",disabled:"#C5C5C5",accent:"#ffc600",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:"#0088ff",keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},bm={colors:{surface1:"#051c30",surface3:"#042f40",disabled:"#C5C5C5",accent:"#fdf500",errorSurface:"#051c30"},syntax:{plain:"#ffffff",comment:"#1ac5b0",keyword:"#fdf500",tag:"#ffc600",punctuation:"#afd7fa",definition:"#ffc600",property:"#fdf500",static:"#e455ae",string:"#37ebf3"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Im={colors:{surface1:"#282a36",surface3:"#44475a",disabled:"#6272a4",accent:"#bd93f9",errorSurface:"#44475a"},syntax:{plain:"#f8f8f2",comment:"#6272a4",keyword:"#ff79c6",tag:"#ff79c6",punctuation:"#ff79c6",definition:"#f8f8f2",property:"#50fa7b",static:"#bd93f9",string:"#f1fa8c"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Mt={colors:{surface1:"#161820",surface3:"#2f2f2f",disabled:"#4d4d4d",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#eeeeee",comment:"#666666",keyword:"#00BBFF",tag:"#00BBFF",punctuation:"#999999",definition:"#ffcc66",property:"#77dddd",static:"#ff8866",string:"#bb88ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Tm={colors:{surface1:"#fafafa",surface3:"#f3f3f3",disabled:"#c5c5c5",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#666666",comment:"#bbbbbb",keyword:"#0099ff",tag:"#0099ff",punctuation:"#bbbbbb",definition:"#FFAA00",property:"#33cccc",static:"#ff8866",string:"#8855ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Nm={colors:{surface1:"#2a2a40",surface3:"#3b3b4f",disabled:"#858591",accent:"#dbb8ff",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#dbb8ff",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#acd157"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Mm={colors:{surface1:"#0d1117",surface3:Mt.colors?.surface3,disabled:Mt.colors?.disabled,accent:Mt.colors?.accent,errorSurface:Mt.colors?.errorSurface},syntax:{comment:"#8b949e",definition:"#d2a8ff",keyword:"#ff7b72",plain:"#e6edf3",property:"#79c0ff",punctuation:"#e6edf3",static:"#7ee787",string:"#a5d6ff",tag:"#7ee787"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Rm={colors:{surface1:"#ffffff",surface3:"#f5f5f5",disabled:"#d1d4d8",accent:"#24292e"},syntax:{keyword:"#d73a49",property:"#005cc5",plain:"#24292e",static:"#032f62",string:"#032f62",definition:"#6f42c1",punctuation:"#24292e",tag:"#22863a",comment:"#6a737d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"normal",property:"normal",keyword:"normal"}},km={colors:{surface1:"#191324",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Pm={colors:{surface1:"#2D2A2E",surface3:"#484747",disabled:"#444344",accent:"#FFD866",errorSurface:"#c24038"},syntax:{plain:"rgb(252, 252, 250)",comment:"#757575",keyword:"rgb(255, 97, 136)",tag:"rgb(120, 220, 232)",punctuation:"rgb(147, 146, 147)",definition:"rgb(169, 220, 118)",property:"rgb(120, 220, 232)",static:"rgb(171, 157, 242)",string:"rgb(255, 216, 102)"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"normal"}},wm={colors:{surface1:"#f6f6f8",surface3:"#f6f6f8",disabled:"#C5C5C5",accent:"#ffa600",errorSurface:"#ffeceb"},syntax:{plain:"#151515",comment:"#cacacd",keyword:"#ffa600",tag:"#ff9a4d",punctuation:"#ffb3b3",definition:"#ff6f00",property:"#9900ff",static:"#FF453A",string:"#f53524"},font:{mono:'"Roboto Mono", monospace',lineHeight:"24px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Fm={colors:{surface1:"#2b3935",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Dm={colors:{surface1:"#011627",surface3:"#112331",disabled:"#4D4D4D",accent:"#c5e4fd",errorSurface:"#811e18"},syntax:{plain:"#d6deeb",comment:"#999999",keyword:"#c792ea",tag:"#7fdbca",punctuation:"#7fdbca",definition:"#82aaff",property:"#addb67",static:"#f78c6c",string:"#ecc48d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"italic"}},Om={colors:{surface1:"#151515",surface3:"#2F2F2F",disabled:"#4D4D4D",accent:"#90e86f",errorSurface:"#b08df8"},syntax:{plain:"#f0fdaf",comment:"#757575",keyword:"#e5fd78",tag:"#f0fdaf",punctuation:"#ffffff",definition:"#eeeeee",property:"#90e86f",static:"#ffffff",string:"#dafecf"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Bm={colors:{surface1:"#ffffff",surface3:"#F3F3F3",disabled:"#C5C5C5",accent:"#3973E0",errorSurface:"#FCF1F0"},syntax:{plain:"#151515",comment:"#999",keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}};async function eI(e){let t=pr.on(Br).expect();return new Promise(o=>{dt(e)&&e.stores.canvasStore.setColorSamplerActive(!0),e.scheduler.runBeforeNextFrame(async()=>{let{color:r}=await t.sampleColor();e.scheduler.process(()=>{dt(e)&&e.stores.canvasStore.setColorSamplerActive(!1),o(r)})})})}function Pl(){return Vi.isOn("disableSecureCanvas")}var Lm,Am,Vm=new Promise((e,t)=>{Lm=e,Am=t});function lI(e){if(dt(e)){if(e.canvasSandbox?.sandbox.controlsVisibility)return Promise.resolve(e.canvasSandbox.sandbox.controlsVisibility);if(Pl())return Promise.resolve(new Hi(e))}return Ri(e)?e.stores.sandboxStore.getControlsVisibility():Vm}function CI(e,t,o){return Yn(o)?Wm(e,t,o):Zn(o)?Hm(e,t,o):qn(o)?Um(e,t,o):null}function zm(e,t){return R(t*Math.sin(zo(e)),t*Math.cos(zo(e))*-1)}function Gm(e,t){if(e.type==="conic"){let{angle:o,radius:r}=e;return t.map(n=>{let i=o+n.position*360;return zm(i,r)})}return t.map(o=>D.pointAtPercentDistance(e.axis,o.position))}function Hm(e,t,o){let r=e.getRect(t),n=o.centerAnchorX*r.width,i=o.centerAnchorY*r.height,a=o.widthFactor*r.width,l=o.heightFactor*r.height,s=a*2,c=l*2,d=a+n,m=i-l,p={width:s,height:c},u=e.convertPointToCanvas(t,{x:n,y:i}),h=e.convertPointToCanvas(t,{x:d,y:i}),v=e.convertPointToCanvas(t,{x:n,y:m}),{rotation:C}=e.convertRectToCanvasWithRotation(t),f=D(u,h);return{type:"radial",start:u,end:h,center:D.pointAtPercentDistance(f,0),axis:f,rotation:C,size:p,topCenter:v}}function Wm(e,t,o){let r=e.getRect(t),n={x:r.width/2,y:r.height/2},i=e.convertPointToCanvas(t,n),a=o.angle*Math.PI/180,l={x:-Math.sin(a)*100,y:Math.cos(a)*100},s=e.convertPointToCanvas(t,R.add(n,l)),c=D(i,s),d=Mo(o.angle),m=N.pointsAtOrigin(r),p=Math.floor(d/90)+3,u=m[p%4],h=e.convertPointToCanvas(t,u),v=m[(p+2)%4],C=e.convertPointToCanvas(t,v),f=D.perpendicular(c,h),y=D.intersection(f,c);if(!y)return null;let b=R.subtract(i,y),g=R.add(y,b,b),S=m[(p+1)%4],T=e.convertPointToCanvas(t,S),w=D.perpendicular(f,T),M=D.perpendicular(c,i),P=D.intersection(w,M);if(!P)return null;let U={width:R.distance(P,i)*2,height:R.distance(y,g)};return{type:"linear",start:y,end:g,center:i,axis:D(y,g),startCorner:h,endCorner:C,size:U}}function Um(e,t,o){let r=e.getRect(t),n=e.convertPointToCanvas(t,{x:r.width/2*o.centerAnchorX/.5,y:r.height/2*o.centerAnchorY/.5}),[i,a]=N.midPoints(r),l=N.center(r),s=R.distance(l,i),c=R.distance(l,a),d=Math.min(s,c),m=e.totalAncestorRotation(t),p=Mo(m+o.angle);return{type:"conic",start:R(l.x,l.y-d),center:n,rotation:0,radius:d,angle:p}}var bI=(e,t,o,r)=>{let n=Gm(e,t),i=n[0],a=n[n.length-1];if(i.x===a.x&&i.y===a.y&&R.distance(o,i)<r)return!0;let l=D(i,a),s=D.perpendicular(l,o),c=D.intersection(l,s);if(e.type==="radial"&&R.distance(o,e.topCenter)<r)return!0;if(e.type==="conic")return R.distance(o,e.center)<=e.radius+40;if(!c)return!1;let d=R.distance(o,c),m=R.distance(o,i),p=R.distance(o,a),u=R.distance(i,a);return m>u&&p<m?Math.max(p,d)<r:p>u&&m<p?Math.max(m,d)<r:d<r};function jm(e,t){let o=e.reduce((a,l)=>Math.abs(a.position-t)<Math.abs(l.position-t)?a:l),r=e.findIndex(a=>a===o),n=o.position-t>0?r-1:r+1,i=e[n]??o;return[o,i]}function II(e,t,o,r){let[n,i]=jm(t,o),a=Dt([n.position,i.position],[0,1])(o),l=kr(e,n,r),s=kr(e,i,r);return Dt([0,1],[l,s])(a)}function kr(e,t,o){let r=t.value;if(!dn(r))return r;let n=ln(r),i=n?Ti(n,e):null;return i&&tn(i)?i.colorForMode(o):cn(r)||"transparent"}function TI(e,t,o){return t.map(r=>r.merge({value:kr(e,r,o)}))}function NI(e,t){let o=D(t,e.center),r=e.center.x,n=e.center.y-e.radius,i=D(R(r,n),e.center),a=D.intersectionAngle(i,o),s=Mo(a)-e.angle,c=Mo(s);return Math.abs(c/360)}function Mo(e){if(e===360)return e;let t=e%360;return t<0?360+t:t}function MI(e){return e.sort((t,o)=>t.position-o.position)}function RI(e){let t=!1,o=Dt([e.stops[0]?.position??0,e.stops[e.stops.length-1]?.position??1],[0,1]),r=e.stops.map(n=>((n.position<0||n.position>1)&&(t=!0),n.merge({position:o(n.position)})));return t?r:void 0}var wl="--top-flash-inset",Fl="--right-flash-inset",Dl="--bottom-flash-inset",Ol="--left-flash-inset",Bl="--flash-radius",Pr="flash_fh6lfgu",wr="defaultStyle_d8eehx6",El="warningStyle_wdvaq7i",Ll="glowStyle_ghqxg7a";var kt=2;function Al(e="default"){switch(e){case"glow":return[Ll];case"default":return[wr];case"warning":return[wr,El]}}function Rt(e,t,o){e.style.setProperty(t,`${o??0}px`)}function Vl(e,t){Rt(e,wl,t?.inset?.top),Rt(e,Fl,t?.inset?.right),Rt(e,Dl,t?.inset?.bottom),Rt(e,Ol,t?.inset?.left),t?.radius&&Rt(e,Bl,t.radius),e.addEventListener("animationend",function o(){e.classList.remove(Pr),e.classList.remove(...Al(t?.style)),e.removeEventListener("animationend",o)}),e.classList.add(Pr),e.classList.add(...Al(t?.style))}function zl(e){Vl(e,{style:"default",inset:{top:kt,right:-(ir.panelPadding-kt),left:-(ir.panelPadding-kt),bottom:kt}})}function Gl({id:e,flash:t}){let o=document.getElementById(e);o instanceof HTMLDivElement&&(tl(o,{scrollMode:"if-needed",block:"start"}),t&&zl(o))}function Hl(e){let t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:document.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(t)}var Wl="breadcrumb-collection";function Xm(e,t,o){let r=e.tree.getNode(o);if(!r)return null;if(!hi(r))return{variableProvider:r,variableId:t};let n=e.tree.getNodeWithTrait(r.dataRepeaterArray.providerId,mn);return n?{variableProvider:n,variableId:r.dataRepeaterArray.id}:null}function pT(e,t,o){let{chromeStore:r,modalStore:n,variablesStore:i,contentManagementStore:a,scopeStore:l,codeEditorStore:s,selectionStore:c}=e.stores;if(o===Vn){r.setLocalizationsVisible(!0);return}let d=Xm(e,t,o);if(!d)return;let{variableProvider:m,variableId:p}=d;if(pn(m)&&m.hasVariable(p))i.selectedVariableId=p,n.set({type:"Variables",source:"variableReference"});else if(Z(m)||Zr(m)){let{dataIdentifier:h}=m;if(!h)return;if(wt(h)){if(r.isViewOnly)return;n.set({type:"Confirmation",title:"External Collection",description:`This is an external ${"Collection".toLowerCase()} preview. To edit, choose a collection to swap in or create a local copy of this collection.`,confirmLabel:"View Options",source:"edit_action",onConfirm:()=>{r.chromeIsVisible=!0,At(m)?(c.set(m.id),e.scheduler.runAtEndOfFrame(()=>Gl({id:"data-repeater-panel",flash:!0}))):Z(m)?e.scheduler.runAtEndOfFrame(()=>{let f=document.getElementById(Wl);f&&Hl(f)}):void 0}});return}let v=pt(e.tree,h);if(v){Z(m)&&x(m.isLoaded(),"Web page node should be loaded");let f=Km({collectionNode:v,engine:e,variableId:p,variableProvider:m});f?(a.pushExistingItemToOverlayStack(f.collectionItemNode.id),a.setCollectionItemControlToHighlight(f.variableId)):(l.select(Gn,{keepHistory:!1}),c.set(v),a.setCollectionItemControlToHighlight(p));return}let C=ji(j,h);C&&s.editFile(C.file)}}function Km({collectionNode:e,engine:t,variableId:o,variableProvider:r}){let n=Ul({engine:t,variableProvider:r});if(n)return n;let i=o.split(".");x(i.length>=0,"VariableID must not be empty");let a=yt(r,t.stores.treeStore.sandboxCollectionData),l=t.tree.getNodeWithTrait(a,at);if(l)return Xt(t.tree,t.stores.treeStore.sandboxCollectionData,o,l,e)}function Ul({engine:e,variableProvider:t}){if(!pi(t))return;let[o,...r]=t.collectionFilters?.filters.flatMap(s=>s?.itemKey!=="id"?[]:s.transforms).flatMap(s=>_m(s)??[])??[];if(!o?.providerId||r.length>0)return;let n=e.tree.getNode(o.providerId);if(!n||!(zt(n)||Z(n))||!n.dataIdentifier)return;let i=pt(e.tree,n.dataIdentifier);if(!i)return;let a=yt(n,e.stores.treeStore.sandboxCollectionData),l=e.tree.get(a);if(at(l))return l?{collectionItemNode:l,collectionNode:i,variableId:o.id}:Ul({engine:e,variableProvider:n})}function _m(e){if(!(e.name!=="equals"&&e.name!=="isIncludedIn"||!jr(e.value)||!e.value.providerId))return e.value}var uT="My website";var fT="My description",hT="yoursite.url";export{pr as a,uo as b,ra as c,St as d,Ql as e,tc as f,sa as g,ca as h,J as i,Hh as j,Wh as k,Uh as l,jh as m,$h as n,Xh as o,Kh as p,_h as q,qh as r,Yh as s,Zh as t,ps as u,Jh as v,ud as w,Qh as x,fr as y,hr as z,ys as A,Ss as B,ho as C,xs as D,vy as E,gr as F,Hd as G,_d as H,wy as I,Fy as J,eI as K,Pl as L,Lm as M,Am as N,lI as O,wv as P,Ct as Q,bt as R,Kv as S,nx as T,tl as U,Tx as V,Dx as W,Ox as X,fl as Y,Bx as Z,Ax as _,Vx as $,Iy as aa,Ty as ba,Ny as ca,Xx as da,Zx as ea,gl as fa,nC as ga,Tt as ha,pe as ia,bo as ja,fC as ka,hC as la,Ts as ma,bs as na,Es as oa,Vs as pa,Qy as qa,Xp as ra,MC as sa,Kp as ta,Re as ua,RC as va,Nl as wa,Ob as xa,Gb as ya,CI as za,zm as Aa,Gm as Ba,bI as Ca,II as Da,kr as Ea,TI as Fa,NI as Ga,MI as Ha,RI as Ia,zs as Ja,kt as Ka,Vl as La,Gl as Ma,Wl as Na,pT as Oa,mm as Pa,Wb as Qa,$b as Ra,Hs as Sa,Ws as Ta,Us as Ua,Qe as Va,Xs as Wa,Ks as Xa,_s as Ya,Sp as Za,ov as _a,qb as $a,uT as ab,fT as bb,hT as cb,av as db,vo as eb,Ir as fb,dv as gb,qs as hb,Ys as ib,fm as jb,Mm as kb,Rm as lb,Em as mb};
//# sourceMappingURL=https://app.framerstatic.com/chunk-E7ZU36TU.mjs.map
